{"version":3,"sources":["webpack:///./node_modules/c3/c3.js"],"names":["module","exports","ChartInternal","api","$$","this","d3","window","config","getDefaultConfig","data","cache","axes","Chart","internal","loadConfig","beforeInit","init","afterInit","bindThis","fn","target","argThis","Object","keys","forEach","key","bind","length","prototype","asHalfPixel","n","Math","ceil","ceil10","v","diffDomain","d","getOption","options","defaultValue","isDefined","getPathBox","path","box","getBBox","items","pathSegList","getItem","x","y","min","width","height","element","ignore","hasValue","dict","value","found","isArray","o","Array","isEmpty","isString","isFunction","isNumber","isUndefined","isValue","notEmpty","sanitise","str","replace","flattenArray","arr","concat","apply","isWithinBox","point","sensitivity","xStart","xEnd","yStart","yEnd","getIEVersion","agent","navigator","userAgent","pos","indexOf","parseInt","substring","isIE","version","ver","AxisInternal","component","params","scale","scaleLinear","range","orient","innerTickSize","outerTickSize","withOuterTick","tickPadding","tickValues","tickFormat","tickArguments","tickOffset","tickCulling","tickCentered","tickTextCharSize","tickTextRotate","tickLength","axis","generateAxis","axisX","selection","attr","axisY","scaleExtent","domain","start","stop","generateTicks","i","ticks","push","unshift","copyScale","newScale","copy","isCategory","textFormatted","formatted","updateRange","rangeExtent","updateTickTextCharSize","tick","size","h","w","select","text","each","undefined","isVertical","tspanData","splitted","tickMultiline","splitTickText","tickMultilineMax","ellipsify","map","s","index","subtext","spaceIndex","textWidth","tickText","maxWidth","tickWidth","toString","call","split","charAt","substr","slice","max","ellipsified","remaining","available","padEnd","updateTickLength","lineY2","tickPosition","textY","rotate","textTransform","textTextAnchor","tspanDx","sin","PI","tspanDy","dy","g","transition","self","tickTransform","tickX","tickY","scale0","__chart__","scale1","ticksValues","selectAll","tickEnter","enter","insert","style","tickExit","exit","remove","tickUpdate","merge","lineUpdate","append","textUpdate","tspans","tspanUpdate","pathUpdate","rangeBand","dx","arguments","top","right","bottom","left","format","isCentered","tickInterval","interval","node","getTotalLength","Infinity","culling","CLASS","chart","chartLine","chartLines","chartBar","chartBars","chartText","chartTexts","chartArc","chartArcs","chartArcsTitle","chartArcsBackground","chartArcsGaugeUnit","chartArcsGaugeMax","chartArcsGaugeMin","selectedCircle","selectedCircles","eventRect","eventRects","eventRectsSingle","eventRectsMultiple","zoomRect","brush","dragZoom","focused","defocused","region","regions","title","tooltipContainer","tooltip","tooltipName","shape","shapes","line","lines","bar","bars","circle","circles","arc","arcLabelLine","arcs","area","areas","empty","texts","gaugeValue","grid","gridLines","xgrid","xgrids","xgridLine","xgridLines","xgridFocus","ygrid","ygrids","ygridLine","ygridLines","colorScale","stanfordElements","stanfordLine","stanfordLines","stanfordRegion","stanfordRegions","stanfordText","stanfordTexts","axisXLabel","axisYLabel","axisY2","axisY2Label","legendBackground","legendItem","legendItemEvent","legendItemTile","legendItemHidden","legendItemFocused","dragarea","EXPANDED","SELECTED","INCLUDED","AxisClass","owner","Axis","main","axis_x_inner","clipPathForXAxis","getTranslate","axis_x_show","axis_rotated","textAnchorForXAxisLabel","axis_y_inner","clipPathForYAxis","axis_y_show","textAnchorForYAxisLabel","y2","axis_y2_show","textAnchorForY2AxisLabel","getXAxis","withoutTransition","withoutRotateTickText","axisParams","isCategorized","axis_x_tick_multiline","Number","axis_x_tick_multilineMax","axis_x_tick_width","axis_x_tick_rotate","isTimeSeries","parseDate","axis_x_tick_centered","axis_x_tick_culling","updateXAxisTickValues","targets","axis_x_tick_fit","axis_x_tick_count","generateTickValues","mapTargetsToUniqueXs","xAxis","subXAxis","getYAxis","axisId","isAxisNormalized","axis_y_tick_rotate","isTimeSeriesY","axis_y_tick_time_type","axis_y_tick_time_interval","getId","id","data_axes","getXAxisTickFormat","defaultAxisTimeFormat","categoryName","axis_x_tick_format","date","axisTimeFormat","getTickValues","getXAxisTickValues","axis_x_tick_values","getYAxisTickValues","axis_y_tick_values","yAxis","getY2AxisTickValues","axis_y2_tick_values","y2Axis","getLabelOptionByAxisId","option","axis_y_label","axis_y2_label","axis_x_label","getLabelText","setLabelText","getLabelPosition","defaultPosition","position","isInner","isOuter","isLeft","isCenter","isRight","isTop","isMiddle","isBottom","getXAxisLabelPosition","getYAxisLabelPosition","getY2AxisLabelPosition","getLabelPositionById","textForXAxisLabel","textForYAxisLabel","textForY2AxisLabel","xForAxisLabel","forHorizontal","dxForAxisLabel","textAnchorForAxisLabel","xForXAxisLabel","xForYAxisLabel","xForY2AxisLabel","dxForXAxisLabel","dxForYAxisLabel","dxForY2AxisLabel","dyForXAxisLabel","getMaxTickWidth","getHorizontalAxisHeight","dyForYAxisLabel","dyForY2AxisLabel","axis_y2_inner","withoutRecompute","targetsToShow","dummy","currentMaxTickWidths","svg","filterTargetsToShow","getYDomain","yOrient","yAxisTickValues","y2Orient","y2AxisTickValues","getXDomain","xOrient","xAxisTickFormat","xAxisTickValues","classed","updateLabels","withTransition","getPadding","padding","domainLength","p","unit","convertPixelsToAxisPadding","pixels","values","tickCount","forTimeSeries","targetCount","end","count","tickValue","Date","sort","a","b","generateTransitions","duration","axisSubX","subx","redraw","isHidden","c3","generate","c3LogScale","linearScale","logScale","PROJECTION","logspace","len","tmp","pow","scaleLog","nice","m","invert","powerOfTen","log","LN10","initParams","data_url","convertUrlToData","data_mimeType","data_headers","data_keys","initWithData","data_json","convertJsonToData","data_rows","convertRowsToData","data_columns","Error","convertColumnsToData","clipId","valueOf","clipIdForXAxis","clipIdForYAxis","clipIdForGrid","clipIdForSubchart","clipPath","getClipPath","clipPathForGrid","clipPathForSubchart","dragStart","dragging","flowing","cancelClick","mouseover","transiting","color","generateColor","levelColor","generateLevelColor","dataTimeParse","data_xLocaltime","timeParse","utcParse","data_xFormat","axis_x_localtime","timeFormat","utcFormat","getMilliseconds","getSeconds","getMinutes","getHours","getDay","getDate","getMonth","hiddenTargetIds","hiddenLegendIds","focusedTargetIds","defocusedTargetIds","subXOrient","isLegendRight","legend_position","isLegendInset","isLegendTop","legend_inset_anchor","isLegendLeft","legendStep","legendItemWidth","legendItemHeight","rotated_padding_left","rotated_padding_right","rotated_padding_top","withoutFadeIn","intervalForObserveInserted","initChartElements","initBar","initLine","initArc","initGauge","initText","defs","binding","bindto","selectChart","document","createElement","observeInserted","html","xs","convertDataToTargets","data_filter","filter","data_hide","addHiddenTargetIds","mapToIds","legend_hide","addHiddenLegendIds","isStanfordGraphType","initStanfordData","updateSizes","updateScales","extent","subX","subY","subY2","orgXDomain","on","onmouseover","onmouseout","svg_classname","clipChart","appendClip","clipXAxis","clipYAxis","clipGrid","clipSubchart","updateSvgSize","initPie","initDragZoom","subchart_show","initSubchart","initTooltip","initLegend","initTitle","initZoom","drawColorScale","initSubchartBrush","initRegion","initGrid","grid_lines_front","initGridLines","initStanfordElements","initEventRect","updateTargets","axis_x_selection","selectionAsValue","getDefaultSelection","updateDimension","oninit","withTransform","withUpdateXDomain","withUpdateOrgXDomain","withTransitionForAxis","bindResize","bindWindowFocus","smoothLines","el","type","x1","x2","y1","legendHeight","legend","getLegendHeight","legendWidth","getLegendWidth","legendHeightForBottom","hasArc","hasArcType","xAxisHeight","subchartXAxisHeight","subchartHeight","subchart_size_height","currentWidth","getCurrentWidth","currentHeight","getCurrentHeight","margin","getCurrentPaddingTop","getCurrentPaddingRight","getCurrentPaddingBottom","getCurrentPaddingLeft","margin2","NaN","margin3","updateSizeForLegend","width2","height2","arcWidth","arcHeight","hasType","gauge_fullCircle","getGaugeLabelHeight","updateRadius","radiusExpanded","updateTargetsForText","updateTargetsForBar","updateTargetsForLine","updateTargetsForArc","updateTargetsForSubchart","showTargets","isTargetToShow","transition_duration","transitions","withY","withSubchart","withTransitionForExit","withTrimXDomain","withLegend","withEventRect","withDimension","withUpdateXAxis","drawArea","drawBar","drawLine","xForText","yForText","durationForExit","durationForAxis","transitionsToWait","waitForDraw","flow","intervalForCulling","xDomainForZoom","cx","cy","areaIndices","getShapeIndices","isAreaType","barIndices","isBarType","lineIndices","isLineType","hideAxis","xv","legend_show","updateLegend","updateXDomain","zoom_rescale","orgDomain","axis_y_tick_count","axis_y2_tick_count","axis_x_tick_culling_max","e","generateDrawArea","generateDrawBar","generateDrawLine","generateXYForText","updateCircleY","circleY","circleX","updateXgridFocus","data_empty_label_text","redrawEventRect","updateGrid","updateStanfordElements","updateRegion","updateBar","updateLine","updateArea","updateCircle","hasDataLabel","updateText","redrawTitle","redrawArc","redrawSubchart","generateFlow","isTabVisible","redrawBar","redrawLine","redrawArea","redrawCircle","redrawText","redrawRegion","redrawGrid","generateWait","t","add","onrendered","updateAndRedraw","withTransitionForTransform","transformAll","redrawWithoutRescale","axis_x_type","isCustomX","data_x","data_xs","axis_y_type","initialOpacity","initialOpacityForCircle","opacityForCircle","opacity","point_show","isStanfordType","isScatterType","opacityForText","xx","xvCustom","xyValue","axis_x_categories","yvCustom","yScale","yv","subxx","transformMain","transformContext","transformLegend","getXAxisClipX","getXAxisClipY","getXAxisClipWidth","getXAxisClipHeight","getYAxisClipX","getYAxisClipY","getYAxisClipWidth","getYAxisClipHeight","withoutAxis","observer","MutationObserver","mutations","mutation","previousSibling","disconnect","setInterval","parentNode","clearInterval","update","observe","attributes","childList","characterData","console","error","resizeFunction","generateResize","onresize","resize_auto","resizeTimeout","clearTimeout","setTimeout","onresized","resizeIfElementDisplayed","offsetParent","addEventListener","_this","windowFocusHandler","unbindWindowFocus","removeEventListener","resizeFunctions","callResizeFunctions","f","splice","endall","callback","timer","done","parsedDate","isNaN","hidden","SVGPathSeg","typeAsLetter","owningPathSegList","pathSegType","pathSegTypeAsLetter","_owningPathSegList","classname","PATHSEG_UNKNOWN","PATHSEG_CLOSEPATH","PATHSEG_MOVETO_ABS","PATHSEG_MOVETO_REL","PATHSEG_LINETO_ABS","PATHSEG_LINETO_REL","PATHSEG_CURVETO_CUBIC_ABS","PATHSEG_CURVETO_CUBIC_REL","PATHSEG_CURVETO_QUADRATIC_ABS","PATHSEG_CURVETO_QUADRATIC_REL","PATHSEG_ARC_ABS","PATHSEG_ARC_REL","PATHSEG_LINETO_HORIZONTAL_ABS","PATHSEG_LINETO_HORIZONTAL_REL","PATHSEG_LINETO_VERTICAL_ABS","PATHSEG_LINETO_VERTICAL_REL","PATHSEG_CURVETO_CUBIC_SMOOTH_ABS","PATHSEG_CURVETO_CUBIC_SMOOTH_REL","PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS","PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL","_segmentChanged","segmentChanged","SVGPathSegClosePath","create","_asPathString","clone","SVGPathSegMovetoAbs","_x","_y","defineProperty","get","set","enumerable","SVGPathSegMovetoRel","SVGPathSegLinetoAbs","SVGPathSegLinetoRel","SVGPathSegCurvetoCubicAbs","_x1","_y1","_x2","_y2","SVGPathSegCurvetoCubicRel","SVGPathSegCurvetoQuadraticAbs","SVGPathSegCurvetoQuadraticRel","SVGPathSegArcAbs","r1","r2","angle","largeArcFlag","sweepFlag","_r1","_r2","_angle","_largeArcFlag","_sweepFlag","SVGPathSegArcRel","SVGPathSegLinetoHorizontalAbs","SVGPathSegLinetoHorizontalRel","SVGPathSegLinetoVerticalAbs","SVGPathSegLinetoVerticalRel","SVGPathSegCurvetoCubicSmoothAbs","SVGPathSegCurvetoCubicSmoothRel","SVGPathSegCurvetoQuadraticSmoothAbs","SVGPathSegCurvetoQuadraticSmoothRel","SVGPathElement","createSVGPathSegClosePath","createSVGPathSegMovetoAbs","createSVGPathSegMovetoRel","createSVGPathSegLinetoAbs","createSVGPathSegLinetoRel","createSVGPathSegCurvetoCubicAbs","createSVGPathSegCurvetoCubicRel","createSVGPathSegCurvetoQuadraticAbs","createSVGPathSegCurvetoQuadraticRel","createSVGPathSegArcAbs","createSVGPathSegArcRel","createSVGPathSegLinetoHorizontalAbs","createSVGPathSegLinetoHorizontalRel","createSVGPathSegLinetoVerticalAbs","createSVGPathSegLinetoVerticalRel","createSVGPathSegCurvetoCubicSmoothAbs","createSVGPathSegCurvetoCubicSmoothRel","createSVGPathSegCurvetoQuadraticSmoothAbs","createSVGPathSegCurvetoQuadraticSmoothRel","getPathSegAtLength","distance","isFinite","measurementElement","createElementNS","setAttribute","getAttribute","lastPathSegment","numberOfItems","removeItem","SVGPathSegList","pathElement","_pathElement","_list","_parsePath","_mutationObserverConfig","attributeFilter","_pathElementMutationObserver","_updateListFromPathMutations","_checkPathSynchronizedToList","_pathSegList","takeRecords","mutationRecords","hasPathMutations","record","attributeName","_writeListToPath","_pathSegArrayAsString","pathSeg","clear","initialize","newItem","_checkValidIndex","insertItemBefore","replaceItem","item","appendItem","pathSegArray","string","first","Builder","appendSegment","Source","_string","_currentIndex","_endIndex","_previousCommand","_skipOptionalSpaces","_isCurrentSpace","character","_skipOptionalSpacesOrDelimiter","hasMoreData","peekSegmentType","lookahead","_pathSegTypeFromChar","_nextCommandHelper","previousCommand","initialCommandIsMoveTo","command","_parseNumber","exponent","integer","frac","decimal","sign","expsign","startIndex","startIntPartIndex","scanIntPartIndex","multiplier","number","_parseArcFlag","flag","flagChar","parseSegment","points","arcAngle","arcLarge","arcSweep","builder","source","String","targetLength","padString","repeat","assign","varArgs","TypeError","to","nextSource","nextKey","hasOwnProperty","writable","configurable","labels","axis_x_max","axis_y_max","axis_y2_max","axis_x_min","axis_y_min","axis_y2_min","types","axis_y2_type","category","categories","resize","size_width","size_height","flush","destroy","targetIds","shown","targetId","flat","reduce","ret","dataValue","names","clearLegendItemTextBoxCache","updateDataAttributes","colors","stackNormalized","normalized","isStackNormalized","data_stack_normalize","donut","padAngle","donut_padAngle","args","baseTarget","baseValue","diff","notfoundIds","orgDataCount","getMaxDataCount","tail","json","rows","columns","j","getOtherTargetX","missing","translateX","transform","mainRegion","mainText","mainBar","mainLine","mainArea","mainCircle","flowIndex","flowLength","flowStart","getValueOnIndex","flowEnd","durationForFlow","wait","updateXGrid","hideXGridFocus","flowTransition","ease","easeLinear","isRegionOnX","xgridAttr","regionX","regionWidth","focus","candidates","mapToTargetIds","selectorTargets","revert","defocus","expandArc","toggleFocusLegend","unexpandArc","showLegend","isLegendToShow","selectorLegends","grids","grid_x_lines","removeGridLines","grid_y_lines","groups","data_groups","show","hide","hideLegend","load","addXs","classes","data_classes","data_colors","hasCaches","cacheIds","getCaches","unload","loadFromArgs","ids","pie","pie_padAngle","c","selected","getTargetSelectorSuffix","nodes","__data__","indices","resetOther","data_selection_enabled","toggle","getToggle","isTargetId","data_selection_grouped","isTargetIndex","isSelected","data_selection_isselectable","unselect","removeHiddenTargetIds","that","subchart","isShown","getTargets","removeSubchart","mouse","filterByX","getMousePosition","dispatchEvent","tooltip_onshow","tooltip_onhide","transformTo","optionsForRedraw","setTargetType","updateTargetX","updateTargetXs","zoom","zoom_onzoom","enable","enabled","zoom_enabled","unzoom","zoom_x_max","zoom_x_min","getPadAngle","orderFct","getOrderFunction","isOrderAsc","isOrderDesc","defaultSort_1","t1","t2","gauge_width","donut_width","gaugeArcWidth","gauge_arcs_minWidth","radius","innerRadiusRatio","innerRadius","updateArc","svgArc","getSvgArc","svgArcExpanded","getSvgArcExpanded","svgArcExpandedSub","updateAngle","gMin","gMax","gTic","gValue","startAngle","endAngle","isGaugeType","gauge_min","gauge_max","gauge_startingAngle","hasGaugeType","singleArcWidth","outerRadius","newArc","withoutUpdate","updated","centroid","rate","expandWidth","getArc","force","isArcType","transformForArcLabel","ratio","translate","hasGauge","sqrt","donut_label_ratio","pie_label_ratio","cos","abs","getArcRatio","getRatio","convertToArcData","addName","textForArcLabel","shouldShowArcLabel","meetsArcLabelThreshold","getArcLabelFormat","defaultArcValueFormat","textForGaugeMinMax","isMax","getGaugeLabelExtents","shouldExpand","expandDuration","isDonutType","donut_expand_duration","gauge_expand_duration","isPieType","pie_expand_duration","donut_expand","gauge_expand","pie_expand","shouldShow","donut_label_show","pie_label_show","donut_label_threshold","pie_label_threshold","pie_label_format","gauge_label_format","donut_label_format","gauge_label_extents","getArcTitle","donut_title","mainPieEnter","classChartArc","classArcs","classFocus","mainArc","arcLabelLines","mainArcLabelLine","arcData","classArc","interaction_enabled","_current","total","gauge_labelLine_show","lineLength","lineThickness","innerLineLength","lineAngle","arcInnerRadius","linePositioningAngle","data_onmouseover","selectedData","showTooltip","revertLegend","hideTooltip","data_onmouseout","toggleShape","data_onclick","attrTween","interpolate","interpolated","round","index_1","backgroundArc","d1","gauge_label_show","gauge_units","addToCache","getFromCache","resetCache","test","addCache","cloneTarget","generateTargetClass","generateClass","prefix","classText","classTexts","classShape","classShapes","classLine","classLines","classCircle","classCircles","classBar","classBars","classArea","classAreas","classRegion","classEvent","classTarget","additionalClassSuffix","additionalClass","classFocused","classDefocused","classChartText","classChartLine","classChartBar","targetClass","CSS","escape","selectorTarget","selectorLegend","URL","parent","getAxisClipX","getAxisClipY","getAxisClipWidth","getAxisClipHeight","pattern","color_pattern","schemeCategory10","data_color","Function","threshold","color_threshold","asValue","padding_left","padding_right","padding_top","padding_bottom","zoom_initialRange","zoom_type","zoom_disableDefaultBehavior","zoom_privileged","zoom_onzoomstart","zoom_onzoomend","interaction_brighten","data_epochs","data_xSort","data_idConverter","data_names","data_type","data_types","data_labels","data_order","data_regions","data_selection_multiple","data_selection_draggable","data_onselected","data_onunselected","subchart_axis_x_show","subchart_onbrush","legend_inset_x","legend_inset_y","legend_inset_step","legend_item_onclick","legend_item_onmouseover","legend_item_onmouseout","legend_equally","legend_padding","legend_item_tile_width","legend_item_tile_height","axis_x_tick_outer","axis_x_padding","axis_x_height","axis_y_inverted","axis_y_center","axis_y_tick_format","axis_y_tick_outer","axis_y_padding","axis_y_default","axis_y2_inverted","axis_y2_center","axis_y2_tick_format","axis_y2_tick_outer","axis_y2_padding","axis_y2_default","grid_x_show","grid_x_type","grid_y_show","grid_y_ticks","grid_focus_show","point_r","point_sensitivity","point_focus_expand_enabled","point_focus_expand_r","point_select_r","line_connectNull","line_step_type","bar_width","bar_width_ratio","bar_width_max","bar_zerobased","bar_space","area_zerobased","area_above","spline_interpolation_type","stanford_lines","stanford_regions","stanford_texts","stanford_scaleMin","stanford_scaleMax","stanford_scaleWidth","stanford_scaleFormat","stanford_scaleValues","stanford_colors","stanford_padding","tooltip_show","tooltip_grouped","tooltip_order","tooltip_format_title","tooltip_format_name","tooltip_format_value","tooltip_horizontal","tooltip_position","tooltip_contents","defaultTitleFormat","defaultValueFormat","getTooltipContent","tooltip_init_show","tooltip_init_x","tooltip_init_position","title_text","title_padding","title_position","additionalConfig","read","this_config","find","shift","url","mimeType","headers","converter","tsv","convertXsvToData","csv","then","catch","xsv","row","_a","targetKeys","new_rows","new_row","findValueInJson","object","pathArray","k","newRows","newRow","appendXs","epochs","isX","isEpochs","isNotXAndNotEpochs","isNotX","xKey","getXKey","rawX","generateTargetX","getOtherTargetXs","getXValuesOfXKey","convertedId","id_org","returnData","v1","v2","hasNegativeValue","hasNegativeValueInTargets","hasPositiveValue","hasPositiveValueInTargets","some","isTargetNormalized","group","includes","getTotalPerIndex","cached","sum","sumByAxis","getTotalDataSum","totalDataSum","xValues","getXValue","idsForX","name","valueOnIndex","hasTarget","getTargetsToShow","removeHiddenLegendIds","getValuesAsIdKeyed","ys","checkValueInTargets","checker","toLowerCase","orderAsc","orderDesc","reducer","t1Sum","t2Sum","order","orderTargets","fct","filterByIndex","filterRemoveNull","filterByXDomain","xDomain","getDataLabelLength","lengths","paddingCoef","dataLabelFormat","isNoneArc","isArc","findClosestFromTargets","findClosest","horizontalDistance","dist","findClosestFromTargetsByX","closest","newDiff","dataPoints","computeDist","minDist","isWithinBar","xIndex","yIndex","convertValuesToStep","converted","asPercent","attrs","current","getYDomainMin","baseId","idsInGroup","getYDomainMax","yDomainAbs","isAllPositive","isAllNegative","targetsByAxisId","yTargets","yMin","yMax","yDomainMin","yDomainMax","center","isZeroBased","isInverted","showHorizontalDataLabel","showVerticalDataLabel","pixelsToAxisPadding","getY","reverse","getXDomainMin","getXDomainMax","getXDomainPadding","maxDataCount","paddingLeft","paddingRight","firstX","lastX","getTime","withTrim","updateScale","trimXDomain","zoomDomain","getZoomDomain","drag","sx","sy","mx","my","minX","maxX","minY","maxY","_w","_h","isIncluded","isWithin","togglePoint","togglePath","dragstart","dragend","getYFormat","forArc","formatForY","yFormat","formatForY2","y2Format","toFixed","defaultFormat","xgridData","generateGridData","xgridEnter","updateYGrid","gridValues","ygridEnter","gridTextAnchor","gridTextDx","xGridTextX","yGridTextX","xgridLineEnter","ygridLineEnter","showXGridFocus","dataToShow","focusEl","firstYear","lastYear","gridData","tickNum","getFullYear","getGridFilterToRemove","param","forX","toRemove","toShow","zoomTransform","mouseout","unexpandCircles","unexpandBars","isHoveringDataPoint","withName","isMouseCloseToDataPoint","closestByX","mouseX","expandCircles","expandBars","isWithinShape","getYScale","selector","getBoundingClientRect","event","createEvent","initMouseEvent","legendItemTextBox","legendHasRendered","updateLegendWithDefaults","insetLegendPosition","updateLegendStep","step","updateLegendItemWidth","updateLegendItemHeight","opacityForLegend","opacityForUnfocusedLegend","xForLegend","xForLegendText","xForLegendRect","yForLegend","yForLegendText","yForLegendRect","x1ForLegendTile","x2ForLegendTile","yForLegendTile","l","rects","tiles","background","paddingTop","maxHeight","posMin","tileWidth","totalLength","offsets","widths","heights","margins","steps","getTextBox","textElement","getTextRect","textContent","updatePositions","maxLength","reset","isLast","itemWidth","itemHeight","itemLength","areaLength","updateValues","withoutStep","altKey","regionY","regionHeight","labelRegion","regionLabels","labelOffsetX","labelOffsetY","labelTransform","label","vertical","paddingX","paddingY","getScale","forTimeseries","scaleTime","getX","offset","_scale","raw","getSubYScale","forInit","xMin","xMax","subXMin","subXMax","subYMin","subYMax","selectPoint","r","pointSelectR","unselectPoint","selectPath","rgb","brighter","unselectPath","nodeName","isStepType","barData","mainBarEnter","getBarW","barTargetsNum","getBars","isSub","getPoints","generateGetBarPoints","indexX","indexY","__max__","barW","barX","getShapeX","barY","getShapeY","barOffset","getShapeOffset","barSpaceOffset","y0","posX","posY","barShape","typeFilter","targetsNum","rowValues","constructor","isWithinStep","isWithinCircle","getInterpolate","linear","curveLinear","curveLinearClosed","basis","curveBasis","curveBasisOpen","curveBasisClosed","bundle","curveBundle","cardinal","curveCardinal","curveCardinalOpen","curveCardinalClosed","monotone","curveMonotoneX","curveStep","curveStepBefore","curveStepAfter","isSplineType","mainLineEnter","lineData","generateGetLinePoints","yScaleGetter","xValue","yValue","defined","x0","lineWithRegions","curve","lineTargetsNum","lineOffset","_regions","sWithRegion","xp","yp","diffx2","xOffset","isWithinRegions","generateM","d0","x_diff","xv0","xv1","mainAreaEnter","orgAreaOpacity","generateGetAreaPoints","value0","getAreaBaseValue","value1","areaTargetsNum","areaOffset","lineOrScatterOrStanfordData","mainCircleEnter","pointR","getStanfordPointColor","getCircles","pointExpandedR","d3_this","getParentWidth","getParentHeight","getTitlePadding","getAxisWidthByAxisId","defaultPadding","legendWidthOnRight","getColorScalePadding","getParentRectValue","tagName","offsetWidth","getSvgLeft","hasLeftAxisRect","leftAxisClass","leftAxis","svgRect","chartRect","svgLeft","isSubchart","initBrush","brushY","brushX","sourceEvent","redrawForBrush","updateExtent","context","move","brushSelection","contextLineEnter","contextLine","contextBarEnter","contextBar","updateBarForSubchart","redrawBarForSubchart","drawBarOnSub","random","updateLineForSubchart","redrawLineForSubchart","drawLineOnSub","updateAreaForSubchart","contextArea","contextAreaEnter","redrawAreaForSubchart","drawAreaOnSub","zoomIdentity","mainTextEnter","barOrLineData","forFlow","cls","rect","font","getAreaPoints","getBarPoints","getLinePoints","getter","getXForText","getYForText","xPos","yPos","isSafari","isChrome","xForTitle","yForTitle","barWidth","barHeight","legendAxis","axisScale","inverseScale","scaleSequential","minEpochs","maxEpochs","axisRight","xForColorScale","compareEpochs","interpolateHslLong","hsl","colorscale","scaleSequentialLog","getCentroid","point1","point2","getRegionArea","getStanfordTooltipTitle","labelX","labelY","countEpochsInRegion","accumulator","currentValue","pointInRegion","percentage","xi","yi","yj","xj","inside","stanfordLineEnter","stanfordRegionEnter","stanfordTextEnter","countPointsInRegion","content","join","temp","getTooltipSortFunction","obj","sortFunction","bgcolor","titleFormat","nameFormat","valueFormat","tooltipSortFunction","tooltipPosition","tWidth","tHeight","tooltipLeft","tooltipRight","tooltipTop","chartRight","positionFunction","property","has","ua","startEvent","redrawForZoom","clientX","clientY","updateDomain","rescaleY","rescaleX","translateExtent","brushXPos","brushYPos","getZoomedDomain","dragZoomBrush","zoomedDomain","factory"],"mappings":"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","file":"99fada0.js","sourcesContent":["/* @license C3.js v0.7.20 | (c) C3 Team and other contributors | http://c3js.org/ */\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = global || self, global.c3 = factory());\n}(this, (function () { 'use strict';\n\n  function ChartInternal(api) {\r\n      var $$ = this;\r\n      // Note: This part will be replaced by rollup-plugin-modify\r\n      // When bundling esm output. Beware of changing this line.\r\n      // TODO: Maybe we should check that the modification by rollup-plugin-modify\r\n      // is valid during unit tests.\r\n      $$.d3 = window.d3\r\n          ? window.d3\r\n          : typeof require !== 'undefined'\r\n              ? require('d3')\r\n              : undefined;\r\n      $$.api = api;\r\n      $$.config = $$.getDefaultConfig();\r\n      $$.data = {};\r\n      $$.cache = {};\r\n      $$.axes = {};\r\n  }\n\n  /**\r\n   * The Chart class\r\n   *\r\n   * The methods of this class is the public APIs of the chart object.\r\n   */\r\n  function Chart(config) {\r\n      this.internal = new ChartInternal(this);\r\n      this.internal.loadConfig(config);\r\n      this.internal.beforeInit(config);\r\n      this.internal.init();\r\n      this.internal.afterInit(config);\r\n      (function bindThis(fn, target, argThis) {\r\n          Object.keys(fn).forEach(function (key) {\r\n              target[key] = fn[key].bind(argThis);\r\n              if (Object.keys(fn[key]).length > 0) {\r\n                  bindThis(fn[key], target[key], argThis);\r\n              }\r\n          });\r\n      })(Chart.prototype, this, this);\r\n  }\n\n  var asHalfPixel = function (n) {\r\n      return Math.ceil(n) + 0.5;\r\n  };\r\n  var ceil10 = function (v) {\r\n      return Math.ceil(v / 10) * 10;\r\n  };\r\n  var diffDomain = function (d) {\r\n      return d[1] - d[0];\r\n  };\r\n  var getOption = function (options, key, defaultValue) {\r\n      return isDefined(options[key]) ? options[key] : defaultValue;\r\n  };\r\n  var getPathBox = function (path) {\r\n      var box = getBBox(path), items = [path.pathSegList.getItem(0), path.pathSegList.getItem(1)], minX = items[0].x, minY = Math.min(items[0].y, items[1].y);\r\n      return { x: minX, y: minY, width: box.width, height: box.height };\r\n  };\r\n  var getBBox = function (element) {\r\n      try {\r\n          return element.getBBox();\r\n      }\r\n      catch (ignore) {\r\n          // Firefox will throw an exception if getBBox() is called whereas the\r\n          // element is rendered with display:none\r\n          // See https://github.com/c3js/c3/issues/2692\r\n          // The previous code was using `getBoundingClientRect` which was returning\r\n          // everything at 0 in this case so let's reproduce this behavior here.\r\n          return { x: 0, y: 0, width: 0, height: 0 };\r\n      }\r\n  };\r\n  var hasValue = function (dict, value) {\r\n      var found = false;\r\n      Object.keys(dict).forEach(function (key) {\r\n          if (dict[key] === value) {\r\n              found = true;\r\n          }\r\n      });\r\n      return found;\r\n  };\r\n  var isArray = function (o) {\r\n      return Array.isArray(o);\r\n  };\r\n  var isDefined = function (v) {\r\n      return typeof v !== 'undefined';\r\n  };\r\n  var isEmpty = function (o) {\r\n      return (typeof o === 'undefined' ||\r\n          o === null ||\r\n          (isString(o) && o.length === 0) ||\r\n          (typeof o === 'object' && Object.keys(o).length === 0));\r\n  };\r\n  var isFunction = function (o) {\r\n      return typeof o === 'function';\r\n  };\r\n  var isNumber = function (o) {\r\n      return typeof o === 'number';\r\n  };\r\n  var isString = function (o) {\r\n      return typeof o === 'string';\r\n  };\r\n  var isUndefined = function (v) {\r\n      return typeof v === 'undefined';\r\n  };\r\n  var isValue = function (v) {\r\n      return v || v === 0;\r\n  };\r\n  var notEmpty = function (o) {\r\n      return !isEmpty(o);\r\n  };\r\n  var sanitise = function (str) {\r\n      return typeof str === 'string'\r\n          ? str.replace(/</g, '&lt;').replace(/>/g, '&gt;')\r\n          : str;\r\n  };\r\n  var flattenArray = function (arr) {\r\n      return Array.isArray(arr) ? [].concat.apply([], arr) : [];\r\n  };\r\n  /**\r\n   * Returns whether the point is within the given box.\r\n   *\r\n   * @param {Array} point An [x,y] coordinate\r\n   * @param {Object} box An object with {x, y, width, height} keys\r\n   * @param {Number} sensitivity An offset to ease check on very small boxes\r\n   */\r\n  var isWithinBox = function (point, box, sensitivity) {\r\n      if (sensitivity === void 0) { sensitivity = 0; }\r\n      var xStart = box.x - sensitivity;\r\n      var xEnd = box.x + box.width + sensitivity;\r\n      var yStart = box.y + box.height + sensitivity;\r\n      var yEnd = box.y - sensitivity;\r\n      return (xStart < point[0] && point[0] < xEnd && yEnd < point[1] && point[1] < yStart);\r\n  };\r\n  /**\r\n   * Returns Internet Explorer version number (or false if no Internet Explorer used).\r\n   *\r\n   * @param string agent Optional parameter to specify user agent\r\n   */\r\n  var getIEVersion = function (agent) {\r\n      // https://stackoverflow.com/questions/19999388/check-if-user-is-using-ie\r\n      if (typeof agent === 'undefined') {\r\n          agent = window.navigator.userAgent;\r\n      }\r\n      var pos = agent.indexOf('MSIE '); // up to IE10\r\n      if (pos > 0) {\r\n          return parseInt(agent.substring(pos + 5, agent.indexOf('.', pos)), 10);\r\n      }\r\n      pos = agent.indexOf('Trident/'); // IE11\r\n      if (pos > 0) {\r\n          pos = agent.indexOf('rv:');\r\n          return parseInt(agent.substring(pos + 3, agent.indexOf('.', pos)), 10);\r\n      }\r\n      return false;\r\n  };\r\n  /**\r\n   * Returns whether the used browser is Internet Explorer.\r\n   *\r\n   * @param version Optional parameter to specify IE version\r\n   */\r\n  var isIE = function (version) {\r\n      var ver = getIEVersion();\r\n      if (typeof version === 'undefined') {\r\n          return !!ver;\r\n      }\r\n      return version === ver;\r\n  };\n\n  function AxisInternal(component, params) {\r\n      var internal = this;\r\n      internal.component = component;\r\n      internal.params = params || {};\r\n      internal.d3 = component.d3;\r\n      internal.scale = internal.d3.scaleLinear();\r\n      internal.range;\r\n      internal.orient = 'bottom';\r\n      internal.innerTickSize = 6;\r\n      internal.outerTickSize = this.params.withOuterTick ? 6 : 0;\r\n      internal.tickPadding = 3;\r\n      internal.tickValues = null;\r\n      internal.tickFormat;\r\n      internal.tickArguments;\r\n      internal.tickOffset = 0;\r\n      internal.tickCulling = true;\r\n      internal.tickCentered;\r\n      internal.tickTextCharSize;\r\n      internal.tickTextRotate = internal.params.tickTextRotate;\r\n      internal.tickLength;\r\n      internal.axis = internal.generateAxis();\r\n  }\r\n  AxisInternal.prototype.axisX = function (selection, x, tickOffset) {\r\n      selection.attr('transform', function (d) {\r\n          return 'translate(' + Math.ceil(x(d) + tickOffset) + ', 0)';\r\n      });\r\n  };\r\n  AxisInternal.prototype.axisY = function (selection, y) {\r\n      selection.attr('transform', function (d) {\r\n          return 'translate(0,' + Math.ceil(y(d)) + ')';\r\n      });\r\n  };\r\n  AxisInternal.prototype.scaleExtent = function (domain) {\r\n      var start = domain[0], stop = domain[domain.length - 1];\r\n      return start < stop ? [start, stop] : [stop, start];\r\n  };\r\n  AxisInternal.prototype.generateTicks = function (scale) {\r\n      var internal = this;\r\n      var i, domain, ticks = [];\r\n      if (scale.ticks) {\r\n          return scale.ticks.apply(scale, internal.tickArguments);\r\n      }\r\n      domain = scale.domain();\r\n      for (i = Math.ceil(domain[0]); i < domain[1]; i++) {\r\n          ticks.push(i);\r\n      }\r\n      if (ticks.length > 0 && ticks[0] > 0) {\r\n          ticks.unshift(ticks[0] - (ticks[1] - ticks[0]));\r\n      }\r\n      return ticks;\r\n  };\r\n  AxisInternal.prototype.copyScale = function () {\r\n      var internal = this;\r\n      var newScale = internal.scale.copy(), domain;\r\n      if (internal.params.isCategory) {\r\n          domain = internal.scale.domain();\r\n          newScale.domain([domain[0], domain[1] - 1]);\r\n      }\r\n      return newScale;\r\n  };\r\n  AxisInternal.prototype.textFormatted = function (v) {\r\n      var internal = this, formatted = internal.tickFormat ? internal.tickFormat(v) : v;\r\n      return typeof formatted !== 'undefined' ? formatted : '';\r\n  };\r\n  AxisInternal.prototype.updateRange = function () {\r\n      var internal = this;\r\n      internal.range = internal.scale.rangeExtent\r\n          ? internal.scale.rangeExtent()\r\n          : internal.scaleExtent(internal.scale.range());\r\n      return internal.range;\r\n  };\r\n  AxisInternal.prototype.updateTickTextCharSize = function (tick) {\r\n      var internal = this;\r\n      if (internal.tickTextCharSize) {\r\n          return internal.tickTextCharSize;\r\n      }\r\n      var size = {\r\n          h: 11.5,\r\n          w: 5.5\r\n      };\r\n      tick\r\n          .select('text')\r\n          .text(function (d) {\r\n          return internal.textFormatted(d);\r\n      })\r\n          .each(function (d) {\r\n          var box = getBBox(this), text = internal.textFormatted(d), h = box.height, w = text ? box.width / text.length : undefined;\r\n          if (h && w) {\r\n              size.h = h;\r\n              size.w = w;\r\n          }\r\n      })\r\n          .text('');\r\n      internal.tickTextCharSize = size;\r\n      return size;\r\n  };\r\n  AxisInternal.prototype.isVertical = function () {\r\n      return this.orient === 'left' || this.orient === 'right';\r\n  };\r\n  AxisInternal.prototype.tspanData = function (d, i, scale) {\r\n      var internal = this;\r\n      var splitted = internal.params.tickMultiline\r\n          ? internal.splitTickText(d, scale)\r\n          : [].concat(internal.textFormatted(d));\r\n      if (internal.params.tickMultiline && internal.params.tickMultilineMax > 0) {\r\n          splitted = internal.ellipsify(splitted, internal.params.tickMultilineMax);\r\n      }\r\n      return splitted.map(function (s) {\r\n          return { index: i, splitted: s, length: splitted.length };\r\n      });\r\n  };\r\n  AxisInternal.prototype.splitTickText = function (d, scale) {\r\n      var internal = this, tickText = internal.textFormatted(d), maxWidth = internal.params.tickWidth, subtext, spaceIndex, textWidth, splitted = [];\r\n      if (Object.prototype.toString.call(tickText) === '[object Array]') {\r\n          return tickText;\r\n      }\r\n      if (!maxWidth || maxWidth <= 0) {\r\n          maxWidth = internal.isVertical()\r\n              ? 95\r\n              : internal.params.isCategory\r\n                  ? Math.ceil(scale(1) - scale(0)) - 12\r\n                  : 110;\r\n      }\r\n      function split(splitted, text) {\r\n          spaceIndex = undefined;\r\n          for (var i = 1; i < text.length; i++) {\r\n              if (text.charAt(i) === ' ') {\r\n                  spaceIndex = i;\r\n              }\r\n              subtext = text.substr(0, i + 1);\r\n              textWidth = internal.tickTextCharSize.w * subtext.length;\r\n              // if text width gets over tick width, split by space index or crrent index\r\n              if (maxWidth < textWidth) {\r\n                  return split(splitted.concat(text.substr(0, spaceIndex ? spaceIndex : i)), text.slice(spaceIndex ? spaceIndex + 1 : i));\r\n              }\r\n          }\r\n          return splitted.concat(text);\r\n      }\r\n      return split(splitted, tickText + '');\r\n  };\r\n  AxisInternal.prototype.ellipsify = function (splitted, max) {\r\n      if (splitted.length <= max) {\r\n          return splitted;\r\n      }\r\n      var ellipsified = splitted.slice(0, max);\r\n      var remaining = 3;\r\n      for (var i = max - 1; i >= 0; i--) {\r\n          var available = ellipsified[i].length;\r\n          ellipsified[i] = ellipsified[i]\r\n              .substr(0, available - remaining)\r\n              .padEnd(available, '.');\r\n          remaining -= available;\r\n          if (remaining <= 0) {\r\n              break;\r\n          }\r\n      }\r\n      return ellipsified;\r\n  };\r\n  AxisInternal.prototype.updateTickLength = function () {\r\n      var internal = this;\r\n      internal.tickLength =\r\n          Math.max(internal.innerTickSize, 0) + internal.tickPadding;\r\n  };\r\n  AxisInternal.prototype.lineY2 = function (d) {\r\n      var internal = this, tickPosition = internal.scale(d) + (internal.tickCentered ? 0 : internal.tickOffset);\r\n      return internal.range[0] < tickPosition && tickPosition < internal.range[1]\r\n          ? internal.innerTickSize\r\n          : 0;\r\n  };\r\n  AxisInternal.prototype.textY = function () {\r\n      var internal = this, rotate = internal.tickTextRotate;\r\n      return rotate\r\n          ? 11.5 - 2.5 * (rotate / 15) * (rotate > 0 ? 1 : -1)\r\n          : internal.tickLength;\r\n  };\r\n  AxisInternal.prototype.textTransform = function () {\r\n      var internal = this, rotate = internal.tickTextRotate;\r\n      return rotate ? 'rotate(' + rotate + ')' : '';\r\n  };\r\n  AxisInternal.prototype.textTextAnchor = function () {\r\n      var internal = this, rotate = internal.tickTextRotate;\r\n      return rotate ? (rotate > 0 ? 'start' : 'end') : 'middle';\r\n  };\r\n  AxisInternal.prototype.tspanDx = function () {\r\n      var internal = this, rotate = internal.tickTextRotate;\r\n      return rotate ? 8 * Math.sin(Math.PI * (rotate / 180)) : 0;\r\n  };\r\n  AxisInternal.prototype.tspanDy = function (d, i) {\r\n      var internal = this, dy = internal.tickTextCharSize.h;\r\n      if (i === 0) {\r\n          if (internal.isVertical()) {\r\n              dy = -((d.length - 1) * (internal.tickTextCharSize.h / 2) - 3);\r\n          }\r\n          else {\r\n              dy = '.71em';\r\n          }\r\n      }\r\n      return dy;\r\n  };\r\n  AxisInternal.prototype.generateAxis = function () {\r\n      var internal = this, d3 = internal.d3, params = internal.params;\r\n      function axis(g, transition) {\r\n          var self;\r\n          g.each(function () {\r\n              var g = (axis.g = d3.select(this));\r\n              var scale0 = this.__chart__ || internal.scale, scale1 = (this.__chart__ = internal.copyScale());\r\n              var ticksValues = internal.tickValues\r\n                  ? internal.tickValues\r\n                  : internal.generateTicks(scale1), ticks = g.selectAll('.tick').data(ticksValues, scale1), tickEnter = ticks\r\n                  .enter()\r\n                  .insert('g', '.domain')\r\n                  .attr('class', 'tick')\r\n                  .style('opacity', 1e-6), \r\n              // MEMO: No exit transition. The reason is this transition affects max tick width calculation because old tick will be included in the ticks.\r\n              tickExit = ticks.exit().remove(), tickUpdate = ticks.merge(tickEnter), tickTransform, tickX, tickY;\r\n              if (params.isCategory) {\r\n                  internal.tickOffset = Math.ceil((scale1(1) - scale1(0)) / 2);\r\n                  tickX = internal.tickCentered ? 0 : internal.tickOffset;\r\n                  tickY = internal.tickCentered ? internal.tickOffset : 0;\r\n              }\r\n              else {\r\n                  internal.tickOffset = tickX = 0;\r\n              }\r\n              internal.updateRange();\r\n              internal.updateTickLength();\r\n              internal.updateTickTextCharSize(g.select('.tick'));\r\n              var lineUpdate = tickUpdate\r\n                  .select('line')\r\n                  .merge(tickEnter.append('line')), textUpdate = tickUpdate.select('text').merge(tickEnter.append('text'));\r\n              var tspans = tickUpdate\r\n                  .selectAll('text')\r\n                  .selectAll('tspan')\r\n                  .data(function (d, i) {\r\n                  return internal.tspanData(d, i, scale1);\r\n              }), tspanEnter = tspans.enter().append('tspan'), tspanUpdate = tspanEnter.merge(tspans).text(function (d) {\r\n                  return d.splitted;\r\n              });\r\n              tspans.exit().remove();\r\n              var path = g.selectAll('.domain').data([0]), pathUpdate = path\r\n                  .enter()\r\n                  .append('path')\r\n                  .merge(path)\r\n                  .attr('class', 'domain');\r\n              // TODO: each attr should be one function and change its behavior by internal.orient, probably\r\n              switch (internal.orient) {\r\n                  case 'bottom': {\r\n                      tickTransform = internal.axisX;\r\n                      lineUpdate\r\n                          .attr('x1', tickX)\r\n                          .attr('x2', tickX)\r\n                          .attr('y2', function (d, i) {\r\n                          return internal.lineY2(d, i);\r\n                      });\r\n                      textUpdate\r\n                          .attr('x', 0)\r\n                          .attr('y', function (d, i) {\r\n                          return internal.textY(d, i);\r\n                      })\r\n                          .attr('transform', function (d, i) {\r\n                          return internal.textTransform(d, i);\r\n                      })\r\n                          .style('text-anchor', function (d, i) {\r\n                          return internal.textTextAnchor(d, i);\r\n                      });\r\n                      tspanUpdate\r\n                          .attr('x', 0)\r\n                          .attr('dy', function (d, i) {\r\n                          return internal.tspanDy(d, i);\r\n                      })\r\n                          .attr('dx', function (d, i) {\r\n                          return internal.tspanDx(d, i);\r\n                      });\r\n                      pathUpdate.attr('d', 'M' +\r\n                          internal.range[0] +\r\n                          ',' +\r\n                          internal.outerTickSize +\r\n                          'V0H' +\r\n                          internal.range[1] +\r\n                          'V' +\r\n                          internal.outerTickSize);\r\n                      break;\r\n                  }\r\n                  case 'top': {\r\n                      // TODO: rotated tick text\r\n                      tickTransform = internal.axisX;\r\n                      lineUpdate\r\n                          .attr('x1', tickX)\r\n                          .attr('x2', tickX)\r\n                          .attr('y2', function (d, i) {\r\n                          return -1 * internal.lineY2(d, i);\r\n                      });\r\n                      textUpdate\r\n                          .attr('x', 0)\r\n                          .attr('y', function (d, i) {\r\n                          return (-1 * internal.textY(d, i) -\r\n                              (params.isCategory ? 2 : internal.tickLength - 2));\r\n                      })\r\n                          .attr('transform', function (d, i) {\r\n                          return internal.textTransform(d, i);\r\n                      })\r\n                          .style('text-anchor', function (d, i) {\r\n                          return internal.textTextAnchor(d, i);\r\n                      });\r\n                      tspanUpdate\r\n                          .attr('x', 0)\r\n                          .attr('dy', function (d, i) {\r\n                          return internal.tspanDy(d, i);\r\n                      })\r\n                          .attr('dx', function (d, i) {\r\n                          return internal.tspanDx(d, i);\r\n                      });\r\n                      pathUpdate.attr('d', 'M' +\r\n                          internal.range[0] +\r\n                          ',' +\r\n                          -internal.outerTickSize +\r\n                          'V0H' +\r\n                          internal.range[1] +\r\n                          'V' +\r\n                          -internal.outerTickSize);\r\n                      break;\r\n                  }\r\n                  case 'left': {\r\n                      tickTransform = internal.axisY;\r\n                      lineUpdate\r\n                          .attr('x2', -internal.innerTickSize)\r\n                          .attr('y1', tickY)\r\n                          .attr('y2', tickY);\r\n                      textUpdate\r\n                          .attr('x', -internal.tickLength)\r\n                          .attr('y', internal.tickOffset)\r\n                          .style('text-anchor', 'end');\r\n                      tspanUpdate\r\n                          .attr('x', -internal.tickLength)\r\n                          .attr('dy', function (d, i) {\r\n                          return internal.tspanDy(d, i);\r\n                      });\r\n                      pathUpdate.attr('d', 'M' +\r\n                          -internal.outerTickSize +\r\n                          ',' +\r\n                          internal.range[0] +\r\n                          'H0V' +\r\n                          internal.range[1] +\r\n                          'H' +\r\n                          -internal.outerTickSize);\r\n                      break;\r\n                  }\r\n                  case 'right': {\r\n                      tickTransform = internal.axisY;\r\n                      lineUpdate\r\n                          .attr('x2', internal.innerTickSize)\r\n                          .attr('y1', tickY)\r\n                          .attr('y2', tickY);\r\n                      textUpdate\r\n                          .attr('x', internal.tickLength)\r\n                          .attr('y', internal.tickOffset)\r\n                          .style('text-anchor', 'start');\r\n                      tspanUpdate.attr('x', internal.tickLength).attr('dy', function (d, i) {\r\n                          return internal.tspanDy(d, i);\r\n                      });\r\n                      pathUpdate.attr('d', 'M' +\r\n                          internal.outerTickSize +\r\n                          ',' +\r\n                          internal.range[0] +\r\n                          'H0V' +\r\n                          internal.range[1] +\r\n                          'H' +\r\n                          internal.outerTickSize);\r\n                      break;\r\n                  }\r\n              }\r\n              if (scale1.rangeBand) {\r\n                  var x = scale1, dx = x.rangeBand() / 2;\r\n                  scale0 = scale1 = function (d) {\r\n                      return x(d) + dx;\r\n                  };\r\n              }\r\n              else if (scale0.rangeBand) {\r\n                  scale0 = scale1;\r\n              }\r\n              else {\r\n                  tickExit.call(tickTransform, scale1, internal.tickOffset);\r\n              }\r\n              tickEnter.call(tickTransform, scale0, internal.tickOffset);\r\n              self = (transition ? tickUpdate.transition(transition) : tickUpdate)\r\n                  .style('opacity', 1)\r\n                  .call(tickTransform, scale1, internal.tickOffset);\r\n          });\r\n          return self;\r\n      }\r\n      axis.scale = function (x) {\r\n          if (!arguments.length) {\r\n              return internal.scale;\r\n          }\r\n          internal.scale = x;\r\n          return axis;\r\n      };\r\n      axis.orient = function (x) {\r\n          if (!arguments.length) {\r\n              return internal.orient;\r\n          }\r\n          internal.orient =\r\n              x in { top: 1, right: 1, bottom: 1, left: 1 } ? x + '' : 'bottom';\r\n          return axis;\r\n      };\r\n      axis.tickFormat = function (format) {\r\n          if (!arguments.length) {\r\n              return internal.tickFormat;\r\n          }\r\n          internal.tickFormat = format;\r\n          return axis;\r\n      };\r\n      axis.tickCentered = function (isCentered) {\r\n          if (!arguments.length) {\r\n              return internal.tickCentered;\r\n          }\r\n          internal.tickCentered = isCentered;\r\n          return axis;\r\n      };\r\n      axis.tickOffset = function () {\r\n          return internal.tickOffset;\r\n      };\r\n      axis.tickInterval = function () {\r\n          var interval, length;\r\n          if (params.isCategory) {\r\n              interval = internal.tickOffset * 2;\r\n          }\r\n          else {\r\n              length =\r\n                  axis.g\r\n                      .select('path.domain')\r\n                      .node()\r\n                      .getTotalLength() -\r\n                      internal.outerTickSize * 2;\r\n              interval = length / axis.g.selectAll('line').size();\r\n          }\r\n          return interval === Infinity ? 0 : interval;\r\n      };\r\n      axis.ticks = function () {\r\n          if (!arguments.length) {\r\n              return internal.tickArguments;\r\n          }\r\n          internal.tickArguments = arguments;\r\n          return axis;\r\n      };\r\n      axis.tickCulling = function (culling) {\r\n          if (!arguments.length) {\r\n              return internal.tickCulling;\r\n          }\r\n          internal.tickCulling = culling;\r\n          return axis;\r\n      };\r\n      axis.tickValues = function (x) {\r\n          if (typeof x === 'function') {\r\n              internal.tickValues = function () {\r\n                  return x(internal.scale.domain());\r\n              };\r\n          }\r\n          else {\r\n              if (!arguments.length) {\r\n                  return internal.tickValues;\r\n              }\r\n              internal.tickValues = x;\r\n          }\r\n          return axis;\r\n      };\r\n      return axis;\r\n  };\n\n  var CLASS = {\r\n      target: 'c3-target',\r\n      chart: 'c3-chart',\r\n      chartLine: 'c3-chart-line',\r\n      chartLines: 'c3-chart-lines',\r\n      chartBar: 'c3-chart-bar',\r\n      chartBars: 'c3-chart-bars',\r\n      chartText: 'c3-chart-text',\r\n      chartTexts: 'c3-chart-texts',\r\n      chartArc: 'c3-chart-arc',\r\n      chartArcs: 'c3-chart-arcs',\r\n      chartArcsTitle: 'c3-chart-arcs-title',\r\n      chartArcsBackground: 'c3-chart-arcs-background',\r\n      chartArcsGaugeUnit: 'c3-chart-arcs-gauge-unit',\r\n      chartArcsGaugeMax: 'c3-chart-arcs-gauge-max',\r\n      chartArcsGaugeMin: 'c3-chart-arcs-gauge-min',\r\n      selectedCircle: 'c3-selected-circle',\r\n      selectedCircles: 'c3-selected-circles',\r\n      eventRect: 'c3-event-rect',\r\n      eventRects: 'c3-event-rects',\r\n      eventRectsSingle: 'c3-event-rects-single',\r\n      eventRectsMultiple: 'c3-event-rects-multiple',\r\n      zoomRect: 'c3-zoom-rect',\r\n      brush: 'c3-brush',\r\n      dragZoom: 'c3-drag-zoom',\r\n      focused: 'c3-focused',\r\n      defocused: 'c3-defocused',\r\n      region: 'c3-region',\r\n      regions: 'c3-regions',\r\n      title: 'c3-title',\r\n      tooltipContainer: 'c3-tooltip-container',\r\n      tooltip: 'c3-tooltip',\r\n      tooltipName: 'c3-tooltip-name',\r\n      shape: 'c3-shape',\r\n      shapes: 'c3-shapes',\r\n      line: 'c3-line',\r\n      lines: 'c3-lines',\r\n      bar: 'c3-bar',\r\n      bars: 'c3-bars',\r\n      circle: 'c3-circle',\r\n      circles: 'c3-circles',\r\n      arc: 'c3-arc',\r\n      arcLabelLine: 'c3-arc-label-line',\r\n      arcs: 'c3-arcs',\r\n      area: 'c3-area',\r\n      areas: 'c3-areas',\r\n      empty: 'c3-empty',\r\n      text: 'c3-text',\r\n      texts: 'c3-texts',\r\n      gaugeValue: 'c3-gauge-value',\r\n      grid: 'c3-grid',\r\n      gridLines: 'c3-grid-lines',\r\n      xgrid: 'c3-xgrid',\r\n      xgrids: 'c3-xgrids',\r\n      xgridLine: 'c3-xgrid-line',\r\n      xgridLines: 'c3-xgrid-lines',\r\n      xgridFocus: 'c3-xgrid-focus',\r\n      ygrid: 'c3-ygrid',\r\n      ygrids: 'c3-ygrids',\r\n      ygridLine: 'c3-ygrid-line',\r\n      ygridLines: 'c3-ygrid-lines',\r\n      colorScale: 'c3-colorscale',\r\n      stanfordElements: 'c3-stanford-elements',\r\n      stanfordLine: 'c3-stanford-line',\r\n      stanfordLines: 'c3-stanford-lines',\r\n      stanfordRegion: 'c3-stanford-region',\r\n      stanfordRegions: 'c3-stanford-regions',\r\n      stanfordText: 'c3-stanford-text',\r\n      stanfordTexts: 'c3-stanford-texts',\r\n      axis: 'c3-axis',\r\n      axisX: 'c3-axis-x',\r\n      axisXLabel: 'c3-axis-x-label',\r\n      axisY: 'c3-axis-y',\r\n      axisYLabel: 'c3-axis-y-label',\r\n      axisY2: 'c3-axis-y2',\r\n      axisY2Label: 'c3-axis-y2-label',\r\n      legendBackground: 'c3-legend-background',\r\n      legendItem: 'c3-legend-item',\r\n      legendItemEvent: 'c3-legend-item-event',\r\n      legendItemTile: 'c3-legend-item-tile',\r\n      legendItemHidden: 'c3-legend-item-hidden',\r\n      legendItemFocused: 'c3-legend-item-focused',\r\n      dragarea: 'c3-dragarea',\r\n      EXPANDED: '_expanded_',\r\n      SELECTED: '_selected_',\r\n      INCLUDED: '_included_'\r\n  };\n\n  var AxisClass = /** @class */ (function () {\r\n      function AxisClass(owner) {\r\n          this.owner = owner;\r\n          this.d3 = owner.d3;\r\n          this.internal = AxisInternal;\r\n      }\r\n      return AxisClass;\r\n  }());\r\n  var Axis = AxisClass;\r\n  Axis.prototype.init = function init() {\r\n      var $$ = this.owner, config = $$.config, main = $$.main;\r\n      $$.axes.x = main\r\n          .append('g')\r\n          .attr('class', CLASS.axis + ' ' + CLASS.axisX)\r\n          .attr('clip-path', config.axis_x_inner ? '' : $$.clipPathForXAxis)\r\n          .attr('transform', $$.getTranslate('x'))\r\n          .style('visibility', config.axis_x_show ? 'visible' : 'hidden');\r\n      $$.axes.x\r\n          .append('text')\r\n          .attr('class', CLASS.axisXLabel)\r\n          .attr('transform', config.axis_rotated ? 'rotate(-90)' : '')\r\n          .style('text-anchor', this.textAnchorForXAxisLabel.bind(this));\r\n      $$.axes.y = main\r\n          .append('g')\r\n          .attr('class', CLASS.axis + ' ' + CLASS.axisY)\r\n          .attr('clip-path', config.axis_y_inner ? '' : $$.clipPathForYAxis)\r\n          .attr('transform', $$.getTranslate('y'))\r\n          .style('visibility', config.axis_y_show ? 'visible' : 'hidden');\r\n      $$.axes.y\r\n          .append('text')\r\n          .attr('class', CLASS.axisYLabel)\r\n          .attr('transform', config.axis_rotated ? '' : 'rotate(-90)')\r\n          .style('text-anchor', this.textAnchorForYAxisLabel.bind(this));\r\n      $$.axes.y2 = main\r\n          .append('g')\r\n          .attr('class', CLASS.axis + ' ' + CLASS.axisY2)\r\n          // clip-path?\r\n          .attr('transform', $$.getTranslate('y2'))\r\n          .style('visibility', config.axis_y2_show ? 'visible' : 'hidden');\r\n      $$.axes.y2\r\n          .append('text')\r\n          .attr('class', CLASS.axisY2Label)\r\n          .attr('transform', config.axis_rotated ? '' : 'rotate(-90)')\r\n          .style('text-anchor', this.textAnchorForY2AxisLabel.bind(this));\r\n  };\r\n  Axis.prototype.getXAxis = function getXAxis(scale, orient, tickFormat, tickValues, withOuterTick, withoutTransition, withoutRotateTickText) {\r\n      var $$ = this.owner, config = $$.config, axisParams = {\r\n          isCategory: $$.isCategorized(),\r\n          withOuterTick: withOuterTick,\r\n          tickMultiline: config.axis_x_tick_multiline,\r\n          tickMultilineMax: config.axis_x_tick_multiline\r\n              ? Number(config.axis_x_tick_multilineMax)\r\n              : 0,\r\n          tickWidth: config.axis_x_tick_width,\r\n          tickTextRotate: withoutRotateTickText ? 0 : config.axis_x_tick_rotate,\r\n          withoutTransition: withoutTransition\r\n      }, axis = new this.internal(this, axisParams).axis.scale(scale).orient(orient);\r\n      if ($$.isTimeSeries() && tickValues && typeof tickValues !== 'function') {\r\n          tickValues = tickValues.map(function (v) {\r\n              return $$.parseDate(v);\r\n          });\r\n      }\r\n      // Set tick\r\n      axis.tickFormat(tickFormat).tickValues(tickValues);\r\n      if ($$.isCategorized()) {\r\n          axis.tickCentered(config.axis_x_tick_centered);\r\n          if (isEmpty(config.axis_x_tick_culling)) {\r\n              config.axis_x_tick_culling = false;\r\n          }\r\n      }\r\n      return axis;\r\n  };\r\n  Axis.prototype.updateXAxisTickValues = function updateXAxisTickValues(targets, axis) {\r\n      var $$ = this.owner, config = $$.config, tickValues;\r\n      if (config.axis_x_tick_fit || config.axis_x_tick_count) {\r\n          tickValues = this.generateTickValues($$.mapTargetsToUniqueXs(targets), config.axis_x_tick_count, $$.isTimeSeries());\r\n      }\r\n      if (axis) {\r\n          axis.tickValues(tickValues);\r\n      }\r\n      else {\r\n          $$.xAxis.tickValues(tickValues);\r\n          $$.subXAxis.tickValues(tickValues);\r\n      }\r\n      return tickValues;\r\n  };\r\n  Axis.prototype.getYAxis = function getYAxis(axisId, scale, orient, tickValues, withOuterTick, withoutTransition, withoutRotateTickText) {\r\n      var $$ = this.owner;\r\n      var config = $$.config;\r\n      var tickFormat = config[\"axis_\" + axisId + \"_tick_format\"];\r\n      if (!tickFormat && $$.isAxisNormalized(axisId)) {\r\n          tickFormat = function (x) { return x + \"%\"; };\r\n      }\r\n      var axis = new this.internal(this, {\r\n          withOuterTick: withOuterTick,\r\n          withoutTransition: withoutTransition,\r\n          tickTextRotate: withoutRotateTickText ? 0 : config.axis_y_tick_rotate\r\n      }).axis\r\n          .scale(scale)\r\n          .orient(orient);\r\n      if (tickFormat) {\r\n          axis.tickFormat(tickFormat);\r\n      }\r\n      if ($$.isTimeSeriesY()) {\r\n          axis.ticks(config.axis_y_tick_time_type, config.axis_y_tick_time_interval);\r\n      }\r\n      else {\r\n          axis.tickValues(tickValues);\r\n      }\r\n      return axis;\r\n  };\r\n  Axis.prototype.getId = function getId(id) {\r\n      var config = this.owner.config;\r\n      return id in config.data_axes ? config.data_axes[id] : 'y';\r\n  };\r\n  Axis.prototype.getXAxisTickFormat = function getXAxisTickFormat() {\r\n      // #2251 previously set any negative values to a whole number,\r\n      // however both should be truncated according to the users format specification\r\n      var $$ = this.owner, config = $$.config;\r\n      var format = $$.isTimeSeries()\r\n          ? $$.defaultAxisTimeFormat\r\n          : $$.isCategorized()\r\n              ? $$.categoryName\r\n              : function (v) {\r\n                  return v;\r\n              };\r\n      if (config.axis_x_tick_format) {\r\n          if (isFunction(config.axis_x_tick_format)) {\r\n              format = config.axis_x_tick_format;\r\n          }\r\n          else if ($$.isTimeSeries()) {\r\n              format = function (date) {\r\n                  return date ? $$.axisTimeFormat(config.axis_x_tick_format)(date) : '';\r\n              };\r\n          }\r\n      }\r\n      return isFunction(format)\r\n          ? function (v) {\r\n              return format.call($$, v);\r\n          }\r\n          : format;\r\n  };\r\n  Axis.prototype.getTickValues = function getTickValues(tickValues, axis) {\r\n      return tickValues ? tickValues : axis ? axis.tickValues() : undefined;\r\n  };\r\n  Axis.prototype.getXAxisTickValues = function getXAxisTickValues() {\r\n      return this.getTickValues(this.owner.config.axis_x_tick_values, this.owner.xAxis);\r\n  };\r\n  Axis.prototype.getYAxisTickValues = function getYAxisTickValues() {\r\n      return this.getTickValues(this.owner.config.axis_y_tick_values, this.owner.yAxis);\r\n  };\r\n  Axis.prototype.getY2AxisTickValues = function getY2AxisTickValues() {\r\n      return this.getTickValues(this.owner.config.axis_y2_tick_values, this.owner.y2Axis);\r\n  };\r\n  Axis.prototype.getLabelOptionByAxisId = function getLabelOptionByAxisId(axisId) {\r\n      var $$ = this.owner, config = $$.config, option;\r\n      if (axisId === 'y') {\r\n          option = config.axis_y_label;\r\n      }\r\n      else if (axisId === 'y2') {\r\n          option = config.axis_y2_label;\r\n      }\r\n      else if (axisId === 'x') {\r\n          option = config.axis_x_label;\r\n      }\r\n      return option;\r\n  };\r\n  Axis.prototype.getLabelText = function getLabelText(axisId) {\r\n      var option = this.getLabelOptionByAxisId(axisId);\r\n      return isString(option) ? option : option ? option.text : null;\r\n  };\r\n  Axis.prototype.setLabelText = function setLabelText(axisId, text) {\r\n      var $$ = this.owner, config = $$.config, option = this.getLabelOptionByAxisId(axisId);\r\n      if (isString(option)) {\r\n          if (axisId === 'y') {\r\n              config.axis_y_label = text;\r\n          }\r\n          else if (axisId === 'y2') {\r\n              config.axis_y2_label = text;\r\n          }\r\n          else if (axisId === 'x') {\r\n              config.axis_x_label = text;\r\n          }\r\n      }\r\n      else if (option) {\r\n          option.text = text;\r\n      }\r\n  };\r\n  Axis.prototype.getLabelPosition = function getLabelPosition(axisId, defaultPosition) {\r\n      var option = this.getLabelOptionByAxisId(axisId), position = option && typeof option === 'object' && option.position\r\n          ? option.position\r\n          : defaultPosition;\r\n      return {\r\n          isInner: position.indexOf('inner') >= 0,\r\n          isOuter: position.indexOf('outer') >= 0,\r\n          isLeft: position.indexOf('left') >= 0,\r\n          isCenter: position.indexOf('center') >= 0,\r\n          isRight: position.indexOf('right') >= 0,\r\n          isTop: position.indexOf('top') >= 0,\r\n          isMiddle: position.indexOf('middle') >= 0,\r\n          isBottom: position.indexOf('bottom') >= 0\r\n      };\r\n  };\r\n  Axis.prototype.getXAxisLabelPosition = function getXAxisLabelPosition() {\r\n      return this.getLabelPosition('x', this.owner.config.axis_rotated ? 'inner-top' : 'inner-right');\r\n  };\r\n  Axis.prototype.getYAxisLabelPosition = function getYAxisLabelPosition() {\r\n      return this.getLabelPosition('y', this.owner.config.axis_rotated ? 'inner-right' : 'inner-top');\r\n  };\r\n  Axis.prototype.getY2AxisLabelPosition = function getY2AxisLabelPosition() {\r\n      return this.getLabelPosition('y2', this.owner.config.axis_rotated ? 'inner-right' : 'inner-top');\r\n  };\r\n  Axis.prototype.getLabelPositionById = function getLabelPositionById(id) {\r\n      return id === 'y2'\r\n          ? this.getY2AxisLabelPosition()\r\n          : id === 'y'\r\n              ? this.getYAxisLabelPosition()\r\n              : this.getXAxisLabelPosition();\r\n  };\r\n  Axis.prototype.textForXAxisLabel = function textForXAxisLabel() {\r\n      return this.getLabelText('x');\r\n  };\r\n  Axis.prototype.textForYAxisLabel = function textForYAxisLabel() {\r\n      return this.getLabelText('y');\r\n  };\r\n  Axis.prototype.textForY2AxisLabel = function textForY2AxisLabel() {\r\n      return this.getLabelText('y2');\r\n  };\r\n  Axis.prototype.xForAxisLabel = function xForAxisLabel(forHorizontal, position) {\r\n      var $$ = this.owner;\r\n      if (forHorizontal) {\r\n          return position.isLeft ? 0 : position.isCenter ? $$.width / 2 : $$.width;\r\n      }\r\n      else {\r\n          return position.isBottom\r\n              ? -$$.height\r\n              : position.isMiddle\r\n                  ? -$$.height / 2\r\n                  : 0;\r\n      }\r\n  };\r\n  Axis.prototype.dxForAxisLabel = function dxForAxisLabel(forHorizontal, position) {\r\n      if (forHorizontal) {\r\n          return position.isLeft ? '0.5em' : position.isRight ? '-0.5em' : '0';\r\n      }\r\n      else {\r\n          return position.isTop ? '-0.5em' : position.isBottom ? '0.5em' : '0';\r\n      }\r\n  };\r\n  Axis.prototype.textAnchorForAxisLabel = function textAnchorForAxisLabel(forHorizontal, position) {\r\n      if (forHorizontal) {\r\n          return position.isLeft ? 'start' : position.isCenter ? 'middle' : 'end';\r\n      }\r\n      else {\r\n          return position.isBottom ? 'start' : position.isMiddle ? 'middle' : 'end';\r\n      }\r\n  };\r\n  Axis.prototype.xForXAxisLabel = function xForXAxisLabel() {\r\n      return this.xForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());\r\n  };\r\n  Axis.prototype.xForYAxisLabel = function xForYAxisLabel() {\r\n      return this.xForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());\r\n  };\r\n  Axis.prototype.xForY2AxisLabel = function xForY2AxisLabel() {\r\n      return this.xForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());\r\n  };\r\n  Axis.prototype.dxForXAxisLabel = function dxForXAxisLabel() {\r\n      return this.dxForAxisLabel(!this.owner.config.axis_rotated, this.getXAxisLabelPosition());\r\n  };\r\n  Axis.prototype.dxForYAxisLabel = function dxForYAxisLabel() {\r\n      return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getYAxisLabelPosition());\r\n  };\r\n  Axis.prototype.dxForY2AxisLabel = function dxForY2AxisLabel() {\r\n      return this.dxForAxisLabel(this.owner.config.axis_rotated, this.getY2AxisLabelPosition());\r\n  };\r\n  Axis.prototype.dyForXAxisLabel = function dyForXAxisLabel() {\r\n      var $$ = this.owner, config = $$.config, position = this.getXAxisLabelPosition();\r\n      if (config.axis_rotated) {\r\n          return position.isInner\r\n              ? '1.2em'\r\n              : -25 - ($$.config.axis_x_inner ? 0 : this.getMaxTickWidth('x'));\r\n      }\r\n      else {\r\n          return position.isInner ? '-0.5em' : $$.getHorizontalAxisHeight('x') - 10;\r\n      }\r\n  };\r\n  Axis.prototype.dyForYAxisLabel = function dyForYAxisLabel() {\r\n      var $$ = this.owner, position = this.getYAxisLabelPosition();\r\n      if ($$.config.axis_rotated) {\r\n          return position.isInner ? '-0.5em' : '3em';\r\n      }\r\n      else {\r\n          return position.isInner\r\n              ? '1.2em'\r\n              : -10 - ($$.config.axis_y_inner ? 0 : this.getMaxTickWidth('y') + 10);\r\n      }\r\n  };\r\n  Axis.prototype.dyForY2AxisLabel = function dyForY2AxisLabel() {\r\n      var $$ = this.owner, position = this.getY2AxisLabelPosition();\r\n      if ($$.config.axis_rotated) {\r\n          return position.isInner ? '1.2em' : '-2.2em';\r\n      }\r\n      else {\r\n          return position.isInner\r\n              ? '-0.5em'\r\n              : 15 + ($$.config.axis_y2_inner ? 0 : this.getMaxTickWidth('y2') + 15);\r\n      }\r\n  };\r\n  Axis.prototype.textAnchorForXAxisLabel = function textAnchorForXAxisLabel() {\r\n      var $$ = this.owner;\r\n      return this.textAnchorForAxisLabel(!$$.config.axis_rotated, this.getXAxisLabelPosition());\r\n  };\r\n  Axis.prototype.textAnchorForYAxisLabel = function textAnchorForYAxisLabel() {\r\n      var $$ = this.owner;\r\n      return this.textAnchorForAxisLabel($$.config.axis_rotated, this.getYAxisLabelPosition());\r\n  };\r\n  Axis.prototype.textAnchorForY2AxisLabel = function textAnchorForY2AxisLabel() {\r\n      var $$ = this.owner;\r\n      return this.textAnchorForAxisLabel($$.config.axis_rotated, this.getY2AxisLabelPosition());\r\n  };\r\n  Axis.prototype.getMaxTickWidth = function getMaxTickWidth(id, withoutRecompute) {\r\n      var $$ = this.owner, maxWidth = 0, targetsToShow, scale, axis, dummy, svg;\r\n      if (withoutRecompute && $$.currentMaxTickWidths[id]) {\r\n          return $$.currentMaxTickWidths[id];\r\n      }\r\n      if ($$.svg) {\r\n          targetsToShow = $$.filterTargetsToShow($$.data.targets);\r\n          if (id === 'y') {\r\n              scale = $$.y.copy().domain($$.getYDomain(targetsToShow, 'y'));\r\n              axis = this.getYAxis(id, scale, $$.yOrient, $$.yAxisTickValues, false, true, true);\r\n          }\r\n          else if (id === 'y2') {\r\n              scale = $$.y2.copy().domain($$.getYDomain(targetsToShow, 'y2'));\r\n              axis = this.getYAxis(id, scale, $$.y2Orient, $$.y2AxisTickValues, false, true, true);\r\n          }\r\n          else {\r\n              scale = $$.x.copy().domain($$.getXDomain(targetsToShow));\r\n              axis = this.getXAxis(scale, $$.xOrient, $$.xAxisTickFormat, $$.xAxisTickValues, false, true, true);\r\n              this.updateXAxisTickValues(targetsToShow, axis);\r\n          }\r\n          dummy = $$.d3\r\n              .select('body')\r\n              .append('div')\r\n              .classed('c3', true);\r\n          (svg = dummy\r\n              .append('svg')\r\n              .style('visibility', 'hidden')\r\n              .style('position', 'fixed')\r\n              .style('top', 0)\r\n              .style('left', 0)),\r\n              svg\r\n                  .append('g')\r\n                  .call(axis)\r\n                  .each(function () {\r\n                  $$.d3\r\n                      .select(this)\r\n                      .selectAll('text')\r\n                      .each(function () {\r\n                      var box = getBBox(this);\r\n                      if (maxWidth < box.width) {\r\n                          maxWidth = box.width;\r\n                      }\r\n                  });\r\n                  dummy.remove();\r\n              });\r\n      }\r\n      $$.currentMaxTickWidths[id] =\r\n          maxWidth <= 0 ? $$.currentMaxTickWidths[id] : maxWidth;\r\n      return $$.currentMaxTickWidths[id];\r\n  };\r\n  Axis.prototype.updateLabels = function updateLabels(withTransition) {\r\n      var $$ = this.owner;\r\n      var axisXLabel = $$.main.select('.' + CLASS.axisX + ' .' + CLASS.axisXLabel), axisYLabel = $$.main.select('.' + CLASS.axisY + ' .' + CLASS.axisYLabel), axisY2Label = $$.main.select('.' + CLASS.axisY2 + ' .' + CLASS.axisY2Label);\r\n      (withTransition ? axisXLabel.transition() : axisXLabel)\r\n          .attr('x', this.xForXAxisLabel.bind(this))\r\n          .attr('dx', this.dxForXAxisLabel.bind(this))\r\n          .attr('dy', this.dyForXAxisLabel.bind(this))\r\n          .text(this.textForXAxisLabel.bind(this));\r\n      (withTransition ? axisYLabel.transition() : axisYLabel)\r\n          .attr('x', this.xForYAxisLabel.bind(this))\r\n          .attr('dx', this.dxForYAxisLabel.bind(this))\r\n          .attr('dy', this.dyForYAxisLabel.bind(this))\r\n          .text(this.textForYAxisLabel.bind(this));\r\n      (withTransition ? axisY2Label.transition() : axisY2Label)\r\n          .attr('x', this.xForY2AxisLabel.bind(this))\r\n          .attr('dx', this.dxForY2AxisLabel.bind(this))\r\n          .attr('dy', this.dyForY2AxisLabel.bind(this))\r\n          .text(this.textForY2AxisLabel.bind(this));\r\n  };\r\n  Axis.prototype.getPadding = function getPadding(padding, key, defaultValue, domainLength) {\r\n      var p = typeof padding === 'number' ? padding : padding[key];\r\n      if (!isValue(p)) {\r\n          return defaultValue;\r\n      }\r\n      if (padding.unit === 'ratio') {\r\n          return padding[key] * domainLength;\r\n      }\r\n      // assume padding is pixels if unit is not specified\r\n      return this.convertPixelsToAxisPadding(p, domainLength);\r\n  };\r\n  Axis.prototype.convertPixelsToAxisPadding = function convertPixelsToAxisPadding(pixels, domainLength) {\r\n      var $$ = this.owner, length = $$.config.axis_rotated ? $$.width : $$.height;\r\n      return domainLength * (pixels / length);\r\n  };\r\n  Axis.prototype.generateTickValues = function generateTickValues(values, tickCount, forTimeSeries) {\r\n      var tickValues = values, targetCount, start, end, count, interval, i, tickValue;\r\n      if (tickCount) {\r\n          targetCount = isFunction(tickCount) ? tickCount() : tickCount;\r\n          // compute ticks according to tickCount\r\n          if (targetCount === 1) {\r\n              tickValues = [values[0]];\r\n          }\r\n          else if (targetCount === 2) {\r\n              tickValues = [values[0], values[values.length - 1]];\r\n          }\r\n          else if (targetCount > 2) {\r\n              count = targetCount - 2;\r\n              start = values[0];\r\n              end = values[values.length - 1];\r\n              interval = (end - start) / (count + 1);\r\n              // re-construct unique values\r\n              tickValues = [start];\r\n              for (i = 0; i < count; i++) {\r\n                  tickValue = +start + interval * (i + 1);\r\n                  tickValues.push(forTimeSeries ? new Date(tickValue) : tickValue);\r\n              }\r\n              tickValues.push(end);\r\n          }\r\n      }\r\n      if (!forTimeSeries) {\r\n          tickValues = tickValues.sort(function (a, b) {\r\n              return a - b;\r\n          });\r\n      }\r\n      return tickValues;\r\n  };\r\n  Axis.prototype.generateTransitions = function generateTransitions(duration) {\r\n      var $$ = this.owner, axes = $$.axes;\r\n      return {\r\n          axisX: duration ? axes.x.transition().duration(duration) : axes.x,\r\n          axisY: duration ? axes.y.transition().duration(duration) : axes.y,\r\n          axisY2: duration ? axes.y2.transition().duration(duration) : axes.y2,\r\n          axisSubX: duration ? axes.subx.transition().duration(duration) : axes.subx\r\n      };\r\n  };\r\n  Axis.prototype.redraw = function redraw(duration, isHidden) {\r\n      var $$ = this.owner, transition = duration ? $$.d3.transition().duration(duration) : null;\r\n      $$.axes.x.style('opacity', isHidden ? 0 : 1).call($$.xAxis, transition);\r\n      $$.axes.y.style('opacity', isHidden ? 0 : 1).call($$.yAxis, transition);\r\n      $$.axes.y2.style('opacity', isHidden ? 0 : 1).call($$.y2Axis, transition);\r\n      $$.axes.subx.style('opacity', isHidden ? 0 : 1).call($$.subXAxis, transition);\r\n  };\n\n  var c3 = {\r\n      version: '0.7.20',\r\n      chart: {\r\n          fn: Chart.prototype,\r\n          internal: {\r\n              fn: ChartInternal.prototype,\r\n              axis: {\r\n                  fn: AxisClass.prototype,\r\n                  internal: {\r\n                      fn: AxisInternal.prototype\r\n                  }\r\n              }\r\n          }\r\n      },\r\n      generate: function (config) {\r\n          return new Chart(config);\r\n      }\r\n  };\r\n  ChartInternal.prototype.beforeInit = function () {\r\n      // can do something\r\n  };\r\n  ChartInternal.prototype.afterInit = function () {\r\n      // can do something\r\n  };\r\n  ChartInternal.prototype.init = function () {\r\n      var $$ = this, config = $$.config;\r\n      $$.initParams();\r\n      if (config.data_url) {\r\n          $$.convertUrlToData(config.data_url, config.data_mimeType, config.data_headers, config.data_keys, $$.initWithData);\r\n      }\r\n      else if (config.data_json) {\r\n          $$.initWithData($$.convertJsonToData(config.data_json, config.data_keys));\r\n      }\r\n      else if (config.data_rows) {\r\n          $$.initWithData($$.convertRowsToData(config.data_rows));\r\n      }\r\n      else if (config.data_columns) {\r\n          $$.initWithData($$.convertColumnsToData(config.data_columns));\r\n      }\r\n      else {\r\n          throw Error('url or json or rows or columns is required.');\r\n      }\r\n  };\r\n  ChartInternal.prototype.initParams = function () {\r\n      var $$ = this, d3 = $$.d3, config = $$.config;\r\n      // MEMO: clipId needs to be unique because it conflicts when multiple charts exist\r\n      $$.clipId = 'c3-' + new Date().valueOf() + '-clip';\r\n      $$.clipIdForXAxis = $$.clipId + '-xaxis';\r\n      $$.clipIdForYAxis = $$.clipId + '-yaxis';\r\n      $$.clipIdForGrid = $$.clipId + '-grid';\r\n      $$.clipIdForSubchart = $$.clipId + '-subchart';\r\n      $$.clipPath = $$.getClipPath($$.clipId);\r\n      $$.clipPathForXAxis = $$.getClipPath($$.clipIdForXAxis);\r\n      $$.clipPathForYAxis = $$.getClipPath($$.clipIdForYAxis);\r\n      $$.clipPathForGrid = $$.getClipPath($$.clipIdForGrid);\r\n      $$.clipPathForSubchart = $$.getClipPath($$.clipIdForSubchart);\r\n      $$.dragStart = null;\r\n      $$.dragging = false;\r\n      $$.flowing = false;\r\n      $$.cancelClick = false;\r\n      $$.mouseover = undefined;\r\n      $$.transiting = false;\r\n      $$.color = $$.generateColor();\r\n      $$.levelColor = $$.generateLevelColor();\r\n      $$.dataTimeParse = (config.data_xLocaltime ? d3.timeParse : d3.utcParse)($$.config.data_xFormat);\r\n      $$.axisTimeFormat = config.axis_x_localtime ? d3.timeFormat : d3.utcFormat;\r\n      $$.defaultAxisTimeFormat = function (date) {\r\n          if (date.getMilliseconds()) {\r\n              return d3.timeFormat('.%L')(date);\r\n          }\r\n          if (date.getSeconds()) {\r\n              return d3.timeFormat(':%S')(date);\r\n          }\r\n          if (date.getMinutes()) {\r\n              return d3.timeFormat('%I:%M')(date);\r\n          }\r\n          if (date.getHours()) {\r\n              return d3.timeFormat('%I %p')(date);\r\n          }\r\n          if (date.getDay() && date.getDate() !== 1) {\r\n              return d3.timeFormat('%-m/%-d')(date);\r\n          }\r\n          if (date.getDate() !== 1) {\r\n              return d3.timeFormat('%-m/%-d')(date);\r\n          }\r\n          if (date.getMonth()) {\r\n              return d3.timeFormat('%-m/%-d')(date);\r\n          }\r\n          return d3.timeFormat('%Y/%-m/%-d')(date);\r\n      };\r\n      $$.hiddenTargetIds = [];\r\n      $$.hiddenLegendIds = [];\r\n      $$.focusedTargetIds = [];\r\n      $$.defocusedTargetIds = [];\r\n      $$.xOrient = config.axis_rotated\r\n          ? config.axis_x_inner\r\n              ? 'right'\r\n              : 'left'\r\n          : config.axis_x_inner\r\n              ? 'top'\r\n              : 'bottom';\r\n      $$.yOrient = config.axis_rotated\r\n          ? config.axis_y_inner\r\n              ? 'top'\r\n              : 'bottom'\r\n          : config.axis_y_inner\r\n              ? 'right'\r\n              : 'left';\r\n      $$.y2Orient = config.axis_rotated\r\n          ? config.axis_y2_inner\r\n              ? 'bottom'\r\n              : 'top'\r\n          : config.axis_y2_inner\r\n              ? 'left'\r\n              : 'right';\r\n      $$.subXOrient = config.axis_rotated ? 'left' : 'bottom';\r\n      $$.isLegendRight = config.legend_position === 'right';\r\n      $$.isLegendInset = config.legend_position === 'inset';\r\n      $$.isLegendTop =\r\n          config.legend_inset_anchor === 'top-left' ||\r\n              config.legend_inset_anchor === 'top-right';\r\n      $$.isLegendLeft =\r\n          config.legend_inset_anchor === 'top-left' ||\r\n              config.legend_inset_anchor === 'bottom-left';\r\n      $$.legendStep = 0;\r\n      $$.legendItemWidth = 0;\r\n      $$.legendItemHeight = 0;\r\n      $$.currentMaxTickWidths = {\r\n          x: 0,\r\n          y: 0,\r\n          y2: 0\r\n      };\r\n      $$.rotated_padding_left = 30;\r\n      $$.rotated_padding_right = config.axis_rotated && !config.axis_x_show ? 0 : 30;\r\n      $$.rotated_padding_top = 5;\r\n      $$.withoutFadeIn = {};\r\n      $$.intervalForObserveInserted = undefined;\r\n      $$.axes.subx = d3.selectAll([]); // needs when excluding subchart.js\r\n  };\r\n  ChartInternal.prototype.initChartElements = function () {\r\n      if (this.initBar) {\r\n          this.initBar();\r\n      }\r\n      if (this.initLine) {\r\n          this.initLine();\r\n      }\r\n      if (this.initArc) {\r\n          this.initArc();\r\n      }\r\n      if (this.initGauge) {\r\n          this.initGauge();\r\n      }\r\n      if (this.initText) {\r\n          this.initText();\r\n      }\r\n  };\r\n  ChartInternal.prototype.initWithData = function (data) {\r\n      var $$ = this, d3 = $$.d3, config = $$.config;\r\n      var defs, main, binding = true;\r\n      $$.axis = new AxisClass($$);\r\n      if (!config.bindto) {\r\n          $$.selectChart = d3.selectAll([]);\r\n      }\r\n      else if (typeof config.bindto.node === 'function') {\r\n          $$.selectChart = config.bindto;\r\n      }\r\n      else {\r\n          $$.selectChart = d3.select(config.bindto);\r\n      }\r\n      if ($$.selectChart.empty()) {\r\n          $$.selectChart = d3\r\n              .select(document.createElement('div'))\r\n              .style('opacity', 0);\r\n          $$.observeInserted($$.selectChart);\r\n          binding = false;\r\n      }\r\n      $$.selectChart.html('').classed('c3', true);\r\n      // Init data as targets\r\n      $$.data.xs = {};\r\n      $$.data.targets = $$.convertDataToTargets(data);\r\n      if (config.data_filter) {\r\n          $$.data.targets = $$.data.targets.filter(config.data_filter);\r\n      }\r\n      // Set targets to hide if needed\r\n      if (config.data_hide) {\r\n          $$.addHiddenTargetIds(config.data_hide === true\r\n              ? $$.mapToIds($$.data.targets)\r\n              : config.data_hide);\r\n      }\r\n      if (config.legend_hide) {\r\n          $$.addHiddenLegendIds(config.legend_hide === true\r\n              ? $$.mapToIds($$.data.targets)\r\n              : config.legend_hide);\r\n      }\r\n      if ($$.isStanfordGraphType()) {\r\n          $$.initStanfordData();\r\n      }\r\n      // Init sizes and scales\r\n      $$.updateSizes();\r\n      $$.updateScales();\r\n      // Set domains for each scale\r\n      $$.x.domain(d3.extent($$.getXDomain($$.data.targets)));\r\n      $$.y.domain($$.getYDomain($$.data.targets, 'y'));\r\n      $$.y2.domain($$.getYDomain($$.data.targets, 'y2'));\r\n      $$.subX.domain($$.x.domain());\r\n      $$.subY.domain($$.y.domain());\r\n      $$.subY2.domain($$.y2.domain());\r\n      // Save original x domain for zoom update\r\n      $$.orgXDomain = $$.x.domain();\r\n      /*-- Basic Elements --*/\r\n      // Define svgs\r\n      $$.svg = $$.selectChart\r\n          .append('svg')\r\n          .style('overflow', 'hidden')\r\n          .on('mouseenter', function () {\r\n          return config.onmouseover.call($$);\r\n      })\r\n          .on('mouseleave', function () {\r\n          return config.onmouseout.call($$);\r\n      });\r\n      if ($$.config.svg_classname) {\r\n          $$.svg.attr('class', $$.config.svg_classname);\r\n      }\r\n      // Define defs\r\n      defs = $$.svg.append('defs');\r\n      $$.clipChart = $$.appendClip(defs, $$.clipId);\r\n      $$.clipXAxis = $$.appendClip(defs, $$.clipIdForXAxis);\r\n      $$.clipYAxis = $$.appendClip(defs, $$.clipIdForYAxis);\r\n      $$.clipGrid = $$.appendClip(defs, $$.clipIdForGrid);\r\n      $$.clipSubchart = $$.appendClip(defs, $$.clipIdForSubchart);\r\n      $$.updateSvgSize();\r\n      // Define regions\r\n      main = $$.main = $$.svg.append('g').attr('transform', $$.getTranslate('main'));\r\n      if ($$.initPie) {\r\n          $$.initPie();\r\n      }\r\n      if ($$.initDragZoom) {\r\n          $$.initDragZoom();\r\n      }\r\n      if (config.subchart_show && $$.initSubchart) {\r\n          $$.initSubchart();\r\n      }\r\n      if ($$.initTooltip) {\r\n          $$.initTooltip();\r\n      }\r\n      if ($$.initLegend) {\r\n          $$.initLegend();\r\n      }\r\n      if ($$.initTitle) {\r\n          $$.initTitle();\r\n      }\r\n      if ($$.initZoom) {\r\n          $$.initZoom();\r\n      }\r\n      if ($$.isStanfordGraphType()) {\r\n          $$.drawColorScale();\r\n      }\r\n      // Update selection based on size and scale\r\n      // TODO: currently this must be called after initLegend because of update of sizes, but it should be done in initSubchart.\r\n      if (config.subchart_show && $$.initSubchartBrush) {\r\n          $$.initSubchartBrush();\r\n      }\r\n      /*-- Main Region --*/\r\n      // text when empty\r\n      main\r\n          .append('text')\r\n          .attr('class', CLASS.text + ' ' + CLASS.empty)\r\n          .attr('text-anchor', 'middle') // horizontal centering of text at x position in all browsers.\r\n          .attr('dominant-baseline', 'middle'); // vertical centering of text at y position in all browsers, except IE.\r\n      // Regions\r\n      $$.initRegion();\r\n      // Grids\r\n      $$.initGrid();\r\n      // Define g for chart area\r\n      main\r\n          .append('g')\r\n          .attr('clip-path', $$.clipPath)\r\n          .attr('class', CLASS.chart);\r\n      // Grid lines\r\n      if (config.grid_lines_front) {\r\n          $$.initGridLines();\r\n      }\r\n      $$.initStanfordElements();\r\n      // Cover whole with rects for events\r\n      $$.initEventRect();\r\n      // Define g for chart\r\n      $$.initChartElements();\r\n      // Add Axis\r\n      $$.axis.init();\r\n      // Set targets\r\n      $$.updateTargets($$.data.targets);\r\n      // Set default extent if defined\r\n      if (config.axis_x_selection) {\r\n          $$.brush.selectionAsValue($$.getDefaultSelection());\r\n      }\r\n      // Draw with targets\r\n      if (binding) {\r\n          $$.updateDimension();\r\n          $$.config.oninit.call($$);\r\n          $$.redraw({\r\n              withTransition: false,\r\n              withTransform: true,\r\n              withUpdateXDomain: true,\r\n              withUpdateOrgXDomain: true,\r\n              withTransitionForAxis: false\r\n          });\r\n      }\r\n      // Bind to resize event\r\n      $$.bindResize();\r\n      // Bind to window focus event\r\n      $$.bindWindowFocus();\r\n      // export element of the chart\r\n      $$.api.element = $$.selectChart.node();\r\n  };\r\n  ChartInternal.prototype.smoothLines = function (el, type) {\r\n      var $$ = this;\r\n      if (type === 'grid') {\r\n          el.each(function () {\r\n              var g = $$.d3.select(this), x1 = g.attr('x1'), x2 = g.attr('x2'), y1 = g.attr('y1'), y2 = g.attr('y2');\r\n              g.attr({\r\n                  x1: Math.ceil(x1),\r\n                  x2: Math.ceil(x2),\r\n                  y1: Math.ceil(y1),\r\n                  y2: Math.ceil(y2)\r\n              });\r\n          });\r\n      }\r\n  };\r\n  ChartInternal.prototype.updateSizes = function () {\r\n      var $$ = this, config = $$.config;\r\n      var legendHeight = $$.legend ? $$.getLegendHeight() : 0, legendWidth = $$.legend ? $$.getLegendWidth() : 0, legendHeightForBottom = $$.isLegendRight || $$.isLegendInset ? 0 : legendHeight, hasArc = $$.hasArcType(), xAxisHeight = config.axis_rotated || hasArc ? 0 : $$.getHorizontalAxisHeight('x'), subchartXAxisHeight = config.axis_rotated || hasArc ? 0 : $$.getHorizontalAxisHeight('x', true), subchartHeight = config.subchart_show && !hasArc\r\n          ? config.subchart_size_height + subchartXAxisHeight\r\n          : 0;\r\n      $$.currentWidth = $$.getCurrentWidth();\r\n      $$.currentHeight = $$.getCurrentHeight();\r\n      // for main\r\n      $$.margin = config.axis_rotated\r\n          ? {\r\n              top: $$.getHorizontalAxisHeight('y2') + $$.getCurrentPaddingTop(),\r\n              right: hasArc ? 0 : $$.getCurrentPaddingRight(),\r\n              bottom: $$.getHorizontalAxisHeight('y') +\r\n                  legendHeightForBottom +\r\n                  $$.getCurrentPaddingBottom(),\r\n              left: subchartHeight + (hasArc ? 0 : $$.getCurrentPaddingLeft())\r\n          }\r\n          : {\r\n              top: 4 + $$.getCurrentPaddingTop(),\r\n              right: hasArc ? 0 : $$.getCurrentPaddingRight(),\r\n              bottom: xAxisHeight +\r\n                  subchartHeight +\r\n                  legendHeightForBottom +\r\n                  $$.getCurrentPaddingBottom(),\r\n              left: hasArc ? 0 : $$.getCurrentPaddingLeft()\r\n          };\r\n      // for subchart\r\n      $$.margin2 = config.axis_rotated\r\n          ? {\r\n              top: $$.margin.top,\r\n              right: NaN,\r\n              bottom: 20 + legendHeightForBottom,\r\n              left: $$.rotated_padding_left\r\n          }\r\n          : {\r\n              top: $$.currentHeight - subchartHeight - legendHeightForBottom,\r\n              right: NaN,\r\n              bottom: subchartXAxisHeight + legendHeightForBottom,\r\n              left: $$.margin.left\r\n          };\r\n      // for legend\r\n      $$.margin3 = {\r\n          top: 0,\r\n          right: NaN,\r\n          bottom: 0,\r\n          left: 0\r\n      };\r\n      if ($$.updateSizeForLegend) {\r\n          $$.updateSizeForLegend(legendHeight, legendWidth);\r\n      }\r\n      $$.width = $$.currentWidth - $$.margin.left - $$.margin.right;\r\n      $$.height = $$.currentHeight - $$.margin.top - $$.margin.bottom;\r\n      if ($$.width < 0) {\r\n          $$.width = 0;\r\n      }\r\n      if ($$.height < 0) {\r\n          $$.height = 0;\r\n      }\r\n      $$.width2 = config.axis_rotated\r\n          ? $$.margin.left - $$.rotated_padding_left - $$.rotated_padding_right\r\n          : $$.width;\r\n      $$.height2 = config.axis_rotated\r\n          ? $$.height\r\n          : $$.currentHeight - $$.margin2.top - $$.margin2.bottom;\r\n      if ($$.width2 < 0) {\r\n          $$.width2 = 0;\r\n      }\r\n      if ($$.height2 < 0) {\r\n          $$.height2 = 0;\r\n      }\r\n      // for arc\r\n      $$.arcWidth = $$.width - ($$.isLegendRight ? legendWidth + 10 : 0);\r\n      $$.arcHeight = $$.height - ($$.isLegendRight ? 0 : 10);\r\n      if ($$.hasType('gauge') && !config.gauge_fullCircle) {\r\n          $$.arcHeight += $$.height - $$.getGaugeLabelHeight();\r\n      }\r\n      if ($$.updateRadius) {\r\n          $$.updateRadius();\r\n      }\r\n      if ($$.isLegendRight && hasArc) {\r\n          $$.margin3.left = $$.arcWidth / 2 + $$.radiusExpanded * 1.1;\r\n      }\r\n  };\r\n  ChartInternal.prototype.updateTargets = function (targets) {\r\n      var $$ = this, config = $$.config;\r\n      /*-- Main --*/\r\n      //-- Text --//\r\n      $$.updateTargetsForText(targets);\r\n      //-- Bar --//\r\n      $$.updateTargetsForBar(targets);\r\n      //-- Line --//\r\n      $$.updateTargetsForLine(targets);\r\n      //-- Arc --//\r\n      if ($$.hasArcType() && $$.updateTargetsForArc) {\r\n          $$.updateTargetsForArc(targets);\r\n      }\r\n      /*-- Sub --*/\r\n      if (config.subchart_show && $$.updateTargetsForSubchart) {\r\n          $$.updateTargetsForSubchart(targets);\r\n      }\r\n      // Fade-in each chart\r\n      $$.showTargets();\r\n  };\r\n  ChartInternal.prototype.showTargets = function () {\r\n      var $$ = this;\r\n      $$.svg\r\n          .selectAll('.' + CLASS.target)\r\n          .filter(function (d) {\r\n          return $$.isTargetToShow(d.id);\r\n      })\r\n          .transition()\r\n          .duration($$.config.transition_duration)\r\n          .style('opacity', 1);\r\n  };\r\n  ChartInternal.prototype.redraw = function (options, transitions) {\r\n      var $$ = this, main = $$.main, d3 = $$.d3, config = $$.config;\r\n      var areaIndices = $$.getShapeIndices($$.isAreaType), barIndices = $$.getShapeIndices($$.isBarType), lineIndices = $$.getShapeIndices($$.isLineType);\r\n      var withY, withSubchart, withTransition, withTransitionForExit, withTransitionForAxis, withTransform, withUpdateXDomain, withUpdateOrgXDomain, withTrimXDomain, withLegend, withEventRect, withDimension, withUpdateXAxis;\r\n      var hideAxis = $$.hasArcType();\r\n      var drawArea, drawBar, drawLine, xForText, yForText;\r\n      var duration, durationForExit, durationForAxis;\r\n      var transitionsToWait, waitForDraw, flow, transition;\r\n      var targetsToShow = $$.filterTargetsToShow($$.data.targets), tickValues, i, intervalForCulling, xDomainForZoom;\r\n      var xv = $$.xv.bind($$), cx, cy;\r\n      options = options || {};\r\n      withY = getOption(options, 'withY', true);\r\n      withSubchart = getOption(options, 'withSubchart', true);\r\n      withTransition = getOption(options, 'withTransition', true);\r\n      withTransform = getOption(options, 'withTransform', false);\r\n      withUpdateXDomain = getOption(options, 'withUpdateXDomain', false);\r\n      withUpdateOrgXDomain = getOption(options, 'withUpdateOrgXDomain', false);\r\n      withTrimXDomain = getOption(options, 'withTrimXDomain', true);\r\n      withUpdateXAxis = getOption(options, 'withUpdateXAxis', withUpdateXDomain);\r\n      withLegend = getOption(options, 'withLegend', false);\r\n      withEventRect = getOption(options, 'withEventRect', true);\r\n      withDimension = getOption(options, 'withDimension', true);\r\n      withTransitionForExit = getOption(options, 'withTransitionForExit', withTransition);\r\n      withTransitionForAxis = getOption(options, 'withTransitionForAxis', withTransition);\r\n      duration = withTransition ? config.transition_duration : 0;\r\n      durationForExit = withTransitionForExit ? duration : 0;\r\n      durationForAxis = withTransitionForAxis ? duration : 0;\r\n      transitions = transitions || $$.axis.generateTransitions(durationForAxis);\r\n      // update legend and transform each g\r\n      if (withLegend && config.legend_show) {\r\n          $$.updateLegend($$.mapToIds($$.data.targets), options, transitions);\r\n      }\r\n      else if (withDimension) {\r\n          // need to update dimension (e.g. axis.y.tick.values) because y tick values should change\r\n          // no need to update axis in it because they will be updated in redraw()\r\n          $$.updateDimension(true);\r\n      }\r\n      // MEMO: needed for grids calculation\r\n      if ($$.isCategorized() && targetsToShow.length === 0) {\r\n          $$.x.domain([0, $$.axes.x.selectAll('.tick').size()]);\r\n      }\r\n      if (targetsToShow.length) {\r\n          $$.updateXDomain(targetsToShow, withUpdateXDomain, withUpdateOrgXDomain, withTrimXDomain);\r\n          if (!config.axis_x_tick_values) {\r\n              tickValues = $$.axis.updateXAxisTickValues(targetsToShow);\r\n          }\r\n      }\r\n      else {\r\n          $$.xAxis.tickValues([]);\r\n          $$.subXAxis.tickValues([]);\r\n      }\r\n      if (config.zoom_rescale && !options.flow) {\r\n          xDomainForZoom = $$.x.orgDomain();\r\n      }\r\n      $$.y.domain($$.getYDomain(targetsToShow, 'y', xDomainForZoom));\r\n      $$.y2.domain($$.getYDomain(targetsToShow, 'y2', xDomainForZoom));\r\n      if (!config.axis_y_tick_values && config.axis_y_tick_count) {\r\n          $$.yAxis.tickValues($$.axis.generateTickValues($$.y.domain(), config.axis_y_tick_count));\r\n      }\r\n      if (!config.axis_y2_tick_values && config.axis_y2_tick_count) {\r\n          $$.y2Axis.tickValues($$.axis.generateTickValues($$.y2.domain(), config.axis_y2_tick_count));\r\n      }\r\n      // axes\r\n      $$.axis.redraw(durationForAxis, hideAxis);\r\n      // Update axis label\r\n      $$.axis.updateLabels(withTransition);\r\n      // show/hide if manual culling needed\r\n      if ((withUpdateXDomain || withUpdateXAxis) && targetsToShow.length) {\r\n          if (config.axis_x_tick_culling && tickValues) {\r\n              for (i = 1; i < tickValues.length; i++) {\r\n                  if (tickValues.length / i < config.axis_x_tick_culling_max) {\r\n                      intervalForCulling = i;\r\n                      break;\r\n                  }\r\n              }\r\n              $$.svg.selectAll('.' + CLASS.axisX + ' .tick text').each(function (e) {\r\n                  var index = tickValues.indexOf(e);\r\n                  if (index >= 0) {\r\n                      d3.select(this).style('display', index % intervalForCulling ? 'none' : 'block');\r\n                  }\r\n              });\r\n          }\r\n          else {\r\n              $$.svg\r\n                  .selectAll('.' + CLASS.axisX + ' .tick text')\r\n                  .style('display', 'block');\r\n          }\r\n      }\r\n      // setup drawer - MEMO: these must be called after axis updated\r\n      drawArea = $$.generateDrawArea\r\n          ? $$.generateDrawArea(areaIndices, false)\r\n          : undefined;\r\n      drawBar = $$.generateDrawBar ? $$.generateDrawBar(barIndices) : undefined;\r\n      drawLine = $$.generateDrawLine\r\n          ? $$.generateDrawLine(lineIndices, false)\r\n          : undefined;\r\n      xForText = $$.generateXYForText(areaIndices, barIndices, lineIndices, true);\r\n      yForText = $$.generateXYForText(areaIndices, barIndices, lineIndices, false);\r\n      // update circleY based on updated parameters\r\n      $$.updateCircleY();\r\n      // generate circle x/y functions depending on updated params\r\n      cx = ($$.config.axis_rotated ? $$.circleY : $$.circleX).bind($$);\r\n      cy = ($$.config.axis_rotated ? $$.circleX : $$.circleY).bind($$);\r\n      // Update sub domain\r\n      if (withY) {\r\n          $$.subY.domain($$.getYDomain(targetsToShow, 'y'));\r\n          $$.subY2.domain($$.getYDomain(targetsToShow, 'y2'));\r\n      }\r\n      // xgrid focus\r\n      $$.updateXgridFocus();\r\n      // Data empty label positioning and text.\r\n      main\r\n          .select('text.' + CLASS.text + '.' + CLASS.empty)\r\n          .attr('x', $$.width / 2)\r\n          .attr('y', $$.height / 2)\r\n          .text(config.data_empty_label_text)\r\n          .transition()\r\n          .style('opacity', targetsToShow.length ? 0 : 1);\r\n      // event rect\r\n      if (withEventRect) {\r\n          $$.redrawEventRect();\r\n      }\r\n      // grid\r\n      $$.updateGrid(duration);\r\n      $$.updateStanfordElements(duration);\r\n      // rect for regions\r\n      $$.updateRegion(duration);\r\n      // bars\r\n      $$.updateBar(durationForExit);\r\n      // lines, areas and circles\r\n      $$.updateLine(durationForExit);\r\n      $$.updateArea(durationForExit);\r\n      $$.updateCircle(cx, cy);\r\n      // text\r\n      if ($$.hasDataLabel()) {\r\n          $$.updateText(xForText, yForText, durationForExit);\r\n      }\r\n      // title\r\n      if ($$.redrawTitle) {\r\n          $$.redrawTitle();\r\n      }\r\n      // arc\r\n      if ($$.redrawArc) {\r\n          $$.redrawArc(duration, durationForExit, withTransform);\r\n      }\r\n      // subchart\r\n      if (config.subchart_show && $$.redrawSubchart) {\r\n          $$.redrawSubchart(withSubchart, transitions, duration, durationForExit, areaIndices, barIndices, lineIndices);\r\n      }\r\n      if ($$.isStanfordGraphType()) {\r\n          $$.drawColorScale();\r\n      }\r\n      // circles for select\r\n      main\r\n          .selectAll('.' + CLASS.selectedCircles)\r\n          .filter($$.isBarType.bind($$))\r\n          .selectAll('circle')\r\n          .remove();\r\n      if (options.flow) {\r\n          flow = $$.generateFlow({\r\n              targets: targetsToShow,\r\n              flow: options.flow,\r\n              duration: options.flow.duration,\r\n              drawBar: drawBar,\r\n              drawLine: drawLine,\r\n              drawArea: drawArea,\r\n              cx: cx,\r\n              cy: cy,\r\n              xv: xv,\r\n              xForText: xForText,\r\n              yForText: yForText\r\n          });\r\n      }\r\n      if (duration && $$.isTabVisible()) {\r\n          // Only use transition if tab visible. See #938.\r\n          // transition should be derived from one transition\r\n          transition = d3.transition().duration(duration);\r\n          transitionsToWait = [];\r\n          [\r\n              $$.redrawBar(drawBar, true, transition),\r\n              $$.redrawLine(drawLine, true, transition),\r\n              $$.redrawArea(drawArea, true, transition),\r\n              $$.redrawCircle(cx, cy, true, transition),\r\n              $$.redrawText(xForText, yForText, options.flow, true, transition),\r\n              $$.redrawRegion(true, transition),\r\n              $$.redrawGrid(true, transition)\r\n          ].forEach(function (transitions) {\r\n              transitions.forEach(function (transition) {\r\n                  transitionsToWait.push(transition);\r\n              });\r\n          });\r\n          // Wait for end of transitions to call flow and onrendered callback\r\n          waitForDraw = $$.generateWait();\r\n          transitionsToWait.forEach(function (t) {\r\n              waitForDraw.add(t);\r\n          });\r\n          waitForDraw(function () {\r\n              if (flow) {\r\n                  flow();\r\n              }\r\n              if (config.onrendered) {\r\n                  config.onrendered.call($$);\r\n              }\r\n          });\r\n      }\r\n      else {\r\n          $$.redrawBar(drawBar);\r\n          $$.redrawLine(drawLine);\r\n          $$.redrawArea(drawArea);\r\n          $$.redrawCircle(cx, cy);\r\n          $$.redrawText(xForText, yForText, options.flow);\r\n          $$.redrawRegion();\r\n          $$.redrawGrid();\r\n          if (flow) {\r\n              flow();\r\n          }\r\n          if (config.onrendered) {\r\n              config.onrendered.call($$);\r\n          }\r\n      }\r\n      // update fadein condition\r\n      $$.mapToIds($$.data.targets).forEach(function (id) {\r\n          $$.withoutFadeIn[id] = true;\r\n      });\r\n  };\r\n  ChartInternal.prototype.updateAndRedraw = function (options) {\r\n      var $$ = this, config = $$.config, transitions;\r\n      options = options || {};\r\n      // same with redraw\r\n      options.withTransition = getOption(options, 'withTransition', true);\r\n      options.withTransform = getOption(options, 'withTransform', false);\r\n      options.withLegend = getOption(options, 'withLegend', false);\r\n      // NOT same with redraw\r\n      options.withUpdateXDomain = getOption(options, 'withUpdateXDomain', true);\r\n      options.withUpdateOrgXDomain = getOption(options, 'withUpdateOrgXDomain', true);\r\n      options.withTransitionForExit = false;\r\n      options.withTransitionForTransform = getOption(options, 'withTransitionForTransform', options.withTransition);\r\n      // MEMO: this needs to be called before updateLegend and it means this ALWAYS needs to be called)\r\n      $$.updateSizes();\r\n      // MEMO: called in updateLegend in redraw if withLegend\r\n      if (!(options.withLegend && config.legend_show)) {\r\n          transitions = $$.axis.generateTransitions(options.withTransitionForAxis ? config.transition_duration : 0);\r\n          // Update scales\r\n          $$.updateScales();\r\n          $$.updateSvgSize();\r\n          // Update g positions\r\n          $$.transformAll(options.withTransitionForTransform, transitions);\r\n      }\r\n      // Draw with new sizes & scales\r\n      $$.redraw(options, transitions);\r\n  };\r\n  ChartInternal.prototype.redrawWithoutRescale = function () {\r\n      this.redraw({\r\n          withY: false,\r\n          withSubchart: false,\r\n          withEventRect: false,\r\n          withTransitionForAxis: false\r\n      });\r\n  };\r\n  ChartInternal.prototype.isTimeSeries = function () {\r\n      return this.config.axis_x_type === 'timeseries';\r\n  };\r\n  ChartInternal.prototype.isCategorized = function () {\r\n      return this.config.axis_x_type.indexOf('categor') >= 0;\r\n  };\r\n  ChartInternal.prototype.isCustomX = function () {\r\n      var $$ = this, config = $$.config;\r\n      return !$$.isTimeSeries() && (config.data_x || notEmpty(config.data_xs));\r\n  };\r\n  ChartInternal.prototype.isTimeSeriesY = function () {\r\n      return this.config.axis_y_type === 'timeseries';\r\n  };\r\n  ChartInternal.prototype.getTranslate = function (target) {\r\n      var $$ = this, config = $$.config, x, y;\r\n      if (target === 'main') {\r\n          x = asHalfPixel($$.margin.left);\r\n          y = asHalfPixel($$.margin.top);\r\n      }\r\n      else if (target === 'context') {\r\n          x = asHalfPixel($$.margin2.left);\r\n          y = asHalfPixel($$.margin2.top);\r\n      }\r\n      else if (target === 'legend') {\r\n          x = $$.margin3.left;\r\n          y = $$.margin3.top;\r\n      }\r\n      else if (target === 'x') {\r\n          x = 0;\r\n          y = config.axis_rotated ? 0 : $$.height;\r\n      }\r\n      else if (target === 'y') {\r\n          x = 0;\r\n          y = config.axis_rotated ? $$.height : 0;\r\n      }\r\n      else if (target === 'y2') {\r\n          x = config.axis_rotated ? 0 : $$.width;\r\n          y = config.axis_rotated ? 1 : 0;\r\n      }\r\n      else if (target === 'subx') {\r\n          x = 0;\r\n          y = config.axis_rotated ? 0 : $$.height2;\r\n      }\r\n      else if (target === 'arc') {\r\n          x = $$.arcWidth / 2;\r\n          y = $$.arcHeight / 2 - ($$.hasType('gauge') ? 6 : 0); // to prevent wrong display of min and max label\r\n      }\r\n      return 'translate(' + x + ',' + y + ')';\r\n  };\r\n  ChartInternal.prototype.initialOpacity = function (d) {\r\n      return d.value !== null && this.withoutFadeIn[d.id] ? 1 : 0;\r\n  };\r\n  ChartInternal.prototype.initialOpacityForCircle = function (d) {\r\n      return d.value !== null && this.withoutFadeIn[d.id]\r\n          ? this.opacityForCircle(d)\r\n          : 0;\r\n  };\r\n  ChartInternal.prototype.opacityForCircle = function (d) {\r\n      var isPointShouldBeShown = isFunction(this.config.point_show)\r\n          ? this.config.point_show(d)\r\n          : this.config.point_show;\r\n      var opacity = isPointShouldBeShown || this.isStanfordType(d) ? 1 : 0;\r\n      return isValue(d.value) ? (this.isScatterType(d) ? 0.5 : opacity) : 0;\r\n  };\r\n  ChartInternal.prototype.opacityForText = function () {\r\n      return this.hasDataLabel() ? 1 : 0;\r\n  };\r\n  ChartInternal.prototype.xx = function (d) {\r\n      return d ? this.x(d.x) : null;\r\n  };\r\n  ChartInternal.prototype.xvCustom = function (d, xyValue) {\r\n      var $$ = this, value = xyValue ? d[xyValue] : d.value;\r\n      if ($$.isTimeSeries()) {\r\n          value = $$.parseDate(d.value);\r\n      }\r\n      else if ($$.isCategorized() && typeof d.value === 'string') {\r\n          value = $$.config.axis_x_categories.indexOf(d.value);\r\n      }\r\n      return Math.ceil($$.x(value));\r\n  };\r\n  ChartInternal.prototype.yvCustom = function (d, xyValue) {\r\n      var $$ = this, yScale = d.axis && d.axis === 'y2' ? $$.y2 : $$.y, value = xyValue ? d[xyValue] : d.value;\r\n      return Math.ceil(yScale(value));\r\n  };\r\n  ChartInternal.prototype.xv = function (d) {\r\n      var $$ = this, value = d.value;\r\n      if ($$.isTimeSeries()) {\r\n          value = $$.parseDate(d.value);\r\n      }\r\n      else if ($$.isCategorized() && typeof d.value === 'string') {\r\n          value = $$.config.axis_x_categories.indexOf(d.value);\r\n      }\r\n      return Math.ceil($$.x(value));\r\n  };\r\n  ChartInternal.prototype.yv = function (d) {\r\n      var $$ = this, yScale = d.axis && d.axis === 'y2' ? $$.y2 : $$.y;\r\n      return Math.ceil(yScale(d.value));\r\n  };\r\n  ChartInternal.prototype.subxx = function (d) {\r\n      return d ? this.subX(d.x) : null;\r\n  };\r\n  ChartInternal.prototype.transformMain = function (withTransition, transitions) {\r\n      var $$ = this, xAxis, yAxis, y2Axis;\r\n      if (transitions && transitions.axisX) {\r\n          xAxis = transitions.axisX;\r\n      }\r\n      else {\r\n          xAxis = $$.main.select('.' + CLASS.axisX);\r\n          if (withTransition) {\r\n              xAxis = xAxis.transition();\r\n          }\r\n      }\r\n      if (transitions && transitions.axisY) {\r\n          yAxis = transitions.axisY;\r\n      }\r\n      else {\r\n          yAxis = $$.main.select('.' + CLASS.axisY);\r\n          if (withTransition) {\r\n              yAxis = yAxis.transition();\r\n          }\r\n      }\r\n      if (transitions && transitions.axisY2) {\r\n          y2Axis = transitions.axisY2;\r\n      }\r\n      else {\r\n          y2Axis = $$.main.select('.' + CLASS.axisY2);\r\n          if (withTransition) {\r\n              y2Axis = y2Axis.transition();\r\n          }\r\n      }\r\n      (withTransition ? $$.main.transition() : $$.main).attr('transform', $$.getTranslate('main'));\r\n      xAxis.attr('transform', $$.getTranslate('x'));\r\n      yAxis.attr('transform', $$.getTranslate('y'));\r\n      y2Axis.attr('transform', $$.getTranslate('y2'));\r\n      $$.main\r\n          .select('.' + CLASS.chartArcs)\r\n          .attr('transform', $$.getTranslate('arc'));\r\n  };\r\n  ChartInternal.prototype.transformAll = function (withTransition, transitions) {\r\n      var $$ = this;\r\n      $$.transformMain(withTransition, transitions);\r\n      if ($$.config.subchart_show) {\r\n          $$.transformContext(withTransition, transitions);\r\n      }\r\n      if ($$.legend) {\r\n          $$.transformLegend(withTransition);\r\n      }\r\n  };\r\n  ChartInternal.prototype.updateSvgSize = function () {\r\n      var $$ = this, brush = $$.svg.select(\".\" + CLASS.brush + \" .overlay\");\r\n      $$.svg.attr('width', $$.currentWidth).attr('height', $$.currentHeight);\r\n      $$.svg\r\n          .selectAll(['#' + $$.clipId, '#' + $$.clipIdForGrid])\r\n          .select('rect')\r\n          .attr('width', $$.width)\r\n          .attr('height', $$.height);\r\n      $$.svg\r\n          .select('#' + $$.clipIdForXAxis)\r\n          .select('rect')\r\n          .attr('x', $$.getXAxisClipX.bind($$))\r\n          .attr('y', $$.getXAxisClipY.bind($$))\r\n          .attr('width', $$.getXAxisClipWidth.bind($$))\r\n          .attr('height', $$.getXAxisClipHeight.bind($$));\r\n      $$.svg\r\n          .select('#' + $$.clipIdForYAxis)\r\n          .select('rect')\r\n          .attr('x', $$.getYAxisClipX.bind($$))\r\n          .attr('y', $$.getYAxisClipY.bind($$))\r\n          .attr('width', $$.getYAxisClipWidth.bind($$))\r\n          .attr('height', $$.getYAxisClipHeight.bind($$));\r\n      $$.svg\r\n          .select('#' + $$.clipIdForSubchart)\r\n          .select('rect')\r\n          .attr('width', $$.width)\r\n          .attr('height', (brush.size() && brush.attr('height')) || 0);\r\n      // MEMO: parent div's height will be bigger than svg when <!DOCTYPE html>\r\n      $$.selectChart.style('max-height', $$.currentHeight + 'px');\r\n  };\r\n  ChartInternal.prototype.updateDimension = function (withoutAxis) {\r\n      var $$ = this;\r\n      if (!withoutAxis) {\r\n          if ($$.config.axis_rotated) {\r\n              $$.axes.x.call($$.xAxis);\r\n              $$.axes.subx.call($$.subXAxis);\r\n          }\r\n          else {\r\n              $$.axes.y.call($$.yAxis);\r\n              $$.axes.y2.call($$.y2Axis);\r\n          }\r\n      }\r\n      $$.updateSizes();\r\n      $$.updateScales();\r\n      $$.updateSvgSize();\r\n      $$.transformAll(false);\r\n  };\r\n  ChartInternal.prototype.observeInserted = function (selection) {\r\n      var $$ = this, observer;\r\n      if (typeof MutationObserver === 'undefined') {\r\n          window.console.error('MutationObserver not defined.');\r\n          return;\r\n      }\r\n      observer = new MutationObserver(function (mutations) {\r\n          mutations.forEach(function (mutation) {\r\n              if (mutation.type === 'childList' && mutation.previousSibling) {\r\n                  observer.disconnect();\r\n                  // need to wait for completion of load because size calculation requires the actual sizes determined after that completion\r\n                  $$.intervalForObserveInserted = window.setInterval(function () {\r\n                      // parentNode will NOT be null when completed\r\n                      if (selection.node().parentNode) {\r\n                          window.clearInterval($$.intervalForObserveInserted);\r\n                          $$.updateDimension();\r\n                          if ($$.brush) {\r\n                              $$.brush.update();\r\n                          }\r\n                          $$.config.oninit.call($$);\r\n                          $$.redraw({\r\n                              withTransform: true,\r\n                              withUpdateXDomain: true,\r\n                              withUpdateOrgXDomain: true,\r\n                              withTransition: false,\r\n                              withTransitionForTransform: false,\r\n                              withLegend: true\r\n                          });\r\n                          selection.transition().style('opacity', 1);\r\n                      }\r\n                  }, 10);\r\n              }\r\n          });\r\n      });\r\n      observer.observe(selection.node(), {\r\n          attributes: true,\r\n          childList: true,\r\n          characterData: true\r\n      });\r\n  };\r\n  /**\r\n   * Binds handlers to the window resize event.\r\n   */\r\n  ChartInternal.prototype.bindResize = function () {\r\n      var $$ = this, config = $$.config;\r\n      $$.resizeFunction = $$.generateResize(); // need to call .remove\r\n      $$.resizeFunction.add(function () {\r\n          config.onresize.call($$);\r\n      });\r\n      if (config.resize_auto) {\r\n          $$.resizeFunction.add(function () {\r\n              if ($$.resizeTimeout !== undefined) {\r\n                  window.clearTimeout($$.resizeTimeout);\r\n              }\r\n              $$.resizeTimeout = window.setTimeout(function () {\r\n                  delete $$.resizeTimeout;\r\n                  $$.updateAndRedraw({\r\n                      withUpdateXDomain: false,\r\n                      withUpdateOrgXDomain: false,\r\n                      withTransition: false,\r\n                      withTransitionForTransform: false,\r\n                      withLegend: true\r\n                  });\r\n                  if ($$.brush) {\r\n                      $$.brush.update();\r\n                  }\r\n              }, 100);\r\n          });\r\n      }\r\n      $$.resizeFunction.add(function () {\r\n          config.onresized.call($$);\r\n      });\r\n      $$.resizeIfElementDisplayed = function () {\r\n          // if element not displayed skip it\r\n          if ($$.api == null || !$$.api.element.offsetParent) {\r\n              return;\r\n          }\r\n          $$.resizeFunction();\r\n      };\r\n      window.addEventListener('resize', $$.resizeIfElementDisplayed, false);\r\n  };\r\n  /**\r\n   * Binds handlers to the window focus event.\r\n   */\r\n  ChartInternal.prototype.bindWindowFocus = function () {\r\n      var _this = this;\r\n      if (this.windowFocusHandler) {\r\n          // The handler is already set\r\n          return;\r\n      }\r\n      this.windowFocusHandler = function () {\r\n          _this.redraw();\r\n      };\r\n      window.addEventListener('focus', this.windowFocusHandler);\r\n  };\r\n  /**\r\n   * Unbinds from the window focus event.\r\n   */\r\n  ChartInternal.prototype.unbindWindowFocus = function () {\r\n      window.removeEventListener('focus', this.windowFocusHandler);\r\n      delete this.windowFocusHandler;\r\n  };\r\n  ChartInternal.prototype.generateResize = function () {\r\n      var resizeFunctions = [];\r\n      function callResizeFunctions() {\r\n          resizeFunctions.forEach(function (f) {\r\n              f();\r\n          });\r\n      }\r\n      callResizeFunctions.add = function (f) {\r\n          resizeFunctions.push(f);\r\n      };\r\n      callResizeFunctions.remove = function (f) {\r\n          for (var i = 0; i < resizeFunctions.length; i++) {\r\n              if (resizeFunctions[i] === f) {\r\n                  resizeFunctions.splice(i, 1);\r\n                  break;\r\n              }\r\n          }\r\n      };\r\n      return callResizeFunctions;\r\n  };\r\n  ChartInternal.prototype.endall = function (transition, callback) {\r\n      var n = 0;\r\n      transition\r\n          .each(function () {\r\n          ++n;\r\n      })\r\n          .on('end', function () {\r\n          if (!--n) {\r\n              callback.apply(this, arguments);\r\n          }\r\n      });\r\n  };\r\n  ChartInternal.prototype.generateWait = function () {\r\n      var $$ = this;\r\n      var transitionsToWait = [], f = function (callback) {\r\n          var timer = setInterval(function () {\r\n              if (!$$.isTabVisible()) {\r\n                  return;\r\n              }\r\n              var done = 0;\r\n              transitionsToWait.forEach(function (t) {\r\n                  if (t.empty()) {\r\n                      done += 1;\r\n                      return;\r\n                  }\r\n                  try {\r\n                      t.transition();\r\n                  }\r\n                  catch (e) {\r\n                      done += 1;\r\n                  }\r\n              });\r\n              if (done === transitionsToWait.length) {\r\n                  clearInterval(timer);\r\n                  if (callback) {\r\n                      callback();\r\n                  }\r\n              }\r\n          }, 50);\r\n      };\r\n      f.add = function (transition) {\r\n          transitionsToWait.push(transition);\r\n      };\r\n      return f;\r\n  };\r\n  ChartInternal.prototype.parseDate = function (date) {\r\n      var $$ = this, parsedDate;\r\n      if (date instanceof Date) {\r\n          parsedDate = date;\r\n      }\r\n      else if (typeof date === 'string') {\r\n          parsedDate = $$.dataTimeParse(date);\r\n      }\r\n      else if (typeof date === 'object') {\r\n          parsedDate = new Date(+date);\r\n      }\r\n      else if (typeof date === 'number' && !isNaN(date)) {\r\n          parsedDate = new Date(+date);\r\n      }\r\n      if (!parsedDate || isNaN(+parsedDate)) {\r\n          window.console.error(\"Failed to parse x '\" + date + \"' to Date object\");\r\n      }\r\n      return parsedDate;\r\n  };\r\n  ChartInternal.prototype.isTabVisible = function () {\r\n      return !document.hidden;\r\n  };\r\n  ChartInternal.prototype.getPathBox = getPathBox;\r\n  ChartInternal.prototype.CLASS = CLASS;\n\n  /* jshint ignore:start */\r\n  (function () {\r\n      if (!('SVGPathSeg' in window)) {\r\n          // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSeg\r\n          window.SVGPathSeg = function (type, typeAsLetter, owningPathSegList) {\r\n              this.pathSegType = type;\r\n              this.pathSegTypeAsLetter = typeAsLetter;\r\n              this._owningPathSegList = owningPathSegList;\r\n          };\r\n          window.SVGPathSeg.prototype.classname = 'SVGPathSeg';\r\n          window.SVGPathSeg.PATHSEG_UNKNOWN = 0;\r\n          window.SVGPathSeg.PATHSEG_CLOSEPATH = 1;\r\n          window.SVGPathSeg.PATHSEG_MOVETO_ABS = 2;\r\n          window.SVGPathSeg.PATHSEG_MOVETO_REL = 3;\r\n          window.SVGPathSeg.PATHSEG_LINETO_ABS = 4;\r\n          window.SVGPathSeg.PATHSEG_LINETO_REL = 5;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS = 6;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL = 7;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS = 8;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL = 9;\r\n          window.SVGPathSeg.PATHSEG_ARC_ABS = 10;\r\n          window.SVGPathSeg.PATHSEG_ARC_REL = 11;\r\n          window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS = 12;\r\n          window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL = 13;\r\n          window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS = 14;\r\n          window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL = 15;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS = 16;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL = 17;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS = 18;\r\n          window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL = 19;\r\n          // Notify owning PathSegList on any changes so they can be synchronized back to the path element.\r\n          window.SVGPathSeg.prototype._segmentChanged = function () {\r\n              if (this._owningPathSegList)\r\n                  this._owningPathSegList.segmentChanged(this);\r\n          };\r\n          window.SVGPathSegClosePath = function (owningPathSegList) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CLOSEPATH, 'z', owningPathSegList);\r\n          };\r\n          window.SVGPathSegClosePath.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegClosePath.prototype.toString = function () {\r\n              return '[object SVGPathSegClosePath]';\r\n          };\r\n          window.SVGPathSegClosePath.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter;\r\n          };\r\n          window.SVGPathSegClosePath.prototype.clone = function () {\r\n              return new window.SVGPathSegClosePath(undefined);\r\n          };\r\n          window.SVGPathSegMovetoAbs = function (owningPathSegList, x, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_ABS, 'M', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegMovetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegMovetoAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegMovetoAbs]';\r\n          };\r\n          window.SVGPathSegMovetoAbs.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegMovetoAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegMovetoAbs(undefined, this._x, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegMovetoAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegMovetoRel = function (owningPathSegList, x, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_MOVETO_REL, 'm', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegMovetoRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegMovetoRel.prototype.toString = function () {\r\n              return '[object SVGPathSegMovetoRel]';\r\n          };\r\n          window.SVGPathSegMovetoRel.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegMovetoRel.prototype.clone = function () {\r\n              return new window.SVGPathSegMovetoRel(undefined, this._x, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegMovetoRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegMovetoRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegLinetoAbs = function (owningPathSegList, x, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_ABS, 'L', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegLinetoAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegLinetoAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegLinetoAbs]';\r\n          };\r\n          window.SVGPathSegLinetoAbs.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegLinetoAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegLinetoAbs(undefined, this._x, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegLinetoAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegLinetoRel = function (owningPathSegList, x, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_REL, 'l', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegLinetoRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegLinetoRel.prototype.toString = function () {\r\n              return '[object SVGPathSegLinetoRel]';\r\n          };\r\n          window.SVGPathSegLinetoRel.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegLinetoRel.prototype.clone = function () {\r\n              return new window.SVGPathSegLinetoRel(undefined, this._x, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegLinetoRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegLinetoRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoCubicAbs = function (owningPathSegList, x, y, x1, y1, x2, y2) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS, 'C', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._x1 = x1;\r\n              this._y1 = y1;\r\n              this._x2 = x2;\r\n              this._y2 = y2;\r\n          };\r\n          window.SVGPathSegCurvetoCubicAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoCubicAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoCubicAbs]';\r\n          };\r\n          window.SVGPathSegCurvetoCubicAbs.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._x1 +\r\n                  ' ' +\r\n                  this._y1 +\r\n                  ' ' +\r\n                  this._x2 +\r\n                  ' ' +\r\n                  this._y2 +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegCurvetoCubicAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoCubicAbs(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x1', {\r\n              get: function () {\r\n                  return this._x1;\r\n              },\r\n              set: function (x1) {\r\n                  this._x1 = x1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y1', {\r\n              get: function () {\r\n                  return this._y1;\r\n              },\r\n              set: function (y1) {\r\n                  this._y1 = y1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'x2', {\r\n              get: function () {\r\n                  return this._x2;\r\n              },\r\n              set: function (x2) {\r\n                  this._x2 = x2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype, 'y2', {\r\n              get: function () {\r\n                  return this._y2;\r\n              },\r\n              set: function (y2) {\r\n                  this._y2 = y2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoCubicRel = function (owningPathSegList, x, y, x1, y1, x2, y2) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL, 'c', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._x1 = x1;\r\n              this._y1 = y1;\r\n              this._x2 = x2;\r\n              this._y2 = y2;\r\n          };\r\n          window.SVGPathSegCurvetoCubicRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoCubicRel.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoCubicRel]';\r\n          };\r\n          window.SVGPathSegCurvetoCubicRel.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._x1 +\r\n                  ' ' +\r\n                  this._y1 +\r\n                  ' ' +\r\n                  this._x2 +\r\n                  ' ' +\r\n                  this._y2 +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegCurvetoCubicRel.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoCubicRel(undefined, this._x, this._y, this._x1, this._y1, this._x2, this._y2);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x1', {\r\n              get: function () {\r\n                  return this._x1;\r\n              },\r\n              set: function (x1) {\r\n                  this._x1 = x1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y1', {\r\n              get: function () {\r\n                  return this._y1;\r\n              },\r\n              set: function (y1) {\r\n                  this._y1 = y1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'x2', {\r\n              get: function () {\r\n                  return this._x2;\r\n              },\r\n              set: function (x2) {\r\n                  this._x2 = x2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype, 'y2', {\r\n              get: function () {\r\n                  return this._y2;\r\n              },\r\n              set: function (y2) {\r\n                  this._y2 = y2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoQuadraticAbs = function (owningPathSegList, x, y, x1, y1) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS, 'Q', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._x1 = x1;\r\n              this._y1 = y1;\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoQuadraticAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoQuadraticAbs]';\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._x1 +\r\n                  ' ' +\r\n                  this._y1 +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoQuadraticAbs(undefined, this._x, this._y, this._x1, this._y1);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'x1', {\r\n              get: function () {\r\n                  return this._x1;\r\n              },\r\n              set: function (x1) {\r\n                  this._x1 = x1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype, 'y1', {\r\n              get: function () {\r\n                  return this._y1;\r\n              },\r\n              set: function (y1) {\r\n                  this._y1 = y1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoQuadraticRel = function (owningPathSegList, x, y, x1, y1) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL, 'q', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._x1 = x1;\r\n              this._y1 = y1;\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoQuadraticRel.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoQuadraticRel]';\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._x1 +\r\n                  ' ' +\r\n                  this._y1 +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticRel.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoQuadraticRel(undefined, this._x, this._y, this._x1, this._y1);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'x1', {\r\n              get: function () {\r\n                  return this._x1;\r\n              },\r\n              set: function (x1) {\r\n                  this._x1 = x1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype, 'y1', {\r\n              get: function () {\r\n                  return this._y1;\r\n              },\r\n              set: function (y1) {\r\n                  this._y1 = y1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegArcAbs = function (owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_ABS, 'A', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._r1 = r1;\r\n              this._r2 = r2;\r\n              this._angle = angle;\r\n              this._largeArcFlag = largeArcFlag;\r\n              this._sweepFlag = sweepFlag;\r\n          };\r\n          window.SVGPathSegArcAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegArcAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegArcAbs]';\r\n          };\r\n          window.SVGPathSegArcAbs.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._r1 +\r\n                  ' ' +\r\n                  this._r2 +\r\n                  ' ' +\r\n                  this._angle +\r\n                  ' ' +\r\n                  (this._largeArcFlag ? '1' : '0') +\r\n                  ' ' +\r\n                  (this._sweepFlag ? '1' : '0') +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegArcAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegArcAbs(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'r1', {\r\n              get: function () {\r\n                  return this._r1;\r\n              },\r\n              set: function (r1) {\r\n                  this._r1 = r1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'r2', {\r\n              get: function () {\r\n                  return this._r2;\r\n              },\r\n              set: function (r2) {\r\n                  this._r2 = r2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'angle', {\r\n              get: function () {\r\n                  return this._angle;\r\n              },\r\n              set: function (angle) {\r\n                  this._angle = angle;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'largeArcFlag', {\r\n              get: function () {\r\n                  return this._largeArcFlag;\r\n              },\r\n              set: function (largeArcFlag) {\r\n                  this._largeArcFlag = largeArcFlag;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcAbs.prototype, 'sweepFlag', {\r\n              get: function () {\r\n                  return this._sweepFlag;\r\n              },\r\n              set: function (sweepFlag) {\r\n                  this._sweepFlag = sweepFlag;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegArcRel = function (owningPathSegList, x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_ARC_REL, 'a', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._r1 = r1;\r\n              this._r2 = r2;\r\n              this._angle = angle;\r\n              this._largeArcFlag = largeArcFlag;\r\n              this._sweepFlag = sweepFlag;\r\n          };\r\n          window.SVGPathSegArcRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegArcRel.prototype.toString = function () {\r\n              return '[object SVGPathSegArcRel]';\r\n          };\r\n          window.SVGPathSegArcRel.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._r1 +\r\n                  ' ' +\r\n                  this._r2 +\r\n                  ' ' +\r\n                  this._angle +\r\n                  ' ' +\r\n                  (this._largeArcFlag ? '1' : '0') +\r\n                  ' ' +\r\n                  (this._sweepFlag ? '1' : '0') +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegArcRel.prototype.clone = function () {\r\n              return new window.SVGPathSegArcRel(undefined, this._x, this._y, this._r1, this._r2, this._angle, this._largeArcFlag, this._sweepFlag);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'r1', {\r\n              get: function () {\r\n                  return this._r1;\r\n              },\r\n              set: function (r1) {\r\n                  this._r1 = r1;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'r2', {\r\n              get: function () {\r\n                  return this._r2;\r\n              },\r\n              set: function (r2) {\r\n                  this._r2 = r2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'angle', {\r\n              get: function () {\r\n                  return this._angle;\r\n              },\r\n              set: function (angle) {\r\n                  this._angle = angle;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'largeArcFlag', {\r\n              get: function () {\r\n                  return this._largeArcFlag;\r\n              },\r\n              set: function (largeArcFlag) {\r\n                  this._largeArcFlag = largeArcFlag;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegArcRel.prototype, 'sweepFlag', {\r\n              get: function () {\r\n                  return this._sweepFlag;\r\n              },\r\n              set: function (sweepFlag) {\r\n                  this._sweepFlag = sweepFlag;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegLinetoHorizontalAbs = function (owningPathSegList, x) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS, 'H', owningPathSegList);\r\n              this._x = x;\r\n          };\r\n          window.SVGPathSegLinetoHorizontalAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegLinetoHorizontalAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegLinetoHorizontalAbs]';\r\n          };\r\n          window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x;\r\n          };\r\n          window.SVGPathSegLinetoHorizontalAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegLinetoHorizontalAbs(undefined, this._x);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegLinetoHorizontalRel = function (owningPathSegList, x) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL, 'h', owningPathSegList);\r\n              this._x = x;\r\n          };\r\n          window.SVGPathSegLinetoHorizontalRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegLinetoHorizontalRel.prototype.toString = function () {\r\n              return '[object SVGPathSegLinetoHorizontalRel]';\r\n          };\r\n          window.SVGPathSegLinetoHorizontalRel.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x;\r\n          };\r\n          window.SVGPathSegLinetoHorizontalRel.prototype.clone = function () {\r\n              return new window.SVGPathSegLinetoHorizontalRel(undefined, this._x);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegLinetoVerticalAbs = function (owningPathSegList, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS, 'V', owningPathSegList);\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegLinetoVerticalAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegLinetoVerticalAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegLinetoVerticalAbs]';\r\n          };\r\n          window.SVGPathSegLinetoVerticalAbs.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegLinetoVerticalAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegLinetoVerticalAbs(undefined, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegLinetoVerticalRel = function (owningPathSegList, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL, 'v', owningPathSegList);\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegLinetoVerticalRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegLinetoVerticalRel.prototype.toString = function () {\r\n              return '[object SVGPathSegLinetoVerticalRel]';\r\n          };\r\n          window.SVGPathSegLinetoVerticalRel.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegLinetoVerticalRel.prototype.clone = function () {\r\n              return new window.SVGPathSegLinetoVerticalRel(undefined, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoCubicSmoothAbs = function (owningPathSegList, x, y, x2, y2) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS, 'S', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._x2 = x2;\r\n              this._y2 = y2;\r\n          };\r\n          window.SVGPathSegCurvetoCubicSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoCubicSmoothAbs]';\r\n          };\r\n          window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._x2 +\r\n                  ' ' +\r\n                  this._y2 +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, this._x, this._y, this._x2, this._y2);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'x2', {\r\n              get: function () {\r\n                  return this._x2;\r\n              },\r\n              set: function (x2) {\r\n                  this._x2 = x2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype, 'y2', {\r\n              get: function () {\r\n                  return this._y2;\r\n              },\r\n              set: function (y2) {\r\n                  this._y2 = y2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoCubicSmoothRel = function (owningPathSegList, x, y, x2, y2) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL, 's', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n              this._x2 = x2;\r\n              this._y2 = y2;\r\n          };\r\n          window.SVGPathSegCurvetoCubicSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoCubicSmoothRel]';\r\n          };\r\n          window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString = function () {\r\n              return (this.pathSegTypeAsLetter +\r\n                  ' ' +\r\n                  this._x2 +\r\n                  ' ' +\r\n                  this._y2 +\r\n                  ' ' +\r\n                  this._x +\r\n                  ' ' +\r\n                  this._y);\r\n          };\r\n          window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, this._x, this._y, this._x2, this._y2);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'x2', {\r\n              get: function () {\r\n                  return this._x2;\r\n              },\r\n              set: function (x2) {\r\n                  this._x2 = x2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype, 'y2', {\r\n              get: function () {\r\n                  return this._y2;\r\n              },\r\n              set: function (y2) {\r\n                  this._y2 = y2;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoQuadraticSmoothAbs = function (owningPathSegList, x, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS, 'T', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoQuadraticSmoothAbs]';\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, this._x, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          window.SVGPathSegCurvetoQuadraticSmoothRel = function (owningPathSegList, x, y) {\r\n              window.SVGPathSeg.call(this, window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL, 't', owningPathSegList);\r\n              this._x = x;\r\n              this._y = y;\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticSmoothRel.prototype = Object.create(window.SVGPathSeg.prototype);\r\n          window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString = function () {\r\n              return '[object SVGPathSegCurvetoQuadraticSmoothRel]';\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString = function () {\r\n              return this.pathSegTypeAsLetter + ' ' + this._x + ' ' + this._y;\r\n          };\r\n          window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone = function () {\r\n              return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, this._x, this._y);\r\n          };\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, 'x', {\r\n              get: function () {\r\n                  return this._x;\r\n              },\r\n              set: function (x) {\r\n                  this._x = x;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype, 'y', {\r\n              get: function () {\r\n                  return this._y;\r\n              },\r\n              set: function (y) {\r\n                  this._y = y;\r\n                  this._segmentChanged();\r\n              },\r\n              enumerable: true\r\n          });\r\n          // Add createSVGPathSeg* functions to window.SVGPathElement.\r\n          // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-Interfacewindow.SVGPathElement.\r\n          window.SVGPathElement.prototype.createSVGPathSegClosePath = function () {\r\n              return new window.SVGPathSegClosePath(undefined);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegMovetoAbs = function (x, y) {\r\n              return new window.SVGPathSegMovetoAbs(undefined, x, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegMovetoRel = function (x, y) {\r\n              return new window.SVGPathSegMovetoRel(undefined, x, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegLinetoAbs = function (x, y) {\r\n              return new window.SVGPathSegLinetoAbs(undefined, x, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegLinetoRel = function (x, y) {\r\n              return new window.SVGPathSegLinetoRel(undefined, x, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs = function (x, y, x1, y1, x2, y2) {\r\n              return new window.SVGPathSegCurvetoCubicAbs(undefined, x, y, x1, y1, x2, y2);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel = function (x, y, x1, y1, x2, y2) {\r\n              return new window.SVGPathSegCurvetoCubicRel(undefined, x, y, x1, y1, x2, y2);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs = function (x, y, x1, y1) {\r\n              return new window.SVGPathSegCurvetoQuadraticAbs(undefined, x, y, x1, y1);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel = function (x, y, x1, y1) {\r\n              return new window.SVGPathSegCurvetoQuadraticRel(undefined, x, y, x1, y1);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegArcAbs = function (x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\r\n              return new window.SVGPathSegArcAbs(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegArcRel = function (x, y, r1, r2, angle, largeArcFlag, sweepFlag) {\r\n              return new window.SVGPathSegArcRel(undefined, x, y, r1, r2, angle, largeArcFlag, sweepFlag);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs = function (x) {\r\n              return new window.SVGPathSegLinetoHorizontalAbs(undefined, x);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel = function (x) {\r\n              return new window.SVGPathSegLinetoHorizontalRel(undefined, x);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs = function (y) {\r\n              return new window.SVGPathSegLinetoVerticalAbs(undefined, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel = function (y) {\r\n              return new window.SVGPathSegLinetoVerticalRel(undefined, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs = function (x, y, x2, y2) {\r\n              return new window.SVGPathSegCurvetoCubicSmoothAbs(undefined, x, y, x2, y2);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel = function (x, y, x2, y2) {\r\n              return new window.SVGPathSegCurvetoCubicSmoothRel(undefined, x, y, x2, y2);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs = function (x, y) {\r\n              return new window.SVGPathSegCurvetoQuadraticSmoothAbs(undefined, x, y);\r\n          };\r\n          window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel = function (x, y) {\r\n              return new window.SVGPathSegCurvetoQuadraticSmoothRel(undefined, x, y);\r\n          };\r\n          if (!('getPathSegAtLength' in window.SVGPathElement.prototype)) {\r\n              // Add getPathSegAtLength to SVGPathElement.\r\n              // Spec: https://www.w3.org/TR/SVG11/single-page.html#paths-__svg__SVGPathElement__getPathSegAtLength\r\n              // This polyfill requires SVGPathElement.getTotalLength to implement the distance-along-a-path algorithm.\r\n              window.SVGPathElement.prototype.getPathSegAtLength = function (distance) {\r\n                  if (distance === undefined || !isFinite(distance))\r\n                      throw 'Invalid arguments.';\r\n                  var measurementElement = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n                  measurementElement.setAttribute('d', this.getAttribute('d'));\r\n                  var lastPathSegment = measurementElement.pathSegList.numberOfItems - 1;\r\n                  // If the path is empty, return 0.\r\n                  if (lastPathSegment <= 0)\r\n                      return 0;\r\n                  do {\r\n                      measurementElement.pathSegList.removeItem(lastPathSegment);\r\n                      if (distance > measurementElement.getTotalLength())\r\n                          break;\r\n                      lastPathSegment--;\r\n                  } while (lastPathSegment > 0);\r\n                  return lastPathSegment;\r\n              };\r\n          }\r\n      }\r\n      if (!('SVGPathSegList' in window)) {\r\n          // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGPathSegList\r\n          window.SVGPathSegList = function (pathElement) {\r\n              this._pathElement = pathElement;\r\n              this._list = this._parsePath(this._pathElement.getAttribute('d'));\r\n              // Use a MutationObserver to catch changes to the path's \"d\" attribute.\r\n              this._mutationObserverConfig = {\r\n                  attributes: true,\r\n                  attributeFilter: ['d']\r\n              };\r\n              this._pathElementMutationObserver = new MutationObserver(this._updateListFromPathMutations.bind(this));\r\n              this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);\r\n          };\r\n          window.SVGPathSegList.prototype.classname = 'SVGPathSegList';\r\n          Object.defineProperty(window.SVGPathSegList.prototype, 'numberOfItems', {\r\n              get: function () {\r\n                  this._checkPathSynchronizedToList();\r\n                  return this._list.length;\r\n              },\r\n              enumerable: true\r\n          });\r\n          // Add the pathSegList accessors to window.SVGPathElement.\r\n          // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-InterfaceSVGAnimatedPathData\r\n          Object.defineProperty(window.SVGPathElement.prototype, 'pathSegList', {\r\n              get: function () {\r\n                  if (!this._pathSegList)\r\n                      this._pathSegList = new window.SVGPathSegList(this);\r\n                  return this._pathSegList;\r\n              },\r\n              enumerable: true\r\n          });\r\n          // FIXME: The following are not implemented and simply return window.SVGPathElement.pathSegList.\r\n          Object.defineProperty(window.SVGPathElement.prototype, 'normalizedPathSegList', {\r\n              get: function () {\r\n                  return this.pathSegList;\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathElement.prototype, 'animatedPathSegList', {\r\n              get: function () {\r\n                  return this.pathSegList;\r\n              },\r\n              enumerable: true\r\n          });\r\n          Object.defineProperty(window.SVGPathElement.prototype, 'animatedNormalizedPathSegList', {\r\n              get: function () {\r\n                  return this.pathSegList;\r\n              },\r\n              enumerable: true\r\n          });\r\n          // Process any pending mutations to the path element and update the list as needed.\r\n          // This should be the first call of all public functions and is needed because\r\n          // MutationObservers are not synchronous so we can have pending asynchronous mutations.\r\n          window.SVGPathSegList.prototype._checkPathSynchronizedToList = function () {\r\n              this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords());\r\n          };\r\n          window.SVGPathSegList.prototype._updateListFromPathMutations = function (mutationRecords) {\r\n              if (!this._pathElement)\r\n                  return;\r\n              var hasPathMutations = false;\r\n              mutationRecords.forEach(function (record) {\r\n                  if (record.attributeName == 'd')\r\n                      hasPathMutations = true;\r\n              });\r\n              if (hasPathMutations)\r\n                  this._list = this._parsePath(this._pathElement.getAttribute('d'));\r\n          };\r\n          // Serialize the list and update the path's 'd' attribute.\r\n          window.SVGPathSegList.prototype._writeListToPath = function () {\r\n              this._pathElementMutationObserver.disconnect();\r\n              this._pathElement.setAttribute('d', window.SVGPathSegList._pathSegArrayAsString(this._list));\r\n              this._pathElementMutationObserver.observe(this._pathElement, this._mutationObserverConfig);\r\n          };\r\n          // When a path segment changes the list needs to be synchronized back to the path element.\r\n          window.SVGPathSegList.prototype.segmentChanged = function (pathSeg) {\r\n              this._writeListToPath();\r\n          };\r\n          window.SVGPathSegList.prototype.clear = function () {\r\n              this._checkPathSynchronizedToList();\r\n              this._list.forEach(function (pathSeg) {\r\n                  pathSeg._owningPathSegList = null;\r\n              });\r\n              this._list = [];\r\n              this._writeListToPath();\r\n          };\r\n          window.SVGPathSegList.prototype.initialize = function (newItem) {\r\n              this._checkPathSynchronizedToList();\r\n              this._list = [newItem];\r\n              newItem._owningPathSegList = this;\r\n              this._writeListToPath();\r\n              return newItem;\r\n          };\r\n          window.SVGPathSegList.prototype._checkValidIndex = function (index) {\r\n              if (isNaN(index) || index < 0 || index >= this.numberOfItems)\r\n                  throw 'INDEX_SIZE_ERR';\r\n          };\r\n          window.SVGPathSegList.prototype.getItem = function (index) {\r\n              this._checkPathSynchronizedToList();\r\n              this._checkValidIndex(index);\r\n              return this._list[index];\r\n          };\r\n          window.SVGPathSegList.prototype.insertItemBefore = function (newItem, index) {\r\n              this._checkPathSynchronizedToList();\r\n              // Spec: If the index is greater than or equal to numberOfItems, then the new item is appended to the end of the list.\r\n              if (index > this.numberOfItems)\r\n                  index = this.numberOfItems;\r\n              if (newItem._owningPathSegList) {\r\n                  // SVG2 spec says to make a copy.\r\n                  newItem = newItem.clone();\r\n              }\r\n              this._list.splice(index, 0, newItem);\r\n              newItem._owningPathSegList = this;\r\n              this._writeListToPath();\r\n              return newItem;\r\n          };\r\n          window.SVGPathSegList.prototype.replaceItem = function (newItem, index) {\r\n              this._checkPathSynchronizedToList();\r\n              if (newItem._owningPathSegList) {\r\n                  // SVG2 spec says to make a copy.\r\n                  newItem = newItem.clone();\r\n              }\r\n              this._checkValidIndex(index);\r\n              this._list[index] = newItem;\r\n              newItem._owningPathSegList = this;\r\n              this._writeListToPath();\r\n              return newItem;\r\n          };\r\n          window.SVGPathSegList.prototype.removeItem = function (index) {\r\n              this._checkPathSynchronizedToList();\r\n              this._checkValidIndex(index);\r\n              var item = this._list[index];\r\n              this._list.splice(index, 1);\r\n              this._writeListToPath();\r\n              return item;\r\n          };\r\n          window.SVGPathSegList.prototype.appendItem = function (newItem) {\r\n              this._checkPathSynchronizedToList();\r\n              if (newItem._owningPathSegList) {\r\n                  // SVG2 spec says to make a copy.\r\n                  newItem = newItem.clone();\r\n              }\r\n              this._list.push(newItem);\r\n              newItem._owningPathSegList = this;\r\n              // TODO: Optimize this to just append to the existing attribute.\r\n              this._writeListToPath();\r\n              return newItem;\r\n          };\r\n          window.SVGPathSegList._pathSegArrayAsString = function (pathSegArray) {\r\n              var string = '';\r\n              var first = true;\r\n              pathSegArray.forEach(function (pathSeg) {\r\n                  if (first) {\r\n                      first = false;\r\n                      string += pathSeg._asPathString();\r\n                  }\r\n                  else {\r\n                      string += ' ' + pathSeg._asPathString();\r\n                  }\r\n              });\r\n              return string;\r\n          };\r\n          // This closely follows SVGPathParser::parsePath from Source/core/svg/SVGPathParser.cpp.\r\n          window.SVGPathSegList.prototype._parsePath = function (string) {\r\n              if (!string || string.length == 0)\r\n                  return [];\r\n              var owningPathSegList = this;\r\n              var Builder = function () {\r\n                  this.pathSegList = [];\r\n              };\r\n              Builder.prototype.appendSegment = function (pathSeg) {\r\n                  this.pathSegList.push(pathSeg);\r\n              };\r\n              var Source = function (string) {\r\n                  this._string = string;\r\n                  this._currentIndex = 0;\r\n                  this._endIndex = this._string.length;\r\n                  this._previousCommand = window.SVGPathSeg.PATHSEG_UNKNOWN;\r\n                  this._skipOptionalSpaces();\r\n              };\r\n              Source.prototype._isCurrentSpace = function () {\r\n                  var character = this._string[this._currentIndex];\r\n                  return (character <= ' ' &&\r\n                      (character == ' ' ||\r\n                          character == '\\n' ||\r\n                          character == '\\t' ||\r\n                          character == '\\r' ||\r\n                          character == '\\f'));\r\n              };\r\n              Source.prototype._skipOptionalSpaces = function () {\r\n                  while (this._currentIndex < this._endIndex && this._isCurrentSpace())\r\n                      this._currentIndex++;\r\n                  return this._currentIndex < this._endIndex;\r\n              };\r\n              Source.prototype._skipOptionalSpacesOrDelimiter = function () {\r\n                  if (this._currentIndex < this._endIndex &&\r\n                      !this._isCurrentSpace() &&\r\n                      this._string.charAt(this._currentIndex) != ',')\r\n                      return false;\r\n                  if (this._skipOptionalSpaces()) {\r\n                      if (this._currentIndex < this._endIndex &&\r\n                          this._string.charAt(this._currentIndex) == ',') {\r\n                          this._currentIndex++;\r\n                          this._skipOptionalSpaces();\r\n                      }\r\n                  }\r\n                  return this._currentIndex < this._endIndex;\r\n              };\r\n              Source.prototype.hasMoreData = function () {\r\n                  return this._currentIndex < this._endIndex;\r\n              };\r\n              Source.prototype.peekSegmentType = function () {\r\n                  var lookahead = this._string[this._currentIndex];\r\n                  return this._pathSegTypeFromChar(lookahead);\r\n              };\r\n              Source.prototype._pathSegTypeFromChar = function (lookahead) {\r\n                  switch (lookahead) {\r\n                      case 'Z':\r\n                      case 'z':\r\n                          return window.SVGPathSeg.PATHSEG_CLOSEPATH;\r\n                      case 'M':\r\n                          return window.SVGPathSeg.PATHSEG_MOVETO_ABS;\r\n                      case 'm':\r\n                          return window.SVGPathSeg.PATHSEG_MOVETO_REL;\r\n                      case 'L':\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_ABS;\r\n                      case 'l':\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_REL;\r\n                      case 'C':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;\r\n                      case 'c':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;\r\n                      case 'Q':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;\r\n                      case 'q':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;\r\n                      case 'A':\r\n                          return window.SVGPathSeg.PATHSEG_ARC_ABS;\r\n                      case 'a':\r\n                          return window.SVGPathSeg.PATHSEG_ARC_REL;\r\n                      case 'H':\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;\r\n                      case 'h':\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;\r\n                      case 'V':\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;\r\n                      case 'v':\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;\r\n                      case 'S':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;\r\n                      case 's':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;\r\n                      case 'T':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;\r\n                      case 't':\r\n                          return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;\r\n                      default:\r\n                          return window.SVGPathSeg.PATHSEG_UNKNOWN;\r\n                  }\r\n              };\r\n              Source.prototype._nextCommandHelper = function (lookahead, previousCommand) {\r\n                  // Check for remaining coordinates in the current command.\r\n                  if ((lookahead == '+' ||\r\n                      lookahead == '-' ||\r\n                      lookahead == '.' ||\r\n                      (lookahead >= '0' && lookahead <= '9')) &&\r\n                      previousCommand != window.SVGPathSeg.PATHSEG_CLOSEPATH) {\r\n                      if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_ABS)\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_ABS;\r\n                      if (previousCommand == window.SVGPathSeg.PATHSEG_MOVETO_REL)\r\n                          return window.SVGPathSeg.PATHSEG_LINETO_REL;\r\n                      return previousCommand;\r\n                  }\r\n                  return window.SVGPathSeg.PATHSEG_UNKNOWN;\r\n              };\r\n              Source.prototype.initialCommandIsMoveTo = function () {\r\n                  // If the path is empty it is still valid, so return true.\r\n                  if (!this.hasMoreData())\r\n                      return true;\r\n                  var command = this.peekSegmentType();\r\n                  // Path must start with moveTo.\r\n                  return (command == window.SVGPathSeg.PATHSEG_MOVETO_ABS ||\r\n                      command == window.SVGPathSeg.PATHSEG_MOVETO_REL);\r\n              };\r\n              // Parse a number from an SVG path. This very closely follows genericParseNumber(...) from Source/core/svg/SVGParserUtilities.cpp.\r\n              // Spec: http://www.w3.org/TR/SVG11/single-page.html#paths-PathDataBNF\r\n              Source.prototype._parseNumber = function () {\r\n                  var exponent = 0;\r\n                  var integer = 0;\r\n                  var frac = 1;\r\n                  var decimal = 0;\r\n                  var sign = 1;\r\n                  var expsign = 1;\r\n                  var startIndex = this._currentIndex;\r\n                  this._skipOptionalSpaces();\r\n                  // Read the sign.\r\n                  if (this._currentIndex < this._endIndex &&\r\n                      this._string.charAt(this._currentIndex) == '+')\r\n                      this._currentIndex++;\r\n                  else if (this._currentIndex < this._endIndex &&\r\n                      this._string.charAt(this._currentIndex) == '-') {\r\n                      this._currentIndex++;\r\n                      sign = -1;\r\n                  }\r\n                  if (this._currentIndex == this._endIndex ||\r\n                      ((this._string.charAt(this._currentIndex) < '0' ||\r\n                          this._string.charAt(this._currentIndex) > '9') &&\r\n                          this._string.charAt(this._currentIndex) != '.'))\r\n                      // The first character of a number must be one of [0-9+-.].\r\n                      return undefined;\r\n                  // Read the integer part, build right-to-left.\r\n                  var startIntPartIndex = this._currentIndex;\r\n                  while (this._currentIndex < this._endIndex &&\r\n                      this._string.charAt(this._currentIndex) >= '0' &&\r\n                      this._string.charAt(this._currentIndex) <= '9')\r\n                      this._currentIndex++; // Advance to first non-digit.\r\n                  if (this._currentIndex != startIntPartIndex) {\r\n                      var scanIntPartIndex = this._currentIndex - 1;\r\n                      var multiplier = 1;\r\n                      while (scanIntPartIndex >= startIntPartIndex) {\r\n                          integer +=\r\n                              multiplier * (this._string.charAt(scanIntPartIndex--) - '0');\r\n                          multiplier *= 10;\r\n                      }\r\n                  }\r\n                  // Read the decimals.\r\n                  if (this._currentIndex < this._endIndex &&\r\n                      this._string.charAt(this._currentIndex) == '.') {\r\n                      this._currentIndex++;\r\n                      // There must be a least one digit following the .\r\n                      if (this._currentIndex >= this._endIndex ||\r\n                          this._string.charAt(this._currentIndex) < '0' ||\r\n                          this._string.charAt(this._currentIndex) > '9')\r\n                          return undefined;\r\n                      while (this._currentIndex < this._endIndex &&\r\n                          this._string.charAt(this._currentIndex) >= '0' &&\r\n                          this._string.charAt(this._currentIndex) <= '9') {\r\n                          frac *= 10;\r\n                          decimal += (this._string.charAt(this._currentIndex) - '0') / frac;\r\n                          this._currentIndex += 1;\r\n                      }\r\n                  }\r\n                  // Read the exponent part.\r\n                  if (this._currentIndex != startIndex &&\r\n                      this._currentIndex + 1 < this._endIndex &&\r\n                      (this._string.charAt(this._currentIndex) == 'e' ||\r\n                          this._string.charAt(this._currentIndex) == 'E') &&\r\n                      this._string.charAt(this._currentIndex + 1) != 'x' &&\r\n                      this._string.charAt(this._currentIndex + 1) != 'm') {\r\n                      this._currentIndex++;\r\n                      // Read the sign of the exponent.\r\n                      if (this._string.charAt(this._currentIndex) == '+') {\r\n                          this._currentIndex++;\r\n                      }\r\n                      else if (this._string.charAt(this._currentIndex) == '-') {\r\n                          this._currentIndex++;\r\n                          expsign = -1;\r\n                      }\r\n                      // There must be an exponent.\r\n                      if (this._currentIndex >= this._endIndex ||\r\n                          this._string.charAt(this._currentIndex) < '0' ||\r\n                          this._string.charAt(this._currentIndex) > '9')\r\n                          return undefined;\r\n                      while (this._currentIndex < this._endIndex &&\r\n                          this._string.charAt(this._currentIndex) >= '0' &&\r\n                          this._string.charAt(this._currentIndex) <= '9') {\r\n                          exponent *= 10;\r\n                          exponent += this._string.charAt(this._currentIndex) - '0';\r\n                          this._currentIndex++;\r\n                      }\r\n                  }\r\n                  var number = integer + decimal;\r\n                  number *= sign;\r\n                  if (exponent)\r\n                      number *= Math.pow(10, expsign * exponent);\r\n                  if (startIndex == this._currentIndex)\r\n                      return undefined;\r\n                  this._skipOptionalSpacesOrDelimiter();\r\n                  return number;\r\n              };\r\n              Source.prototype._parseArcFlag = function () {\r\n                  if (this._currentIndex >= this._endIndex)\r\n                      return undefined;\r\n                  var flag = false;\r\n                  var flagChar = this._string.charAt(this._currentIndex++);\r\n                  if (flagChar == '0')\r\n                      flag = false;\r\n                  else if (flagChar == '1')\r\n                      flag = true;\r\n                  else\r\n                      return undefined;\r\n                  this._skipOptionalSpacesOrDelimiter();\r\n                  return flag;\r\n              };\r\n              Source.prototype.parseSegment = function () {\r\n                  var lookahead = this._string[this._currentIndex];\r\n                  var command = this._pathSegTypeFromChar(lookahead);\r\n                  if (command == window.SVGPathSeg.PATHSEG_UNKNOWN) {\r\n                      // Possibly an implicit command. Not allowed if this is the first command.\r\n                      if (this._previousCommand == window.SVGPathSeg.PATHSEG_UNKNOWN)\r\n                          return null;\r\n                      command = this._nextCommandHelper(lookahead, this._previousCommand);\r\n                      if (command == window.SVGPathSeg.PATHSEG_UNKNOWN)\r\n                          return null;\r\n                  }\r\n                  else {\r\n                      this._currentIndex++;\r\n                  }\r\n                  this._previousCommand = command;\r\n                  switch (command) {\r\n                      case window.SVGPathSeg.PATHSEG_MOVETO_REL:\r\n                          return new window.SVGPathSegMovetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_MOVETO_ABS:\r\n                          return new window.SVGPathSegMovetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_LINETO_REL:\r\n                          return new window.SVGPathSegLinetoRel(owningPathSegList, this._parseNumber(), this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_LINETO_ABS:\r\n                          return new window.SVGPathSegLinetoAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:\r\n                          return new window.SVGPathSegLinetoHorizontalRel(owningPathSegList, this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:\r\n                          return new window.SVGPathSegLinetoHorizontalAbs(owningPathSegList, this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:\r\n                          return new window.SVGPathSegLinetoVerticalRel(owningPathSegList, this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:\r\n                          return new window.SVGPathSegLinetoVerticalAbs(owningPathSegList, this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_CLOSEPATH:\r\n                          this._skipOptionalSpaces();\r\n                          return new window.SVGPathSegClosePath(owningPathSegList);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:\r\n                          var points = {\r\n                              x1: this._parseNumber(),\r\n                              y1: this._parseNumber(),\r\n                              x2: this._parseNumber(),\r\n                              y2: this._parseNumber(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegCurvetoCubicRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:\r\n                          var points = {\r\n                              x1: this._parseNumber(),\r\n                              y1: this._parseNumber(),\r\n                              x2: this._parseNumber(),\r\n                              y2: this._parseNumber(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegCurvetoCubicAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.x2, points.y2);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:\r\n                          var points = {\r\n                              x2: this._parseNumber(),\r\n                              y2: this._parseNumber(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegCurvetoCubicSmoothRel(owningPathSegList, points.x, points.y, points.x2, points.y2);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:\r\n                          var points = {\r\n                              x2: this._parseNumber(),\r\n                              y2: this._parseNumber(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegCurvetoCubicSmoothAbs(owningPathSegList, points.x, points.y, points.x2, points.y2);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:\r\n                          var points = {\r\n                              x1: this._parseNumber(),\r\n                              y1: this._parseNumber(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegCurvetoQuadraticRel(owningPathSegList, points.x, points.y, points.x1, points.y1);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:\r\n                          var points = {\r\n                              x1: this._parseNumber(),\r\n                              y1: this._parseNumber(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegCurvetoQuadraticAbs(owningPathSegList, points.x, points.y, points.x1, points.y1);\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:\r\n                          return new window.SVGPathSegCurvetoQuadraticSmoothRel(owningPathSegList, this._parseNumber(), this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:\r\n                          return new window.SVGPathSegCurvetoQuadraticSmoothAbs(owningPathSegList, this._parseNumber(), this._parseNumber());\r\n                      case window.SVGPathSeg.PATHSEG_ARC_REL:\r\n                          var points = {\r\n                              x1: this._parseNumber(),\r\n                              y1: this._parseNumber(),\r\n                              arcAngle: this._parseNumber(),\r\n                              arcLarge: this._parseArcFlag(),\r\n                              arcSweep: this._parseArcFlag(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegArcRel(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);\r\n                      case window.SVGPathSeg.PATHSEG_ARC_ABS:\r\n                          var points = {\r\n                              x1: this._parseNumber(),\r\n                              y1: this._parseNumber(),\r\n                              arcAngle: this._parseNumber(),\r\n                              arcLarge: this._parseArcFlag(),\r\n                              arcSweep: this._parseArcFlag(),\r\n                              x: this._parseNumber(),\r\n                              y: this._parseNumber()\r\n                          };\r\n                          return new window.SVGPathSegArcAbs(owningPathSegList, points.x, points.y, points.x1, points.y1, points.arcAngle, points.arcLarge, points.arcSweep);\r\n                      default:\r\n                          throw 'Unknown path seg type.';\r\n                  }\r\n              };\r\n              var builder = new Builder();\r\n              var source = new Source(string);\r\n              if (!source.initialCommandIsMoveTo())\r\n                  return [];\r\n              while (source.hasMoreData()) {\r\n                  var pathSeg = source.parseSegment();\r\n                  if (!pathSeg)\r\n                      return [];\r\n                  builder.appendSegment(pathSeg);\r\n              }\r\n              return builder.pathSegList;\r\n          };\r\n      }\r\n  })();\r\n  // String.padEnd polyfill for IE11\r\n  //\r\n  // https://github.com/uxitten/polyfill/blob/master/string.polyfill.js\r\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/padEnd\r\n  if (!String.prototype.padEnd) {\r\n      String.prototype.padEnd = function padEnd(targetLength, padString) {\r\n          targetLength = targetLength >> 0; //floor if number or convert non-number to 0;\r\n          padString = String(typeof padString !== 'undefined' ? padString : ' ');\r\n          if (this.length > targetLength) {\r\n              return String(this);\r\n          }\r\n          else {\r\n              targetLength = targetLength - this.length;\r\n              if (targetLength > padString.length) {\r\n                  padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed\r\n              }\r\n              return String(this) + padString.slice(0, targetLength);\r\n          }\r\n      };\r\n  }\r\n  // Object.assign polyfill for IE11\r\n  // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign#Polyfill\r\n  if (typeof Object.assign !== 'function') {\r\n      // Must be writable: true, enumerable: false, configurable: true\r\n      Object.defineProperty(Object, 'assign', {\r\n          value: function assign(target, varArgs) {\r\n              if (target === null || target === undefined) {\r\n                  throw new TypeError('Cannot convert undefined or null to object');\r\n              }\r\n              var to = Object(target);\r\n              for (var index = 1; index < arguments.length; index++) {\r\n                  var nextSource = arguments[index];\r\n                  if (nextSource !== null && nextSource !== undefined) {\r\n                      for (var nextKey in nextSource) {\r\n                          // Avoid bugs when hasOwnProperty is shadowed\r\n                          if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\r\n                              to[nextKey] = nextSource[nextKey];\r\n                          }\r\n                      }\r\n                  }\r\n              }\r\n              return to;\r\n          },\r\n          writable: true,\r\n          configurable: true\r\n      });\r\n  }\r\n  /* jshint ignore:end */\n\n  Chart.prototype.axis = function () { };\r\n  Chart.prototype.axis.labels = function (labels) {\r\n      var $$ = this.internal;\r\n      if (arguments.length) {\r\n          Object.keys(labels).forEach(function (axisId) {\r\n              $$.axis.setLabelText(axisId, labels[axisId]);\r\n          });\r\n          $$.axis.updateLabels();\r\n      }\r\n      // TODO: return some values?\r\n  };\r\n  Chart.prototype.axis.max = function (max) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (arguments.length) {\r\n          if (typeof max === 'object') {\r\n              if (isValue(max.x)) {\r\n                  config.axis_x_max = max.x;\r\n              }\r\n              if (isValue(max.y)) {\r\n                  config.axis_y_max = max.y;\r\n              }\r\n              if (isValue(max.y2)) {\r\n                  config.axis_y2_max = max.y2;\r\n              }\r\n          }\r\n          else {\r\n              config.axis_y_max = config.axis_y2_max = max;\r\n          }\r\n          $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true });\r\n      }\r\n      else {\r\n          return {\r\n              x: config.axis_x_max,\r\n              y: config.axis_y_max,\r\n              y2: config.axis_y2_max\r\n          };\r\n      }\r\n  };\r\n  Chart.prototype.axis.min = function (min) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (arguments.length) {\r\n          if (typeof min === 'object') {\r\n              if (isValue(min.x)) {\r\n                  config.axis_x_min = min.x;\r\n              }\r\n              if (isValue(min.y)) {\r\n                  config.axis_y_min = min.y;\r\n              }\r\n              if (isValue(min.y2)) {\r\n                  config.axis_y2_min = min.y2;\r\n              }\r\n          }\r\n          else {\r\n              config.axis_y_min = config.axis_y2_min = min;\r\n          }\r\n          $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true });\r\n      }\r\n      else {\r\n          return {\r\n              x: config.axis_x_min,\r\n              y: config.axis_y_min,\r\n              y2: config.axis_y2_min\r\n          };\r\n      }\r\n  };\r\n  Chart.prototype.axis.range = function (range) {\r\n      if (arguments.length) {\r\n          if (isDefined(range.max)) {\r\n              this.axis.max(range.max);\r\n          }\r\n          if (isDefined(range.min)) {\r\n              this.axis.min(range.min);\r\n          }\r\n      }\r\n      else {\r\n          return {\r\n              max: this.axis.max(),\r\n              min: this.axis.min()\r\n          };\r\n      }\r\n  };\r\n  Chart.prototype.axis.types = function (types) {\r\n      var $$ = this.internal;\r\n      if (types === undefined) {\r\n          return {\r\n              y: $$.config.axis_y_type,\r\n              y2: $$.config.axis_y2_type\r\n          };\r\n      }\r\n      else {\r\n          if (isDefined(types.y)) {\r\n              $$.config.axis_y_type = types.y;\r\n          }\r\n          if (isDefined(types.y2)) {\r\n              $$.config.axis_y2_type = types.y2;\r\n          }\r\n          $$.updateScales();\r\n          $$.redraw();\r\n      }\r\n  };\n\n  Chart.prototype.category = function (i, category) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (arguments.length > 1) {\r\n          config.axis_x_categories[i] = category;\r\n          $$.redraw();\r\n      }\r\n      return config.axis_x_categories[i];\r\n  };\r\n  Chart.prototype.categories = function (categories) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (!arguments.length) {\r\n          return config.axis_x_categories;\r\n      }\r\n      config.axis_x_categories = categories;\r\n      $$.redraw();\r\n      return config.axis_x_categories;\r\n  };\n\n  Chart.prototype.resize = function (size) {\r\n      var $$ = this.internal, config = $$.config;\r\n      config.size_width = size ? size.width : null;\r\n      config.size_height = size ? size.height : null;\r\n      this.flush();\r\n  };\r\n  Chart.prototype.flush = function () {\r\n      var $$ = this.internal;\r\n      $$.updateAndRedraw({\r\n          withLegend: true,\r\n          withTransition: false,\r\n          withTransitionForTransform: false\r\n      });\r\n  };\r\n  Chart.prototype.destroy = function () {\r\n      var $$ = this.internal;\r\n      window.clearInterval($$.intervalForObserveInserted);\r\n      if ($$.resizeTimeout !== undefined) {\r\n          window.clearTimeout($$.resizeTimeout);\r\n      }\r\n      window.removeEventListener('resize', $$.resizeIfElementDisplayed);\r\n      // Removes the inner resize functions\r\n      $$.resizeFunction.remove();\r\n      // Unbinds from the window focus event\r\n      $$.unbindWindowFocus();\r\n      $$.selectChart.classed('c3', false).html('');\r\n      // MEMO: this is needed because the reference of some elements will not be released, then memory leak will happen.\r\n      Object.keys($$).forEach(function (key) {\r\n          $$[key] = null;\r\n      });\r\n      return null;\r\n  };\n\n  // TODO: fix\r\n  Chart.prototype.color = function (id) {\r\n      var $$ = this.internal;\r\n      return $$.color(id); // more patterns\r\n  };\n\n  Chart.prototype.data = function (targetIds) {\r\n      var targets = this.internal.data.targets;\r\n      return typeof targetIds === 'undefined'\r\n          ? targets\r\n          : targets.filter(function (t) {\r\n              return [].concat(targetIds).indexOf(t.id) >= 0;\r\n          });\r\n  };\r\n  Chart.prototype.data.shown = function (targetIds) {\r\n      return this.internal.filterTargetsToShow(this.data(targetIds));\r\n  };\r\n  /**\r\n   * Get values of the data loaded in the chart.\r\n   *\r\n   * @param {String|Array} targetId This API returns the value of specified target.\r\n   * @param flat\r\n   * @return {Array} Data values\r\n   */\r\n  Chart.prototype.data.values = function (targetId, flat) {\r\n      if (flat === void 0) { flat = true; }\r\n      var values = null;\r\n      if (targetId) {\r\n          var targets = this.data(targetId);\r\n          if (targets && isArray(targets)) {\r\n              values = targets.reduce(function (ret, v) {\r\n                  var dataValue = v.values.map(function (d) { return d.value; });\r\n                  if (flat) {\r\n                      ret = ret.concat(dataValue);\r\n                  }\r\n                  else {\r\n                      ret.push(dataValue);\r\n                  }\r\n                  return ret;\r\n              }, []);\r\n          }\r\n      }\r\n      return values;\r\n  };\r\n  Chart.prototype.data.names = function (names) {\r\n      this.internal.clearLegendItemTextBoxCache();\r\n      return this.internal.updateDataAttributes('names', names);\r\n  };\r\n  Chart.prototype.data.colors = function (colors) {\r\n      return this.internal.updateDataAttributes('colors', colors);\r\n  };\r\n  Chart.prototype.data.axes = function (axes) {\r\n      return this.internal.updateDataAttributes('axes', axes);\r\n  };\r\n  Chart.prototype.data.stackNormalized = function (normalized) {\r\n      if (normalized === undefined) {\r\n          return this.internal.isStackNormalized();\r\n      }\r\n      this.internal.config.data_stack_normalize = !!normalized;\r\n      this.internal.redraw();\r\n  };\n\n  Chart.prototype.donut = function () { };\r\n  Chart.prototype.donut.padAngle = function (padAngle) {\r\n      if (padAngle === undefined) {\r\n          return this.internal.config.donut_padAngle;\r\n      }\r\n      this.internal.config.donut_padAngle = padAngle;\r\n      this.flush();\r\n  };\n\n  Chart.prototype.flow = function (args) {\r\n      var $$ = this.internal, targets, data, notfoundIds = [], orgDataCount = $$.getMaxDataCount(), dataCount, domain, baseTarget, baseValue, length = 0, tail = 0, diff, to;\r\n      if (args.json) {\r\n          data = $$.convertJsonToData(args.json, args.keys);\r\n      }\r\n      else if (args.rows) {\r\n          data = $$.convertRowsToData(args.rows);\r\n      }\r\n      else if (args.columns) {\r\n          data = $$.convertColumnsToData(args.columns);\r\n      }\r\n      else {\r\n          return;\r\n      }\r\n      targets = $$.convertDataToTargets(data, true);\r\n      // Update/Add data\r\n      $$.data.targets.forEach(function (t) {\r\n          var found = false, i, j;\r\n          for (i = 0; i < targets.length; i++) {\r\n              if (t.id === targets[i].id) {\r\n                  found = true;\r\n                  if (t.values[t.values.length - 1]) {\r\n                      tail = t.values[t.values.length - 1].index + 1;\r\n                  }\r\n                  length = targets[i].values.length;\r\n                  for (j = 0; j < length; j++) {\r\n                      targets[i].values[j].index = tail + j;\r\n                      if (!$$.isTimeSeries()) {\r\n                          targets[i].values[j].x = tail + j;\r\n                      }\r\n                  }\r\n                  t.values = t.values.concat(targets[i].values);\r\n                  targets.splice(i, 1);\r\n                  break;\r\n              }\r\n          }\r\n          if (!found) {\r\n              notfoundIds.push(t.id);\r\n          }\r\n      });\r\n      // Append null for not found targets\r\n      $$.data.targets.forEach(function (t) {\r\n          var i, j;\r\n          for (i = 0; i < notfoundIds.length; i++) {\r\n              if (t.id === notfoundIds[i]) {\r\n                  tail = t.values[t.values.length - 1].index + 1;\r\n                  for (j = 0; j < length; j++) {\r\n                      t.values.push({\r\n                          id: t.id,\r\n                          index: tail + j,\r\n                          x: $$.isTimeSeries() ? $$.getOtherTargetX(tail + j) : tail + j,\r\n                          value: null\r\n                      });\r\n                  }\r\n              }\r\n          }\r\n      });\r\n      // Generate null values for new target\r\n      if ($$.data.targets.length) {\r\n          targets.forEach(function (t) {\r\n              var i, missing = [];\r\n              for (i = $$.data.targets[0].values[0].index; i < tail; i++) {\r\n                  missing.push({\r\n                      id: t.id,\r\n                      index: i,\r\n                      x: $$.isTimeSeries() ? $$.getOtherTargetX(i) : i,\r\n                      value: null\r\n                  });\r\n              }\r\n              t.values.forEach(function (v) {\r\n                  v.index += tail;\r\n                  if (!$$.isTimeSeries()) {\r\n                      v.x += tail;\r\n                  }\r\n              });\r\n              t.values = missing.concat(t.values);\r\n          });\r\n      }\r\n      $$.data.targets = $$.data.targets.concat(targets); // add remained\r\n      // check data count because behavior needs to change when it's only one\r\n      dataCount = $$.getMaxDataCount();\r\n      baseTarget = $$.data.targets[0];\r\n      baseValue = baseTarget.values[0];\r\n      // Update length to flow if needed\r\n      if (isDefined(args.to)) {\r\n          length = 0;\r\n          to = $$.isTimeSeries() ? $$.parseDate(args.to) : args.to;\r\n          baseTarget.values.forEach(function (v) {\r\n              if (v.x < to) {\r\n                  length++;\r\n              }\r\n          });\r\n      }\r\n      else if (isDefined(args.length)) {\r\n          length = args.length;\r\n      }\r\n      // If only one data, update the domain to flow from left edge of the chart\r\n      if (!orgDataCount) {\r\n          if ($$.isTimeSeries()) {\r\n              if (baseTarget.values.length > 1) {\r\n                  diff = baseTarget.values[baseTarget.values.length - 1].x - baseValue.x;\r\n              }\r\n              else {\r\n                  diff = baseValue.x - $$.getXDomain($$.data.targets)[0];\r\n              }\r\n          }\r\n          else {\r\n              diff = 1;\r\n          }\r\n          domain = [baseValue.x - diff, baseValue.x];\r\n          $$.updateXDomain(null, true, true, false, domain);\r\n      }\r\n      else if (orgDataCount === 1) {\r\n          if ($$.isTimeSeries()) {\r\n              diff =\r\n                  (baseTarget.values[baseTarget.values.length - 1].x - baseValue.x) / 2;\r\n              domain = [new Date(+baseValue.x - diff), new Date(+baseValue.x + diff)];\r\n              $$.updateXDomain(null, true, true, false, domain);\r\n          }\r\n      }\r\n      // Set targets\r\n      $$.updateTargets($$.data.targets);\r\n      // Redraw with new targets\r\n      $$.redraw({\r\n          flow: {\r\n              index: baseValue.index,\r\n              length: length,\r\n              duration: isValue(args.duration)\r\n                  ? args.duration\r\n                  : $$.config.transition_duration,\r\n              done: args.done,\r\n              orgDataCount: orgDataCount\r\n          },\r\n          withLegend: true,\r\n          withTransition: orgDataCount > 1,\r\n          withTrimXDomain: false,\r\n          withUpdateXAxis: true\r\n      });\r\n  };\r\n  ChartInternal.prototype.generateFlow = function (args) {\r\n      var $$ = this, config = $$.config, d3 = $$.d3;\r\n      return function () {\r\n          var targets = args.targets, flow = args.flow, drawBar = args.drawBar, drawLine = args.drawLine, drawArea = args.drawArea, cx = args.cx, cy = args.cy, xv = args.xv, xForText = args.xForText, yForText = args.yForText, duration = args.duration;\r\n          var translateX, scaleX = 1, transform, flowIndex = flow.index, flowLength = flow.length, flowStart = $$.getValueOnIndex($$.data.targets[0].values, flowIndex), flowEnd = $$.getValueOnIndex($$.data.targets[0].values, flowIndex + flowLength), orgDomain = $$.x.domain(), domain, durationForFlow = flow.duration || duration, done = flow.done || function () { }, wait = $$.generateWait();\r\n          var xgrid, xgridLines, mainRegion, mainText, mainBar, mainLine, mainArea, mainCircle;\r\n          // set flag\r\n          $$.flowing = true;\r\n          // remove head data after rendered\r\n          $$.data.targets.forEach(function (d) {\r\n              d.values.splice(0, flowLength);\r\n          });\r\n          // update x domain to generate axis elements for flow\r\n          domain = $$.updateXDomain(targets, true, true);\r\n          // update elements related to x scale\r\n          if ($$.updateXGrid) {\r\n              $$.updateXGrid(true);\r\n          }\r\n          xgrid = $$.xgrid || d3.selectAll([]); // xgrid needs to be obtained after updateXGrid\r\n          xgridLines = $$.xgridLines || d3.selectAll([]);\r\n          mainRegion = $$.mainRegion || d3.selectAll([]);\r\n          mainText = $$.mainText || d3.selectAll([]);\r\n          mainBar = $$.mainBar || d3.selectAll([]);\r\n          mainLine = $$.mainLine || d3.selectAll([]);\r\n          mainArea = $$.mainArea || d3.selectAll([]);\r\n          mainCircle = $$.mainCircle || d3.selectAll([]);\r\n          // generate transform to flow\r\n          if (!flow.orgDataCount) {\r\n              // if empty\r\n              if ($$.data.targets[0].values.length !== 1) {\r\n                  translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\r\n              }\r\n              else {\r\n                  if ($$.isTimeSeries()) {\r\n                      flowStart = $$.getValueOnIndex($$.data.targets[0].values, 0);\r\n                      flowEnd = $$.getValueOnIndex($$.data.targets[0].values, $$.data.targets[0].values.length - 1);\r\n                      translateX = $$.x(flowStart.x) - $$.x(flowEnd.x);\r\n                  }\r\n                  else {\r\n                      translateX = diffDomain(domain) / 2;\r\n                  }\r\n              }\r\n          }\r\n          else if (flow.orgDataCount === 1 ||\r\n              (flowStart && flowStart.x) === (flowEnd && flowEnd.x)) {\r\n              translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\r\n          }\r\n          else {\r\n              if ($$.isTimeSeries()) {\r\n                  translateX = $$.x(orgDomain[0]) - $$.x(domain[0]);\r\n              }\r\n              else {\r\n                  translateX = $$.x(flowStart.x) - $$.x(flowEnd.x);\r\n              }\r\n          }\r\n          scaleX = diffDomain(orgDomain) / diffDomain(domain);\r\n          transform = 'translate(' + translateX + ',0) scale(' + scaleX + ',1)';\r\n          $$.hideXGridFocus();\r\n          var flowTransition = d3\r\n              .transition()\r\n              .ease(d3.easeLinear)\r\n              .duration(durationForFlow);\r\n          wait.add($$.xAxis($$.axes.x, flowTransition));\r\n          wait.add(mainBar.transition(flowTransition).attr('transform', transform));\r\n          wait.add(mainLine.transition(flowTransition).attr('transform', transform));\r\n          wait.add(mainArea.transition(flowTransition).attr('transform', transform));\r\n          wait.add(mainCircle.transition(flowTransition).attr('transform', transform));\r\n          wait.add(mainText.transition(flowTransition).attr('transform', transform));\r\n          wait.add(mainRegion\r\n              .filter($$.isRegionOnX)\r\n              .transition(flowTransition)\r\n              .attr('transform', transform));\r\n          wait.add(xgrid.transition(flowTransition).attr('transform', transform));\r\n          wait.add(xgridLines.transition(flowTransition).attr('transform', transform));\r\n          wait(function () {\r\n              var i, shapes = [], texts = [];\r\n              // remove flowed elements\r\n              if (flowLength) {\r\n                  for (i = 0; i < flowLength; i++) {\r\n                      shapes.push('.' + CLASS.shape + '-' + (flowIndex + i));\r\n                      texts.push('.' + CLASS.text + '-' + (flowIndex + i));\r\n                  }\r\n                  $$.svg\r\n                      .selectAll('.' + CLASS.shapes)\r\n                      .selectAll(shapes)\r\n                      .remove();\r\n                  $$.svg\r\n                      .selectAll('.' + CLASS.texts)\r\n                      .selectAll(texts)\r\n                      .remove();\r\n                  $$.svg.select('.' + CLASS.xgrid).remove();\r\n              }\r\n              // draw again for removing flowed elements and reverting attr\r\n              xgrid\r\n                  .attr('transform', null)\r\n                  .attr('x1', $$.xgridAttr.x1)\r\n                  .attr('x2', $$.xgridAttr.x2)\r\n                  .attr('y1', $$.xgridAttr.y1)\r\n                  .attr('y2', $$.xgridAttr.y2)\r\n                  .style('opacity', $$.xgridAttr.opacity);\r\n              xgridLines.attr('transform', null);\r\n              xgridLines\r\n                  .select('line')\r\n                  .attr('x1', config.axis_rotated ? 0 : xv)\r\n                  .attr('x2', config.axis_rotated ? $$.width : xv);\r\n              xgridLines\r\n                  .select('text')\r\n                  .attr('x', config.axis_rotated ? $$.width : 0)\r\n                  .attr('y', xv);\r\n              mainBar.attr('transform', null).attr('d', drawBar);\r\n              mainLine.attr('transform', null).attr('d', drawLine);\r\n              mainArea.attr('transform', null).attr('d', drawArea);\r\n              mainCircle\r\n                  .attr('transform', null)\r\n                  .attr('cx', cx)\r\n                  .attr('cy', cy);\r\n              mainText\r\n                  .attr('transform', null)\r\n                  .attr('x', xForText)\r\n                  .attr('y', yForText)\r\n                  .style('fill-opacity', $$.opacityForText.bind($$));\r\n              mainRegion.attr('transform', null);\r\n              mainRegion\r\n                  .filter($$.isRegionOnX)\r\n                  .attr('x', $$.regionX.bind($$))\r\n                  .attr('width', $$.regionWidth.bind($$));\r\n              // callback for end of flow\r\n              done();\r\n              $$.flowing = false;\r\n          });\r\n      };\r\n  };\n\n  Chart.prototype.focus = function (targetIds) {\r\n      var $$ = this.internal, candidates;\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      (candidates = $$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow, $$)))),\r\n          this.revert();\r\n      this.defocus();\r\n      candidates.classed(CLASS.focused, true).classed(CLASS.defocused, false);\r\n      if ($$.hasArcType()) {\r\n          $$.expandArc(targetIds);\r\n      }\r\n      $$.toggleFocusLegend(targetIds, true);\r\n      $$.focusedTargetIds = targetIds;\r\n      $$.defocusedTargetIds = $$.defocusedTargetIds.filter(function (id) {\r\n          return targetIds.indexOf(id) < 0;\r\n      });\r\n  };\r\n  Chart.prototype.defocus = function (targetIds) {\r\n      var $$ = this.internal, candidates;\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      (candidates = $$.svg.selectAll($$.selectorTargets(targetIds.filter($$.isTargetToShow, $$)))),\r\n          candidates.classed(CLASS.focused, false).classed(CLASS.defocused, true);\r\n      if ($$.hasArcType()) {\r\n          $$.unexpandArc(targetIds);\r\n      }\r\n      $$.toggleFocusLegend(targetIds, false);\r\n      $$.focusedTargetIds = $$.focusedTargetIds.filter(function (id) {\r\n          return targetIds.indexOf(id) < 0;\r\n      });\r\n      $$.defocusedTargetIds = targetIds;\r\n  };\r\n  Chart.prototype.revert = function (targetIds) {\r\n      var $$ = this.internal, candidates;\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      candidates = $$.svg.selectAll($$.selectorTargets(targetIds)); // should be for all targets\r\n      candidates.classed(CLASS.focused, false).classed(CLASS.defocused, false);\r\n      if ($$.hasArcType()) {\r\n          $$.unexpandArc(targetIds);\r\n      }\r\n      if ($$.config.legend_show) {\r\n          $$.showLegend(targetIds.filter($$.isLegendToShow.bind($$)));\r\n          $$.legend\r\n              .selectAll($$.selectorLegends(targetIds))\r\n              .filter(function () {\r\n              return $$.d3.select(this).classed(CLASS.legendItemFocused);\r\n          })\r\n              .classed(CLASS.legendItemFocused, false);\r\n      }\r\n      $$.focusedTargetIds = [];\r\n      $$.defocusedTargetIds = [];\r\n  };\n\n  Chart.prototype.xgrids = function (grids) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (!grids) {\r\n          return config.grid_x_lines;\r\n      }\r\n      config.grid_x_lines = grids;\r\n      $$.redrawWithoutRescale();\r\n      return config.grid_x_lines;\r\n  };\r\n  Chart.prototype.xgrids.add = function (grids) {\r\n      var $$ = this.internal;\r\n      return this.xgrids($$.config.grid_x_lines.concat(grids ? grids : []));\r\n  };\r\n  Chart.prototype.xgrids.remove = function (params) {\r\n      // TODO: multiple\r\n      var $$ = this.internal;\r\n      $$.removeGridLines(params, true);\r\n  };\r\n  Chart.prototype.ygrids = function (grids) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (!grids) {\r\n          return config.grid_y_lines;\r\n      }\r\n      config.grid_y_lines = grids;\r\n      $$.redrawWithoutRescale();\r\n      return config.grid_y_lines;\r\n  };\r\n  Chart.prototype.ygrids.add = function (grids) {\r\n      var $$ = this.internal;\r\n      return this.ygrids($$.config.grid_y_lines.concat(grids ? grids : []));\r\n  };\r\n  Chart.prototype.ygrids.remove = function (params) {\r\n      // TODO: multiple\r\n      var $$ = this.internal;\r\n      $$.removeGridLines(params, false);\r\n  };\n\n  Chart.prototype.groups = function (groups) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (isUndefined(groups)) {\r\n          return config.data_groups;\r\n      }\r\n      config.data_groups = groups;\r\n      $$.redraw();\r\n      return config.data_groups;\r\n  };\n\n  Chart.prototype.legend = function () { };\r\n  Chart.prototype.legend.show = function (targetIds) {\r\n      var $$ = this.internal;\r\n      $$.showLegend($$.mapToTargetIds(targetIds));\r\n      $$.updateAndRedraw({ withLegend: true });\r\n  };\r\n  Chart.prototype.legend.hide = function (targetIds) {\r\n      var $$ = this.internal;\r\n      $$.hideLegend($$.mapToTargetIds(targetIds));\r\n      $$.updateAndRedraw({ withLegend: false });\r\n  };\n\n  Chart.prototype.load = function (args) {\r\n      var $$ = this.internal, config = $$.config;\r\n      // update xs if specified\r\n      if (args.xs) {\r\n          $$.addXs(args.xs);\r\n      }\r\n      // update names if exists\r\n      if ('names' in args) {\r\n          Chart.prototype.data.names.bind(this)(args.names);\r\n      }\r\n      // update classes if exists\r\n      if ('classes' in args) {\r\n          Object.keys(args.classes).forEach(function (id) {\r\n              config.data_classes[id] = args.classes[id];\r\n          });\r\n      }\r\n      // update categories if exists\r\n      if ('categories' in args && $$.isCategorized()) {\r\n          config.axis_x_categories = args.categories;\r\n      }\r\n      // update axes if exists\r\n      if ('axes' in args) {\r\n          Object.keys(args.axes).forEach(function (id) {\r\n              config.data_axes[id] = args.axes[id];\r\n          });\r\n      }\r\n      // update colors if exists\r\n      if ('colors' in args) {\r\n          Object.keys(args.colors).forEach(function (id) {\r\n              config.data_colors[id] = args.colors[id];\r\n          });\r\n      }\r\n      // use cache if exists\r\n      if ('cacheIds' in args && $$.hasCaches(args.cacheIds)) {\r\n          $$.load($$.getCaches(args.cacheIds), args.done);\r\n          return;\r\n      }\r\n      // unload if needed\r\n      if (args.unload) {\r\n          // TODO: do not unload if target will load (included in url/rows/columns)\r\n          $$.unload($$.mapToTargetIds(args.unload === true ? null : args.unload), function () {\r\n              $$.loadFromArgs(args);\r\n          });\r\n      }\r\n      else {\r\n          $$.loadFromArgs(args);\r\n      }\r\n  };\r\n  Chart.prototype.unload = function (args) {\r\n      var $$ = this.internal;\r\n      args = args || {};\r\n      if (args instanceof Array) {\r\n          args = { ids: args };\r\n      }\r\n      else if (typeof args === 'string') {\r\n          args = { ids: [args] };\r\n      }\r\n      $$.unload($$.mapToTargetIds(args.ids), function () {\r\n          $$.redraw({\r\n              withUpdateOrgXDomain: true,\r\n              withUpdateXDomain: true,\r\n              withLegend: true\r\n          });\r\n          if (args.done) {\r\n              args.done();\r\n          }\r\n      });\r\n  };\n\n  Chart.prototype.pie = function () { };\r\n  Chart.prototype.pie.padAngle = function (padAngle) {\r\n      if (padAngle === undefined) {\r\n          return this.internal.config.pie_padAngle;\r\n      }\r\n      this.internal.config.pie_padAngle = padAngle;\r\n      this.flush();\r\n  };\n\n  Chart.prototype.regions = function (regions) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (!regions) {\r\n          return config.regions;\r\n      }\r\n      config.regions = regions;\r\n      $$.redrawWithoutRescale();\r\n      return config.regions;\r\n  };\r\n  Chart.prototype.regions.add = function (regions) {\r\n      var $$ = this.internal, config = $$.config;\r\n      if (!regions) {\r\n          return config.regions;\r\n      }\r\n      config.regions = config.regions.concat(regions);\r\n      $$.redrawWithoutRescale();\r\n      return config.regions;\r\n  };\r\n  Chart.prototype.regions.remove = function (options) {\r\n      var $$ = this.internal, config = $$.config, duration, classes, regions;\r\n      options = options || {};\r\n      duration = getOption(options, 'duration', config.transition_duration);\r\n      classes = getOption(options, 'classes', [CLASS.region]);\r\n      regions = $$.main.select('.' + CLASS.regions).selectAll(classes.map(function (c) {\r\n          return '.' + c;\r\n      }));\r\n      (duration ? regions.transition().duration(duration) : regions)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      config.regions = config.regions.filter(function (region) {\r\n          var found = false;\r\n          if (!region['class']) {\r\n              return true;\r\n          }\r\n          region['class'].split(' ').forEach(function (c) {\r\n              if (classes.indexOf(c) >= 0) {\r\n                  found = true;\r\n              }\r\n          });\r\n          return !found;\r\n      });\r\n      return config.regions;\r\n  };\n\n  Chart.prototype.selected = function (targetId) {\r\n      var $$ = this.internal, d3 = $$.d3;\r\n      return $$.main\r\n          .selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(targetId))\r\n          .selectAll('.' + CLASS.shape)\r\n          .filter(function () {\r\n          return d3.select(this).classed(CLASS.SELECTED);\r\n      })\r\n          .nodes()\r\n          .map(function (d) {\r\n          var data = d.__data__;\r\n          return data.data ? data.data : data;\r\n      });\r\n  };\r\n  Chart.prototype.select = function (ids, indices, resetOther) {\r\n      var $$ = this.internal, d3 = $$.d3, config = $$.config;\r\n      if (!config.data_selection_enabled) {\r\n          return;\r\n      }\r\n      $$.main\r\n          .selectAll('.' + CLASS.shapes)\r\n          .selectAll('.' + CLASS.shape)\r\n          .each(function (d, i) {\r\n          var shape = d3.select(this), id = d.data ? d.data.id : d.id, toggle = $$.getToggle(this, d).bind($$), isTargetId = config.data_selection_grouped || !ids || ids.indexOf(id) >= 0, isTargetIndex = !indices || indices.indexOf(i) >= 0, isSelected = shape.classed(CLASS.SELECTED);\r\n          // line/area selection not supported yet\r\n          if (shape.classed(CLASS.line) || shape.classed(CLASS.area)) {\r\n              return;\r\n          }\r\n          if (isTargetId && isTargetIndex) {\r\n              if (config.data_selection_isselectable(d) && !isSelected) {\r\n                  toggle(true, shape.classed(CLASS.SELECTED, true), d, i);\r\n              }\r\n          }\r\n          else if (isDefined(resetOther) && resetOther) {\r\n              if (isSelected) {\r\n                  toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\r\n              }\r\n          }\r\n      });\r\n  };\r\n  Chart.prototype.unselect = function (ids, indices) {\r\n      var $$ = this.internal, d3 = $$.d3, config = $$.config;\r\n      if (!config.data_selection_enabled) {\r\n          return;\r\n      }\r\n      $$.main\r\n          .selectAll('.' + CLASS.shapes)\r\n          .selectAll('.' + CLASS.shape)\r\n          .each(function (d, i) {\r\n          var shape = d3.select(this), id = d.data ? d.data.id : d.id, toggle = $$.getToggle(this, d).bind($$), isTargetId = config.data_selection_grouped || !ids || ids.indexOf(id) >= 0, isTargetIndex = !indices || indices.indexOf(i) >= 0, isSelected = shape.classed(CLASS.SELECTED);\r\n          // line/area selection not supported yet\r\n          if (shape.classed(CLASS.line) || shape.classed(CLASS.area)) {\r\n              return;\r\n          }\r\n          if (isTargetId && isTargetIndex) {\r\n              if (config.data_selection_isselectable(d)) {\r\n                  if (isSelected) {\r\n                      toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\r\n                  }\r\n              }\r\n          }\r\n      });\r\n  };\n\n  Chart.prototype.show = function (targetIds, options) {\r\n      var $$ = this.internal, targets;\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      options = options || {};\r\n      $$.removeHiddenTargetIds(targetIds);\r\n      targets = $$.svg.selectAll($$.selectorTargets(targetIds));\r\n      targets\r\n          .transition()\r\n          .style('display', isIE() ? 'block' : 'initial', 'important')\r\n          .style('opacity', 1, 'important')\r\n          .call($$.endall, function () {\r\n          targets.style('opacity', null).style('opacity', 1);\r\n      });\r\n      if (options.withLegend) {\r\n          $$.showLegend(targetIds);\r\n      }\r\n      $$.redraw({\r\n          withUpdateOrgXDomain: true,\r\n          withUpdateXDomain: true,\r\n          withLegend: true\r\n      });\r\n  };\r\n  Chart.prototype.hide = function (targetIds, options) {\r\n      var $$ = this.internal, targets;\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      options = options || {};\r\n      $$.addHiddenTargetIds(targetIds);\r\n      targets = $$.svg.selectAll($$.selectorTargets(targetIds));\r\n      targets\r\n          .transition()\r\n          .style('opacity', 0, 'important')\r\n          .call($$.endall, function () {\r\n          targets.style('opacity', null).style('opacity', 0);\r\n          targets.style('display', 'none');\r\n      });\r\n      if (options.withLegend) {\r\n          $$.hideLegend(targetIds);\r\n      }\r\n      $$.redraw({\r\n          withUpdateOrgXDomain: true,\r\n          withUpdateXDomain: true,\r\n          withLegend: true\r\n      });\r\n  };\r\n  Chart.prototype.toggle = function (targetIds, options) {\r\n      var that = this, $$ = this.internal;\r\n      $$.mapToTargetIds(targetIds).forEach(function (targetId) {\r\n          $$.isTargetToShow(targetId)\r\n              ? that.hide(targetId, options)\r\n              : that.show(targetId, options);\r\n      });\r\n  };\n\n  Chart.prototype.subchart = function () { };\r\n  Chart.prototype.subchart.isShown = function () {\r\n      var $$ = this.internal;\r\n      return $$.config.subchart_show;\r\n  };\r\n  Chart.prototype.subchart.show = function () {\r\n      var $$ = this.internal;\r\n      if ($$.config.subchart_show) {\r\n          return;\r\n      }\r\n      $$.config.subchart_show = true;\r\n      // insert DOM\r\n      $$.initSubchart();\r\n      // update dimensions with sub chart now visible\r\n      $$.updateDimension();\r\n      // insert brush (depends on sizes previously updated)\r\n      $$.initSubchartBrush();\r\n      // attach data\r\n      $$.updateTargetsForSubchart($$.getTargets());\r\n      // reset fade-in state\r\n      $$.mapToIds($$.data.targets).forEach(function (id) {\r\n          $$.withoutFadeIn[id] = false;\r\n      });\r\n      // redraw chart !\r\n      $$.updateAndRedraw();\r\n      // update visible targets !\r\n      $$.showTargets();\r\n  };\r\n  Chart.prototype.subchart.hide = function () {\r\n      var $$ = this.internal;\r\n      if (!$$.config.subchart_show) {\r\n          return;\r\n      }\r\n      $$.config.subchart_show = false;\r\n      // remove DOM\r\n      $$.removeSubchart();\r\n      // re-render chart\r\n      $$.redraw();\r\n  };\n\n  Chart.prototype.tooltip = function () { };\r\n  Chart.prototype.tooltip.show = function (args) {\r\n      var $$ = this.internal, targets, data, mouse = {};\r\n      // determine mouse position on the chart\r\n      if (args.mouse) {\r\n          mouse = args.mouse;\r\n      }\r\n      else {\r\n          // determine focus data\r\n          if (args.data) {\r\n              data = args.data;\r\n          }\r\n          else if (typeof args.x !== 'undefined') {\r\n              if (args.id) {\r\n                  targets = $$.data.targets.filter(function (t) {\r\n                      return t.id === args.id;\r\n                  });\r\n              }\r\n              else {\r\n                  targets = $$.data.targets;\r\n              }\r\n              data = $$.filterByX(targets, args.x).slice(0, 1)[0];\r\n          }\r\n          mouse = data ? $$.getMousePosition(data) : null;\r\n      }\r\n      // emulate mouse events to show\r\n      $$.dispatchEvent('mousemove', mouse);\r\n      $$.config.tooltip_onshow.call($$, data);\r\n  };\r\n  Chart.prototype.tooltip.hide = function () {\r\n      // TODO: get target data by checking the state of focus\r\n      this.internal.dispatchEvent('mouseout', 0);\r\n      this.internal.config.tooltip_onhide.call(this);\r\n  };\n\n  Chart.prototype.transform = function (type, targetIds) {\r\n      var $$ = this.internal, options = ['pie', 'donut'].indexOf(type) >= 0 ? { withTransform: true } : null;\r\n      $$.transformTo(targetIds, type, options);\r\n  };\r\n  ChartInternal.prototype.transformTo = function (targetIds, type, optionsForRedraw) {\r\n      var $$ = this, withTransitionForAxis = !$$.hasArcType(), options = optionsForRedraw || {\r\n          withTransitionForAxis: withTransitionForAxis\r\n      };\r\n      options.withTransitionForTransform = false;\r\n      $$.transiting = false;\r\n      $$.setTargetType(targetIds, type);\r\n      $$.updateTargets($$.data.targets); // this is needed when transforming to arc\r\n      $$.updateAndRedraw(options);\r\n  };\n\n  Chart.prototype.x = function (x) {\r\n      var $$ = this.internal;\r\n      if (arguments.length) {\r\n          $$.updateTargetX($$.data.targets, x);\r\n          $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true });\r\n      }\r\n      return $$.data.xs;\r\n  };\r\n  Chart.prototype.xs = function (xs) {\r\n      var $$ = this.internal;\r\n      if (arguments.length) {\r\n          $$.updateTargetXs($$.data.targets, xs);\r\n          $$.redraw({ withUpdateOrgXDomain: true, withUpdateXDomain: true });\r\n      }\r\n      return $$.data.xs;\r\n  };\n\n  Chart.prototype.zoom = function (domain) {\r\n      var $$ = this.internal;\r\n      if (domain) {\r\n          if ($$.isTimeSeries()) {\r\n              domain = domain.map(function (x) {\r\n                  return $$.parseDate(x);\r\n              });\r\n          }\r\n          if ($$.config.subchart_show) {\r\n              $$.brush.selectionAsValue(domain, true);\r\n          }\r\n          else {\r\n              $$.updateXDomain(null, true, false, false, domain);\r\n              $$.redraw({ withY: $$.config.zoom_rescale, withSubchart: false });\r\n          }\r\n          $$.config.zoom_onzoom.call(this, $$.x.orgDomain());\r\n          return domain;\r\n      }\r\n      else {\r\n          return $$.x.domain();\r\n      }\r\n  };\r\n  Chart.prototype.zoom.enable = function (enabled) {\r\n      var $$ = this.internal;\r\n      $$.config.zoom_enabled = enabled;\r\n      $$.updateAndRedraw();\r\n  };\r\n  Chart.prototype.unzoom = function () {\r\n      var $$ = this.internal;\r\n      if ($$.config.subchart_show) {\r\n          $$.brush.clear();\r\n      }\r\n      else {\r\n          $$.updateXDomain(null, true, false, false, $$.subX.domain());\r\n          $$.redraw({ withY: $$.config.zoom_rescale, withSubchart: false });\r\n      }\r\n  };\r\n  Chart.prototype.zoom.max = function (max) {\r\n      var $$ = this.internal, config = $$.config, d3 = $$.d3;\r\n      if (max === 0 || max) {\r\n          config.zoom_x_max = d3.max([$$.orgXDomain[1], max]);\r\n      }\r\n      else {\r\n          return config.zoom_x_max;\r\n      }\r\n  };\r\n  Chart.prototype.zoom.min = function (min) {\r\n      var $$ = this.internal, config = $$.config, d3 = $$.d3;\r\n      if (min === 0 || min) {\r\n          config.zoom_x_min = d3.min([$$.orgXDomain[0], min]);\r\n      }\r\n      else {\r\n          return config.zoom_x_min;\r\n      }\r\n  };\r\n  Chart.prototype.zoom.range = function (range) {\r\n      if (arguments.length) {\r\n          if (isDefined(range.max)) {\r\n              this.domain.max(range.max);\r\n          }\r\n          if (isDefined(range.min)) {\r\n              this.domain.min(range.min);\r\n          }\r\n      }\r\n      else {\r\n          return {\r\n              max: this.domain.max(),\r\n              min: this.domain.min()\r\n          };\r\n      }\r\n  };\n\n  ChartInternal.prototype.initPie = function () {\r\n      var $$ = this, d3 = $$.d3;\r\n      $$.pie = d3\r\n          .pie()\r\n          .padAngle(this.getPadAngle.bind(this))\r\n          .value(function (d) {\r\n          return d.values.reduce(function (a, b) {\r\n              return a + b.value;\r\n          }, 0);\r\n      });\r\n      var orderFct = $$.getOrderFunction();\r\n      // we need to reverse the returned order if asc or desc to have the slice in expected order.\r\n      if (orderFct && ($$.isOrderAsc() || $$.isOrderDesc())) {\r\n          var defaultSort_1 = orderFct;\r\n          orderFct = function (t1, t2) { return defaultSort_1(t1, t2) * -1; };\r\n      }\r\n      $$.pie.sort(orderFct || null);\r\n  };\r\n  ChartInternal.prototype.updateRadius = function () {\r\n      var $$ = this, config = $$.config, w = config.gauge_width || config.donut_width, gaugeArcWidth = $$.filterTargetsToShow($$.data.targets).length *\r\n          $$.config.gauge_arcs_minWidth;\r\n      $$.radiusExpanded =\r\n          (Math.min($$.arcWidth, $$.arcHeight) / 2) * ($$.hasType('gauge') ? 0.85 : 1);\r\n      $$.radius = $$.radiusExpanded * 0.95;\r\n      $$.innerRadiusRatio = w ? ($$.radius - w) / $$.radius : 0.6;\r\n      $$.innerRadius =\r\n          $$.hasType('donut') || $$.hasType('gauge')\r\n              ? $$.radius * $$.innerRadiusRatio\r\n              : 0;\r\n      $$.gaugeArcWidth = w\r\n          ? w\r\n          : gaugeArcWidth <= $$.radius - $$.innerRadius\r\n              ? $$.radius - $$.innerRadius\r\n              : gaugeArcWidth <= $$.radius\r\n                  ? gaugeArcWidth\r\n                  : $$.radius;\r\n  };\r\n  ChartInternal.prototype.getPadAngle = function () {\r\n      if (this.hasType('pie')) {\r\n          return this.config.pie_padAngle || 0;\r\n      }\r\n      else if (this.hasType('donut')) {\r\n          return this.config.donut_padAngle || 0;\r\n      }\r\n      else {\r\n          return 0;\r\n      }\r\n  };\r\n  ChartInternal.prototype.updateArc = function () {\r\n      var $$ = this;\r\n      $$.svgArc = $$.getSvgArc();\r\n      $$.svgArcExpanded = $$.getSvgArcExpanded();\r\n      $$.svgArcExpandedSub = $$.getSvgArcExpanded(0.98);\r\n  };\r\n  ChartInternal.prototype.updateAngle = function (d) {\r\n      var $$ = this, config = $$.config, found = false, index = 0, gMin, gMax, gTic, gValue;\r\n      if (!config) {\r\n          return null;\r\n      }\r\n      $$.pie($$.filterTargetsToShow($$.data.targets)).forEach(function (t) {\r\n          if (!found && t.data.id === d.data.id) {\r\n              found = true;\r\n              d = t;\r\n              d.index = index;\r\n          }\r\n          index++;\r\n      });\r\n      if (isNaN(d.startAngle)) {\r\n          d.startAngle = 0;\r\n      }\r\n      if (isNaN(d.endAngle)) {\r\n          d.endAngle = d.startAngle;\r\n      }\r\n      if ($$.isGaugeType(d.data)) {\r\n          gMin = config.gauge_min;\r\n          gMax = config.gauge_max;\r\n          gTic = (Math.PI * (config.gauge_fullCircle ? 2 : 1)) / (gMax - gMin);\r\n          gValue = d.value < gMin ? 0 : d.value < gMax ? d.value - gMin : gMax - gMin;\r\n          d.startAngle = config.gauge_startingAngle;\r\n          d.endAngle = d.startAngle + gTic * gValue;\r\n      }\r\n      return found ? d : null;\r\n  };\r\n  ChartInternal.prototype.getSvgArc = function () {\r\n      var $$ = this, hasGaugeType = $$.hasType('gauge'), singleArcWidth = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length, arc = $$.d3\r\n          .arc()\r\n          .outerRadius(function (d) {\r\n          return hasGaugeType ? $$.radius - singleArcWidth * d.index : $$.radius;\r\n      })\r\n          .innerRadius(function (d) {\r\n          return hasGaugeType\r\n              ? $$.radius - singleArcWidth * (d.index + 1)\r\n              : $$.innerRadius;\r\n      }), newArc = function (d, withoutUpdate) {\r\n          var updated;\r\n          if (withoutUpdate) {\r\n              return arc(d);\r\n          } // for interpolate\r\n          updated = $$.updateAngle(d);\r\n          return updated ? arc(updated) : 'M 0 0';\r\n      };\r\n      newArc.centroid = arc.centroid;\r\n      return newArc;\r\n  };\r\n  ChartInternal.prototype.getSvgArcExpanded = function (rate) {\r\n      rate = rate || 1;\r\n      var $$ = this, hasGaugeType = $$.hasType('gauge'), singleArcWidth = $$.gaugeArcWidth / $$.filterTargetsToShow($$.data.targets).length, expandWidth = Math.min($$.radiusExpanded * rate - $$.radius, singleArcWidth * 0.8 - (1 - rate) * 100), arc = $$.d3\r\n          .arc()\r\n          .outerRadius(function (d) {\r\n          return hasGaugeType\r\n              ? $$.radius - singleArcWidth * d.index + expandWidth\r\n              : $$.radiusExpanded * rate;\r\n      })\r\n          .innerRadius(function (d) {\r\n          return hasGaugeType\r\n              ? $$.radius - singleArcWidth * (d.index + 1)\r\n              : $$.innerRadius;\r\n      });\r\n      return function (d) {\r\n          var updated = $$.updateAngle(d);\r\n          return updated ? arc(updated) : 'M 0 0';\r\n      };\r\n  };\r\n  ChartInternal.prototype.getArc = function (d, withoutUpdate, force) {\r\n      return force || this.isArcType(d.data)\r\n          ? this.svgArc(d, withoutUpdate)\r\n          : 'M 0 0';\r\n  };\r\n  ChartInternal.prototype.transformForArcLabel = function (d) {\r\n      var $$ = this, config = $$.config, updated = $$.updateAngle(d), c, x, y, h, ratio, translate = '', hasGauge = $$.hasType('gauge');\r\n      if (updated && !hasGauge) {\r\n          c = this.svgArc.centroid(updated);\r\n          x = isNaN(c[0]) ? 0 : c[0];\r\n          y = isNaN(c[1]) ? 0 : c[1];\r\n          h = Math.sqrt(x * x + y * y);\r\n          if ($$.hasType('donut') && config.donut_label_ratio) {\r\n              ratio = isFunction(config.donut_label_ratio)\r\n                  ? config.donut_label_ratio(d, $$.radius, h)\r\n                  : config.donut_label_ratio;\r\n          }\r\n          else if ($$.hasType('pie') && config.pie_label_ratio) {\r\n              ratio = isFunction(config.pie_label_ratio)\r\n                  ? config.pie_label_ratio(d, $$.radius, h)\r\n                  : config.pie_label_ratio;\r\n          }\r\n          else {\r\n              ratio =\r\n                  $$.radius && h\r\n                      ? ((36 / $$.radius > 0.375 ? 1.175 - 36 / $$.radius : 0.8) *\r\n                          $$.radius) /\r\n                          h\r\n                      : 0;\r\n          }\r\n          translate = 'translate(' + x * ratio + ',' + y * ratio + ')';\r\n      }\r\n      else if (updated &&\r\n          hasGauge &&\r\n          $$.filterTargetsToShow($$.data.targets).length > 1) {\r\n          var y1 = Math.sin(updated.endAngle - Math.PI / 2);\r\n          x = Math.cos(updated.endAngle - Math.PI / 2) * ($$.radiusExpanded + 25);\r\n          y = y1 * ($$.radiusExpanded + 15 - Math.abs(y1 * 10)) + 3;\r\n          translate = 'translate(' + x + ',' + y + ')';\r\n      }\r\n      return translate;\r\n  };\r\n  /**\r\n   * @deprecated Use `getRatio('arc', d)` instead.\r\n   */\r\n  ChartInternal.prototype.getArcRatio = function (d) {\r\n      return this.getRatio('arc', d);\r\n  };\r\n  ChartInternal.prototype.convertToArcData = function (d) {\r\n      return this.addName({\r\n          id: d.data.id,\r\n          value: d.value,\r\n          ratio: this.getRatio('arc', d),\r\n          index: d.index\r\n      });\r\n  };\r\n  ChartInternal.prototype.textForArcLabel = function (d) {\r\n      var $$ = this, updated, value, ratio, id, format;\r\n      if (!$$.shouldShowArcLabel()) {\r\n          return '';\r\n      }\r\n      updated = $$.updateAngle(d);\r\n      value = updated ? updated.value : null;\r\n      ratio = $$.getRatio('arc', updated);\r\n      id = d.data.id;\r\n      if (!$$.hasType('gauge') && !$$.meetsArcLabelThreshold(ratio)) {\r\n          return '';\r\n      }\r\n      format = $$.getArcLabelFormat();\r\n      return format\r\n          ? format(value, ratio, id)\r\n          : $$.defaultArcValueFormat(value, ratio);\r\n  };\r\n  ChartInternal.prototype.textForGaugeMinMax = function (value, isMax) {\r\n      var $$ = this, format = $$.getGaugeLabelExtents();\r\n      return format ? format(value, isMax) : value;\r\n  };\r\n  ChartInternal.prototype.expandArc = function (targetIds) {\r\n      var $$ = this, interval;\r\n      // MEMO: avoid to cancel transition\r\n      if ($$.transiting) {\r\n          interval = window.setInterval(function () {\r\n              if (!$$.transiting) {\r\n                  window.clearInterval(interval);\r\n                  if ($$.legend.selectAll('.c3-legend-item-focused').size() > 0) {\r\n                      $$.expandArc(targetIds);\r\n                  }\r\n              }\r\n          }, 10);\r\n          return;\r\n      }\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      $$.svg\r\n          .selectAll($$.selectorTargets(targetIds, '.' + CLASS.chartArc))\r\n          .each(function (d) {\r\n          if (!$$.shouldExpand(d.data.id)) {\r\n              return;\r\n          }\r\n          $$.d3\r\n              .select(this)\r\n              .selectAll('path')\r\n              .transition()\r\n              .duration($$.expandDuration(d.data.id))\r\n              .attr('d', $$.svgArcExpanded)\r\n              .transition()\r\n              .duration($$.expandDuration(d.data.id) * 2)\r\n              .attr('d', $$.svgArcExpandedSub)\r\n              .each(function (d) {\r\n              if ($$.isDonutType(d.data)) ;\r\n          });\r\n      });\r\n  };\r\n  ChartInternal.prototype.unexpandArc = function (targetIds) {\r\n      var $$ = this;\r\n      if ($$.transiting) {\r\n          return;\r\n      }\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      $$.svg\r\n          .selectAll($$.selectorTargets(targetIds, '.' + CLASS.chartArc))\r\n          .selectAll('path')\r\n          .transition()\r\n          .duration(function (d) {\r\n          return $$.expandDuration(d.data.id);\r\n      })\r\n          .attr('d', $$.svgArc);\r\n      $$.svg.selectAll('.' + CLASS.arc);\r\n  };\r\n  ChartInternal.prototype.expandDuration = function (id) {\r\n      var $$ = this, config = $$.config;\r\n      if ($$.isDonutType(id)) {\r\n          return config.donut_expand_duration;\r\n      }\r\n      else if ($$.isGaugeType(id)) {\r\n          return config.gauge_expand_duration;\r\n      }\r\n      else if ($$.isPieType(id)) {\r\n          return config.pie_expand_duration;\r\n      }\r\n      else {\r\n          return 50;\r\n      }\r\n  };\r\n  ChartInternal.prototype.shouldExpand = function (id) {\r\n      var $$ = this, config = $$.config;\r\n      return (($$.isDonutType(id) && config.donut_expand) ||\r\n          ($$.isGaugeType(id) && config.gauge_expand) ||\r\n          ($$.isPieType(id) && config.pie_expand));\r\n  };\r\n  ChartInternal.prototype.shouldShowArcLabel = function () {\r\n      var $$ = this, config = $$.config, shouldShow = true;\r\n      if ($$.hasType('donut')) {\r\n          shouldShow = config.donut_label_show;\r\n      }\r\n      else if ($$.hasType('pie')) {\r\n          shouldShow = config.pie_label_show;\r\n      }\r\n      // when gauge, always true\r\n      return shouldShow;\r\n  };\r\n  ChartInternal.prototype.meetsArcLabelThreshold = function (ratio) {\r\n      var $$ = this, config = $$.config, threshold = $$.hasType('donut')\r\n          ? config.donut_label_threshold\r\n          : config.pie_label_threshold;\r\n      return ratio >= threshold;\r\n  };\r\n  ChartInternal.prototype.getArcLabelFormat = function () {\r\n      var $$ = this, config = $$.config, format = config.pie_label_format;\r\n      if ($$.hasType('gauge')) {\r\n          format = config.gauge_label_format;\r\n      }\r\n      else if ($$.hasType('donut')) {\r\n          format = config.donut_label_format;\r\n      }\r\n      return format;\r\n  };\r\n  ChartInternal.prototype.getGaugeLabelExtents = function () {\r\n      var $$ = this, config = $$.config;\r\n      return config.gauge_label_extents;\r\n  };\r\n  ChartInternal.prototype.getArcTitle = function () {\r\n      var $$ = this;\r\n      return $$.hasType('donut') ? $$.config.donut_title : '';\r\n  };\r\n  ChartInternal.prototype.updateTargetsForArc = function (targets) {\r\n      var $$ = this, main = $$.main, mainPies, mainPieEnter, classChartArc = $$.classChartArc.bind($$), classArcs = $$.classArcs.bind($$), classFocus = $$.classFocus.bind($$);\r\n      mainPies = main\r\n          .select('.' + CLASS.chartArcs)\r\n          .selectAll('.' + CLASS.chartArc)\r\n          .data($$.pie(targets))\r\n          .attr('class', function (d) {\r\n          return classChartArc(d) + classFocus(d.data);\r\n      });\r\n      mainPieEnter = mainPies\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', classChartArc);\r\n      mainPieEnter.append('g').attr('class', classArcs);\r\n      mainPieEnter\r\n          .append('text')\r\n          .attr('dy', $$.hasType('gauge') ? '-.1em' : '.35em')\r\n          .style('opacity', 0)\r\n          .style('text-anchor', 'middle')\r\n          .style('pointer-events', 'none');\r\n      // MEMO: can not keep same color..., but not bad to update color in redraw\r\n      //mainPieUpdate.exit().remove();\r\n  };\r\n  ChartInternal.prototype.initArc = function () {\r\n      var $$ = this;\r\n      $$.arcs = $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.chartArcs)\r\n          .attr('transform', $$.getTranslate('arc'));\r\n      $$.arcs\r\n          .append('text')\r\n          .attr('class', CLASS.chartArcsTitle)\r\n          .style('text-anchor', 'middle')\r\n          .text($$.getArcTitle());\r\n  };\r\n  ChartInternal.prototype.redrawArc = function (duration, durationForExit, withTransform) {\r\n      var $$ = this, d3 = $$.d3, config = $$.config, main = $$.main, arcs, mainArc, arcLabelLines, mainArcLabelLine, hasGaugeType = $$.hasType('gauge');\r\n      arcs = main\r\n          .selectAll('.' + CLASS.arcs)\r\n          .selectAll('.' + CLASS.arc)\r\n          .data($$.arcData.bind($$));\r\n      mainArc = arcs\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', $$.classArc.bind($$))\r\n          .style('fill', function (d) {\r\n          return $$.color(d.data);\r\n      })\r\n          .style('cursor', function (d) {\r\n          return config.interaction_enabled && config.data_selection_isselectable(d)\r\n              ? 'pointer'\r\n              : null;\r\n      })\r\n          .each(function (d) {\r\n          if ($$.isGaugeType(d.data)) {\r\n              d.startAngle = d.endAngle = config.gauge_startingAngle;\r\n          }\r\n          this._current = d;\r\n      })\r\n          .merge(arcs);\r\n      if (hasGaugeType) {\r\n          arcLabelLines = main\r\n              .selectAll('.' + CLASS.arcs)\r\n              .selectAll('.' + CLASS.arcLabelLine)\r\n              .data($$.arcData.bind($$));\r\n          mainArcLabelLine = arcLabelLines\r\n              .enter()\r\n              .append('rect')\r\n              .attr('class', function (d) {\r\n              return (CLASS.arcLabelLine +\r\n                  ' ' +\r\n                  CLASS.target +\r\n                  ' ' +\r\n                  CLASS.target +\r\n                  '-' +\r\n                  d.data.id);\r\n          })\r\n              .merge(arcLabelLines);\r\n          if ($$.filterTargetsToShow($$.data.targets).length === 1) {\r\n              mainArcLabelLine.style('display', 'none');\r\n          }\r\n          else {\r\n              mainArcLabelLine\r\n                  .style('fill', function (d) {\r\n                  return $$.levelColor\r\n                      ? $$.levelColor(d.data.values.reduce(function (total, item) {\r\n                          return total + item.value;\r\n                      }, 0))\r\n                      : $$.color(d.data);\r\n              })\r\n                  .style('display', config.gauge_labelLine_show ? '' : 'none')\r\n                  .each(function (d) {\r\n                  var lineLength = 0, lineThickness = 2, x = 0, y = 0, transform = '';\r\n                  if ($$.hiddenTargetIds.indexOf(d.data.id) < 0) {\r\n                      var updated = $$.updateAngle(d), innerLineLength = ($$.gaugeArcWidth /\r\n                          $$.filterTargetsToShow($$.data.targets).length) *\r\n                          (updated.index + 1), lineAngle = updated.endAngle - Math.PI / 2, arcInnerRadius = $$.radius - innerLineLength, linePositioningAngle = lineAngle - (arcInnerRadius === 0 ? 0 : 1 / arcInnerRadius);\r\n                      lineLength = $$.radiusExpanded - $$.radius + innerLineLength;\r\n                      x = Math.cos(linePositioningAngle) * arcInnerRadius;\r\n                      y = Math.sin(linePositioningAngle) * arcInnerRadius;\r\n                      transform =\r\n                          'rotate(' +\r\n                              (lineAngle * 180) / Math.PI +\r\n                              ', ' +\r\n                              x +\r\n                              ', ' +\r\n                              y +\r\n                              ')';\r\n                  }\r\n                  d3.select(this)\r\n                      .attr('x', x)\r\n                      .attr('y', y)\r\n                      .attr('width', lineLength)\r\n                      .attr('height', lineThickness)\r\n                      .attr('transform', transform)\r\n                      .style('stroke-dasharray', '0, ' + (lineLength + lineThickness) + ', 0');\r\n              });\r\n          }\r\n      }\r\n      mainArc\r\n          .attr('transform', function (d) {\r\n          return !$$.isGaugeType(d.data) && withTransform ? 'scale(0)' : '';\r\n      })\r\n          .on('mouseover', config.interaction_enabled\r\n          ? function (d) {\r\n              var updated, arcData;\r\n              if ($$.transiting) {\r\n                  // skip while transiting\r\n                  return;\r\n              }\r\n              updated = $$.updateAngle(d);\r\n              if (updated) {\r\n                  arcData = $$.convertToArcData(updated);\r\n                  // transitions\r\n                  $$.expandArc(updated.data.id);\r\n                  $$.api.focus(updated.data.id);\r\n                  $$.toggleFocusLegend(updated.data.id, true);\r\n                  $$.config.data_onmouseover(arcData, this);\r\n              }\r\n          }\r\n          : null)\r\n          .on('mousemove', config.interaction_enabled\r\n          ? function (d) {\r\n              var updated = $$.updateAngle(d), arcData, selectedData;\r\n              if (updated) {\r\n                  (arcData = $$.convertToArcData(updated)),\r\n                      (selectedData = [arcData]);\r\n                  $$.showTooltip(selectedData, this);\r\n              }\r\n          }\r\n          : null)\r\n          .on('mouseout', config.interaction_enabled\r\n          ? function (d) {\r\n              var updated, arcData;\r\n              if ($$.transiting) {\r\n                  // skip while transiting\r\n                  return;\r\n              }\r\n              updated = $$.updateAngle(d);\r\n              if (updated) {\r\n                  arcData = $$.convertToArcData(updated);\r\n                  // transitions\r\n                  $$.unexpandArc(updated.data.id);\r\n                  $$.api.revert();\r\n                  $$.revertLegend();\r\n                  $$.hideTooltip();\r\n                  $$.config.data_onmouseout(arcData, this);\r\n              }\r\n          }\r\n          : null)\r\n          .on('click', config.interaction_enabled\r\n          ? function (d, i) {\r\n              var updated = $$.updateAngle(d), arcData;\r\n              if (updated) {\r\n                  arcData = $$.convertToArcData(updated);\r\n                  if ($$.toggleShape) {\r\n                      $$.toggleShape(this, arcData, i);\r\n                  }\r\n                  $$.config.data_onclick.call($$.api, arcData, this);\r\n              }\r\n          }\r\n          : null)\r\n          .each(function () {\r\n          $$.transiting = true;\r\n      })\r\n          .transition()\r\n          .duration(duration)\r\n          .attrTween('d', function (d) {\r\n          var updated = $$.updateAngle(d), interpolate;\r\n          if (!updated) {\r\n              return function () {\r\n                  return 'M 0 0';\r\n              };\r\n          }\r\n          //                if (this._current === d) {\r\n          //                    this._current = {\r\n          //                        startAngle: Math.PI*2,\r\n          //                        endAngle: Math.PI*2,\r\n          //                    };\r\n          //                }\r\n          if (isNaN(this._current.startAngle)) {\r\n              this._current.startAngle = 0;\r\n          }\r\n          if (isNaN(this._current.endAngle)) {\r\n              this._current.endAngle = this._current.startAngle;\r\n          }\r\n          interpolate = d3.interpolate(this._current, updated);\r\n          this._current = interpolate(0);\r\n          return function (t) {\r\n              // prevents crashing the charts once in transition and chart.destroy() has been called\r\n              if ($$.config === null) {\r\n                  return 'M 0 0';\r\n              }\r\n              var interpolated = interpolate(t);\r\n              interpolated.data = d.data; // data.id will be updated by interporator\r\n              return $$.getArc(interpolated, true);\r\n          };\r\n      })\r\n          .attr('transform', withTransform ? 'scale(1)' : '')\r\n          .style('fill', function (d) {\r\n          return $$.levelColor\r\n              ? $$.levelColor(d.data.values.reduce(function (total, item) {\r\n                  return total + item.value;\r\n              }, 0))\r\n              : $$.color(d.data.id);\r\n      }) // Where gauge reading color would receive customization.\r\n          .call($$.endall, function () {\r\n          $$.transiting = false;\r\n      });\r\n      arcs\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      main\r\n          .selectAll('.' + CLASS.chartArc)\r\n          .select('text')\r\n          .style('opacity', 0)\r\n          .attr('class', function (d) {\r\n          return $$.isGaugeType(d.data) ? CLASS.gaugeValue : '';\r\n      })\r\n          .text($$.textForArcLabel.bind($$))\r\n          .attr('transform', $$.transformForArcLabel.bind($$))\r\n          .style('font-size', function (d) {\r\n          return $$.isGaugeType(d.data) &&\r\n              $$.filterTargetsToShow($$.data.targets).length === 1\r\n              ? Math.round($$.radius / 5) + 'px'\r\n              : '';\r\n      })\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', function (d) {\r\n          return $$.isTargetToShow(d.data.id) && $$.isArcType(d.data) ? 1 : 0;\r\n      });\r\n      main\r\n          .select('.' + CLASS.chartArcsTitle)\r\n          .style('opacity', $$.hasType('donut') || hasGaugeType ? 1 : 0);\r\n      if (hasGaugeType) {\r\n          var index_1 = 0;\r\n          var backgroundArc = $$.arcs\r\n              .select('g.' + CLASS.chartArcsBackground)\r\n              .selectAll('path.' + CLASS.chartArcsBackground)\r\n              .data($$.data.targets);\r\n          backgroundArc\r\n              .enter()\r\n              .append('path')\r\n              .attr('class', function (d, i) {\r\n              return CLASS.chartArcsBackground + ' ' + CLASS.chartArcsBackground + '-' + i;\r\n          })\r\n              .merge(backgroundArc)\r\n              .attr('d', function (d1) {\r\n              if ($$.hiddenTargetIds.indexOf(d1.id) >= 0) {\r\n                  return 'M 0 0';\r\n              }\r\n              var d = {\r\n                  data: [{ value: config.gauge_max }],\r\n                  startAngle: config.gauge_startingAngle,\r\n                  endAngle: -1 *\r\n                      config.gauge_startingAngle *\r\n                      (config.gauge_fullCircle ? Math.PI : 1),\r\n                  index: index_1++\r\n              };\r\n              return $$.getArc(d, true, true);\r\n          });\r\n          backgroundArc.exit().remove();\r\n          $$.arcs\r\n              .select('.' + CLASS.chartArcsGaugeUnit)\r\n              .attr('dy', '.75em')\r\n              .text(config.gauge_label_show ? config.gauge_units : '');\r\n          $$.arcs\r\n              .select('.' + CLASS.chartArcsGaugeMin)\r\n              .attr('dx', -1 *\r\n              ($$.innerRadius +\r\n                  ($$.radius - $$.innerRadius) / (config.gauge_fullCircle ? 1 : 2)) +\r\n              'px')\r\n              .attr('dy', '1.2em')\r\n              .text(config.gauge_label_show\r\n              ? $$.textForGaugeMinMax(config.gauge_min, false)\r\n              : '');\r\n          $$.arcs\r\n              .select('.' + CLASS.chartArcsGaugeMax)\r\n              .attr('dx', $$.innerRadius +\r\n              ($$.radius - $$.innerRadius) / (config.gauge_fullCircle ? 1 : 2) +\r\n              'px')\r\n              .attr('dy', '1.2em')\r\n              .text(config.gauge_label_show\r\n              ? $$.textForGaugeMinMax(config.gauge_max, true)\r\n              : '');\r\n      }\r\n  };\r\n  ChartInternal.prototype.initGauge = function () {\r\n      var arcs = this.arcs;\r\n      if (this.hasType('gauge')) {\r\n          arcs.append('g').attr('class', CLASS.chartArcsBackground);\r\n          arcs\r\n              .append('text')\r\n              .attr('class', CLASS.chartArcsGaugeUnit)\r\n              .style('text-anchor', 'middle')\r\n              .style('pointer-events', 'none');\r\n          arcs\r\n              .append('text')\r\n              .attr('class', CLASS.chartArcsGaugeMin)\r\n              .style('text-anchor', 'middle')\r\n              .style('pointer-events', 'none');\r\n          arcs\r\n              .append('text')\r\n              .attr('class', CLASS.chartArcsGaugeMax)\r\n              .style('text-anchor', 'middle')\r\n              .style('pointer-events', 'none');\r\n      }\r\n  };\r\n  ChartInternal.prototype.getGaugeLabelHeight = function () {\r\n      return this.config.gauge_label_show ? 20 : 0;\r\n  };\n\n  /**\r\n   * Store value into cache\r\n   *\r\n   * @param key\r\n   * @param value\r\n   */\r\n  ChartInternal.prototype.addToCache = function (key, value) {\r\n      this.cache[\"$\" + key] = value;\r\n  };\r\n  /**\r\n   * Returns a cached value or undefined\r\n   *\r\n   * @param key\r\n   * @return {*}\r\n   */\r\n  ChartInternal.prototype.getFromCache = function (key) {\r\n      return this.cache[\"$\" + key];\r\n  };\r\n  /**\r\n   * Reset cached data\r\n   */\r\n  ChartInternal.prototype.resetCache = function () {\r\n      var _this = this;\r\n      Object.keys(this.cache)\r\n          .filter(function (key) { return /^\\$/.test(key); })\r\n          .forEach(function (key) {\r\n          delete _this.cache[key];\r\n      });\r\n  };\r\n  // Old API that stores Targets\r\n  ChartInternal.prototype.hasCaches = function (ids) {\r\n      for (var i = 0; i < ids.length; i++) {\r\n          if (!(ids[i] in this.cache)) {\r\n              return false;\r\n          }\r\n      }\r\n      return true;\r\n  };\r\n  ChartInternal.prototype.addCache = function (id, target) {\r\n      this.cache[id] = this.cloneTarget(target);\r\n  };\r\n  ChartInternal.prototype.getCaches = function (ids) {\r\n      var targets = [], i;\r\n      for (i = 0; i < ids.length; i++) {\r\n          if (ids[i] in this.cache) {\r\n              targets.push(this.cloneTarget(this.cache[ids[i]]));\r\n          }\r\n      }\r\n      return targets;\r\n  };\n\n  ChartInternal.prototype.categoryName = function (i) {\r\n      var config = this.config;\r\n      return i < config.axis_x_categories.length ? config.axis_x_categories[i] : i;\r\n  };\n\n  ChartInternal.prototype.generateTargetClass = function (targetId) {\r\n      return targetId || targetId === 0 ? ('-' + targetId).replace(/\\s/g, '-') : '';\r\n  };\r\n  ChartInternal.prototype.generateClass = function (prefix, targetId) {\r\n      return ' ' + prefix + ' ' + prefix + this.generateTargetClass(targetId);\r\n  };\r\n  ChartInternal.prototype.classText = function (d) {\r\n      return this.generateClass(CLASS.text, d.index);\r\n  };\r\n  ChartInternal.prototype.classTexts = function (d) {\r\n      return this.generateClass(CLASS.texts, d.id);\r\n  };\r\n  ChartInternal.prototype.classShape = function (d) {\r\n      return this.generateClass(CLASS.shape, d.index);\r\n  };\r\n  ChartInternal.prototype.classShapes = function (d) {\r\n      return this.generateClass(CLASS.shapes, d.id);\r\n  };\r\n  ChartInternal.prototype.classLine = function (d) {\r\n      return this.classShape(d) + this.generateClass(CLASS.line, d.id);\r\n  };\r\n  ChartInternal.prototype.classLines = function (d) {\r\n      return this.classShapes(d) + this.generateClass(CLASS.lines, d.id);\r\n  };\r\n  ChartInternal.prototype.classCircle = function (d) {\r\n      return this.classShape(d) + this.generateClass(CLASS.circle, d.index);\r\n  };\r\n  ChartInternal.prototype.classCircles = function (d) {\r\n      return this.classShapes(d) + this.generateClass(CLASS.circles, d.id);\r\n  };\r\n  ChartInternal.prototype.classBar = function (d) {\r\n      return this.classShape(d) + this.generateClass(CLASS.bar, d.index);\r\n  };\r\n  ChartInternal.prototype.classBars = function (d) {\r\n      return this.classShapes(d) + this.generateClass(CLASS.bars, d.id);\r\n  };\r\n  ChartInternal.prototype.classArc = function (d) {\r\n      return this.classShape(d.data) + this.generateClass(CLASS.arc, d.data.id);\r\n  };\r\n  ChartInternal.prototype.classArcs = function (d) {\r\n      return this.classShapes(d.data) + this.generateClass(CLASS.arcs, d.data.id);\r\n  };\r\n  ChartInternal.prototype.classArea = function (d) {\r\n      return this.classShape(d) + this.generateClass(CLASS.area, d.id);\r\n  };\r\n  ChartInternal.prototype.classAreas = function (d) {\r\n      return this.classShapes(d) + this.generateClass(CLASS.areas, d.id);\r\n  };\r\n  ChartInternal.prototype.classRegion = function (d, i) {\r\n      return (this.generateClass(CLASS.region, i) + ' ' + ('class' in d ? d['class'] : ''));\r\n  };\r\n  ChartInternal.prototype.classEvent = function (d) {\r\n      return this.generateClass(CLASS.eventRect, d.index);\r\n  };\r\n  ChartInternal.prototype.classTarget = function (id) {\r\n      var $$ = this;\r\n      var additionalClassSuffix = $$.config.data_classes[id], additionalClass = '';\r\n      if (additionalClassSuffix) {\r\n          additionalClass = ' ' + CLASS.target + '-' + additionalClassSuffix;\r\n      }\r\n      return $$.generateClass(CLASS.target, id) + additionalClass;\r\n  };\r\n  ChartInternal.prototype.classFocus = function (d) {\r\n      return this.classFocused(d) + this.classDefocused(d);\r\n  };\r\n  ChartInternal.prototype.classFocused = function (d) {\r\n      return ' ' + (this.focusedTargetIds.indexOf(d.id) >= 0 ? CLASS.focused : '');\r\n  };\r\n  ChartInternal.prototype.classDefocused = function (d) {\r\n      return (' ' + (this.defocusedTargetIds.indexOf(d.id) >= 0 ? CLASS.defocused : ''));\r\n  };\r\n  ChartInternal.prototype.classChartText = function (d) {\r\n      return CLASS.chartText + this.classTarget(d.id);\r\n  };\r\n  ChartInternal.prototype.classChartLine = function (d) {\r\n      return CLASS.chartLine + this.classTarget(d.id);\r\n  };\r\n  ChartInternal.prototype.classChartBar = function (d) {\r\n      return CLASS.chartBar + this.classTarget(d.id);\r\n  };\r\n  ChartInternal.prototype.classChartArc = function (d) {\r\n      return CLASS.chartArc + this.classTarget(d.data.id);\r\n  };\r\n  ChartInternal.prototype.getTargetSelectorSuffix = function (targetId) {\r\n      var targetClass = this.generateTargetClass(targetId);\r\n      if (window.CSS && window.CSS.escape) {\r\n          return window.CSS.escape(targetClass);\r\n      }\r\n      // fallback on imperfect method for old browsers (does not handles unicode)\r\n      return targetClass.replace(/([?!@#$%^&*()=+,.<>'\":;\\[\\]\\/|~`{}\\\\])/g, '\\\\$1');\r\n  };\r\n  ChartInternal.prototype.selectorTarget = function (id, prefix) {\r\n      return (prefix || '') + '.' + CLASS.target + this.getTargetSelectorSuffix(id);\r\n  };\r\n  ChartInternal.prototype.selectorTargets = function (ids, prefix) {\r\n      var $$ = this;\r\n      ids = ids || [];\r\n      return ids.length\r\n          ? ids.map(function (id) {\r\n              return $$.selectorTarget(id, prefix);\r\n          })\r\n          : null;\r\n  };\r\n  ChartInternal.prototype.selectorLegend = function (id) {\r\n      return '.' + CLASS.legendItem + this.getTargetSelectorSuffix(id);\r\n  };\r\n  ChartInternal.prototype.selectorLegends = function (ids) {\r\n      var $$ = this;\r\n      return ids && ids.length\r\n          ? ids.map(function (id) {\r\n              return $$.selectorLegend(id);\r\n          })\r\n          : null;\r\n  };\n\n  ChartInternal.prototype.getClipPath = function (id) {\r\n      return 'url(' + (isIE(9) ? '' : document.URL.split('#')[0]) + '#' + id + ')';\r\n  };\r\n  ChartInternal.prototype.appendClip = function (parent, id) {\r\n      return parent\r\n          .append('clipPath')\r\n          .attr('id', id)\r\n          .append('rect');\r\n  };\r\n  ChartInternal.prototype.getAxisClipX = function (forHorizontal) {\r\n      // axis line width + padding for left\r\n      var left = Math.max(30, this.margin.left);\r\n      return forHorizontal ? -(1 + left) : -(left - 1);\r\n  };\r\n  ChartInternal.prototype.getAxisClipY = function (forHorizontal) {\r\n      return forHorizontal ? -20 : -this.margin.top;\r\n  };\r\n  ChartInternal.prototype.getXAxisClipX = function () {\r\n      var $$ = this;\r\n      return $$.getAxisClipX(!$$.config.axis_rotated);\r\n  };\r\n  ChartInternal.prototype.getXAxisClipY = function () {\r\n      var $$ = this;\r\n      return $$.getAxisClipY(!$$.config.axis_rotated);\r\n  };\r\n  ChartInternal.prototype.getYAxisClipX = function () {\r\n      var $$ = this;\r\n      return $$.config.axis_y_inner ? -1 : $$.getAxisClipX($$.config.axis_rotated);\r\n  };\r\n  ChartInternal.prototype.getYAxisClipY = function () {\r\n      var $$ = this;\r\n      return $$.getAxisClipY($$.config.axis_rotated);\r\n  };\r\n  ChartInternal.prototype.getAxisClipWidth = function (forHorizontal) {\r\n      var $$ = this, left = Math.max(30, $$.margin.left), right = Math.max(30, $$.margin.right);\r\n      // width + axis line width + padding for left/right\r\n      return forHorizontal ? $$.width + 2 + left + right : $$.margin.left + 20;\r\n  };\r\n  ChartInternal.prototype.getAxisClipHeight = function (forHorizontal) {\r\n      // less than 20 is not enough to show the axis label 'outer' without legend\r\n      return ((forHorizontal ? this.margin.bottom : this.margin.top + this.height) + 20);\r\n  };\r\n  ChartInternal.prototype.getXAxisClipWidth = function () {\r\n      var $$ = this;\r\n      return $$.getAxisClipWidth(!$$.config.axis_rotated);\r\n  };\r\n  ChartInternal.prototype.getXAxisClipHeight = function () {\r\n      var $$ = this;\r\n      return $$.getAxisClipHeight(!$$.config.axis_rotated);\r\n  };\r\n  ChartInternal.prototype.getYAxisClipWidth = function () {\r\n      var $$ = this;\r\n      return ($$.getAxisClipWidth($$.config.axis_rotated) +\r\n          ($$.config.axis_y_inner ? 20 : 0));\r\n  };\r\n  ChartInternal.prototype.getYAxisClipHeight = function () {\r\n      var $$ = this;\r\n      return $$.getAxisClipHeight($$.config.axis_rotated);\r\n  };\n\n  ChartInternal.prototype.generateColor = function () {\r\n      var $$ = this, config = $$.config, d3 = $$.d3, colors = config.data_colors, pattern = notEmpty(config.color_pattern)\r\n          ? config.color_pattern\r\n          : d3.schemeCategory10, callback = config.data_color, ids = [];\r\n      return function (d) {\r\n          var id = d.id || (d.data && d.data.id) || d, color;\r\n          // if callback function is provided\r\n          if (colors[id] instanceof Function) {\r\n              color = colors[id](d);\r\n          }\r\n          // if specified, choose that color\r\n          else if (colors[id]) {\r\n              color = colors[id];\r\n          }\r\n          // if not specified, choose from pattern\r\n          else {\r\n              if (ids.indexOf(id) < 0) {\r\n                  ids.push(id);\r\n              }\r\n              color = pattern[ids.indexOf(id) % pattern.length];\r\n              colors[id] = color;\r\n          }\r\n          return callback instanceof Function ? callback(color, d) : color;\r\n      };\r\n  };\r\n  ChartInternal.prototype.generateLevelColor = function () {\r\n      var $$ = this, config = $$.config, colors = config.color_pattern, threshold = config.color_threshold, asValue = threshold.unit === 'value', values = threshold.values && threshold.values.length ? threshold.values : [], max = threshold.max || 100;\r\n      return notEmpty(threshold) && notEmpty(colors)\r\n          ? function (value) {\r\n              var i, v, color = colors[colors.length - 1];\r\n              for (i = 0; i < values.length; i++) {\r\n                  v = asValue ? value : (value * 100) / max;\r\n                  if (v < values[i]) {\r\n                      color = colors[i];\r\n                      break;\r\n                  }\r\n              }\r\n              return color;\r\n          }\r\n          : null;\r\n  };\n\n  ChartInternal.prototype.getDefaultConfig = function () {\r\n      var config = {\r\n          bindto: '#chart',\r\n          svg_classname: undefined,\r\n          size_width: undefined,\r\n          size_height: undefined,\r\n          padding_left: undefined,\r\n          padding_right: undefined,\r\n          padding_top: undefined,\r\n          padding_bottom: undefined,\r\n          resize_auto: true,\r\n          zoom_enabled: false,\r\n          zoom_initialRange: undefined,\r\n          zoom_type: 'scroll',\r\n          zoom_disableDefaultBehavior: false,\r\n          zoom_privileged: false,\r\n          zoom_rescale: false,\r\n          zoom_onzoom: function () { },\r\n          zoom_onzoomstart: function () { },\r\n          zoom_onzoomend: function () { },\r\n          zoom_x_min: undefined,\r\n          zoom_x_max: undefined,\r\n          interaction_brighten: true,\r\n          interaction_enabled: true,\r\n          onmouseover: function () { },\r\n          onmouseout: function () { },\r\n          onresize: function () { },\r\n          onresized: function () { },\r\n          oninit: function () { },\r\n          onrendered: function () { },\r\n          transition_duration: 350,\r\n          data_epochs: 'epochs',\r\n          data_x: undefined,\r\n          data_xs: {},\r\n          data_xFormat: '%Y-%m-%d',\r\n          data_xLocaltime: true,\r\n          data_xSort: true,\r\n          data_idConverter: function (id) {\r\n              return id;\r\n          },\r\n          data_names: {},\r\n          data_classes: {},\r\n          data_groups: [],\r\n          data_axes: {},\r\n          data_type: undefined,\r\n          data_types: {},\r\n          data_labels: {},\r\n          data_order: 'desc',\r\n          data_regions: {},\r\n          data_color: undefined,\r\n          data_colors: {},\r\n          data_hide: false,\r\n          data_filter: undefined,\r\n          data_selection_enabled: false,\r\n          data_selection_grouped: false,\r\n          data_selection_isselectable: function () {\r\n              return true;\r\n          },\r\n          data_selection_multiple: true,\r\n          data_selection_draggable: false,\r\n          data_stack_normalize: false,\r\n          data_onclick: function () { },\r\n          data_onmouseover: function () { },\r\n          data_onmouseout: function () { },\r\n          data_onselected: function () { },\r\n          data_onunselected: function () { },\r\n          data_url: undefined,\r\n          data_headers: undefined,\r\n          data_json: undefined,\r\n          data_rows: undefined,\r\n          data_columns: undefined,\r\n          data_mimeType: undefined,\r\n          data_keys: undefined,\r\n          // configuration for no plot-able data supplied.\r\n          data_empty_label_text: '',\r\n          // subchart\r\n          subchart_show: false,\r\n          subchart_size_height: 60,\r\n          subchart_axis_x_show: true,\r\n          subchart_onbrush: function () { },\r\n          // color\r\n          color_pattern: [],\r\n          color_threshold: {},\r\n          // legend\r\n          legend_show: true,\r\n          legend_hide: false,\r\n          legend_position: 'bottom',\r\n          legend_inset_anchor: 'top-left',\r\n          legend_inset_x: 10,\r\n          legend_inset_y: 0,\r\n          legend_inset_step: undefined,\r\n          legend_item_onclick: undefined,\r\n          legend_item_onmouseover: undefined,\r\n          legend_item_onmouseout: undefined,\r\n          legend_equally: false,\r\n          legend_padding: 0,\r\n          legend_item_tile_width: 10,\r\n          legend_item_tile_height: 10,\r\n          // axis\r\n          axis_rotated: false,\r\n          axis_x_show: true,\r\n          axis_x_type: 'indexed',\r\n          axis_x_localtime: true,\r\n          axis_x_categories: [],\r\n          axis_x_tick_centered: false,\r\n          axis_x_tick_format: undefined,\r\n          axis_x_tick_culling: {},\r\n          axis_x_tick_culling_max: 10,\r\n          axis_x_tick_count: undefined,\r\n          axis_x_tick_fit: true,\r\n          axis_x_tick_values: null,\r\n          axis_x_tick_rotate: 0,\r\n          axis_x_tick_outer: true,\r\n          axis_x_tick_multiline: true,\r\n          axis_x_tick_multilineMax: 0,\r\n          axis_x_tick_width: null,\r\n          axis_x_max: undefined,\r\n          axis_x_min: undefined,\r\n          axis_x_padding: {},\r\n          axis_x_height: undefined,\r\n          axis_x_selection: undefined,\r\n          axis_x_label: {},\r\n          axis_x_inner: undefined,\r\n          axis_y_show: true,\r\n          axis_y_type: 'linear',\r\n          axis_y_max: undefined,\r\n          axis_y_min: undefined,\r\n          axis_y_inverted: false,\r\n          axis_y_center: undefined,\r\n          axis_y_inner: undefined,\r\n          axis_y_label: {},\r\n          axis_y_tick_format: undefined,\r\n          axis_y_tick_outer: true,\r\n          axis_y_tick_values: null,\r\n          axis_y_tick_rotate: 0,\r\n          axis_y_tick_count: undefined,\r\n          axis_y_tick_time_type: undefined,\r\n          axis_y_tick_time_interval: undefined,\r\n          axis_y_padding: {},\r\n          axis_y_default: undefined,\r\n          axis_y2_show: false,\r\n          axis_y2_type: 'linear',\r\n          axis_y2_max: undefined,\r\n          axis_y2_min: undefined,\r\n          axis_y2_inverted: false,\r\n          axis_y2_center: undefined,\r\n          axis_y2_inner: undefined,\r\n          axis_y2_label: {},\r\n          axis_y2_tick_format: undefined,\r\n          axis_y2_tick_outer: true,\r\n          axis_y2_tick_values: null,\r\n          axis_y2_tick_count: undefined,\r\n          axis_y2_padding: {},\r\n          axis_y2_default: undefined,\r\n          // grid\r\n          grid_x_show: false,\r\n          grid_x_type: 'tick',\r\n          grid_x_lines: [],\r\n          grid_y_show: false,\r\n          // not used\r\n          // grid_y_type: 'tick',\r\n          grid_y_lines: [],\r\n          grid_y_ticks: 10,\r\n          grid_focus_show: true,\r\n          grid_lines_front: true,\r\n          // point - point of each data\r\n          point_show: true,\r\n          point_r: 2.5,\r\n          point_sensitivity: 10,\r\n          point_focus_expand_enabled: true,\r\n          point_focus_expand_r: undefined,\r\n          point_select_r: undefined,\r\n          // line\r\n          line_connectNull: false,\r\n          line_step_type: 'step',\r\n          // bar\r\n          bar_width: undefined,\r\n          bar_width_ratio: 0.6,\r\n          bar_width_max: undefined,\r\n          bar_zerobased: true,\r\n          bar_space: 0,\r\n          // area\r\n          area_zerobased: true,\r\n          area_above: false,\r\n          // pie\r\n          pie_label_show: true,\r\n          pie_label_format: undefined,\r\n          pie_label_threshold: 0.05,\r\n          pie_label_ratio: undefined,\r\n          pie_expand: {},\r\n          pie_expand_duration: 50,\r\n          pie_padAngle: 0,\r\n          // gauge\r\n          gauge_fullCircle: false,\r\n          gauge_label_show: true,\r\n          gauge_labelLine_show: true,\r\n          gauge_label_format: undefined,\r\n          gauge_min: 0,\r\n          gauge_max: 100,\r\n          gauge_startingAngle: (-1 * Math.PI) / 2,\r\n          gauge_label_extents: undefined,\r\n          gauge_units: undefined,\r\n          gauge_width: undefined,\r\n          gauge_arcs_minWidth: 5,\r\n          gauge_expand: {},\r\n          gauge_expand_duration: 50,\r\n          // donut\r\n          donut_label_show: true,\r\n          donut_label_format: undefined,\r\n          donut_label_threshold: 0.05,\r\n          donut_label_ratio: undefined,\r\n          donut_width: undefined,\r\n          donut_title: '',\r\n          donut_expand: {},\r\n          donut_expand_duration: 50,\r\n          donut_padAngle: 0,\r\n          // spline\r\n          spline_interpolation_type: 'cardinal',\r\n          // stanford\r\n          stanford_lines: [],\r\n          stanford_regions: [],\r\n          stanford_texts: [],\r\n          stanford_scaleMin: undefined,\r\n          stanford_scaleMax: undefined,\r\n          stanford_scaleWidth: undefined,\r\n          stanford_scaleFormat: undefined,\r\n          stanford_scaleValues: undefined,\r\n          stanford_colors: undefined,\r\n          stanford_padding: {\r\n              top: 0,\r\n              right: 0,\r\n              bottom: 0,\r\n              left: 0\r\n          },\r\n          // region - region to change style\r\n          regions: [],\r\n          // tooltip - show when mouseover on each data\r\n          tooltip_show: true,\r\n          tooltip_grouped: true,\r\n          tooltip_order: undefined,\r\n          tooltip_format_title: undefined,\r\n          tooltip_format_name: undefined,\r\n          tooltip_format_value: undefined,\r\n          tooltip_horizontal: undefined,\r\n          tooltip_position: undefined,\r\n          tooltip_contents: function (d, defaultTitleFormat, defaultValueFormat, color) {\r\n              return this.getTooltipContent\r\n                  ? this.getTooltipContent(d, defaultTitleFormat, defaultValueFormat, color)\r\n                  : '';\r\n          },\r\n          tooltip_init_show: false,\r\n          tooltip_init_x: 0,\r\n          tooltip_init_position: { top: '0px', left: '50px' },\r\n          tooltip_onshow: function () { },\r\n          tooltip_onhide: function () { },\r\n          // title\r\n          title_text: undefined,\r\n          title_padding: {\r\n              top: 0,\r\n              right: 0,\r\n              bottom: 0,\r\n              left: 0\r\n          },\r\n          title_position: 'top-center'\r\n      };\r\n      Object.keys(this.additionalConfig).forEach(function (key) {\r\n          config[key] = this.additionalConfig[key];\r\n      }, this);\r\n      return config;\r\n  };\r\n  ChartInternal.prototype.additionalConfig = {};\r\n  ChartInternal.prototype.loadConfig = function (config) {\r\n      var this_config = this.config, target, keys, read;\r\n      function find() {\r\n          var key = keys.shift();\r\n          //        console.log(\"key =>\", key, \", target =>\", target);\r\n          if (key && target && typeof target === 'object' && key in target) {\r\n              target = target[key];\r\n              return find();\r\n          }\r\n          else if (!key) {\r\n              return target;\r\n          }\r\n          else {\r\n              return undefined;\r\n          }\r\n      }\r\n      Object.keys(this_config).forEach(function (key) {\r\n          target = config;\r\n          keys = key.split('_');\r\n          read = find();\r\n          //        console.log(\"CONFIG : \", key, read);\r\n          if (isDefined(read)) {\r\n              this_config[key] = read;\r\n          }\r\n      });\r\n  };\n\n  ChartInternal.prototype.convertUrlToData = function (url, mimeType, headers, keys, done) {\r\n      var $$ = this, type = mimeType ? mimeType : 'csv', f, converter;\r\n      if (type === 'json') {\r\n          f = $$.d3.json;\r\n          converter = $$.convertJsonToData;\r\n      }\r\n      else if (type === 'tsv') {\r\n          f = $$.d3.tsv;\r\n          converter = $$.convertXsvToData;\r\n      }\r\n      else {\r\n          f = $$.d3.csv;\r\n          converter = $$.convertXsvToData;\r\n      }\r\n      f(url, headers)\r\n          .then(function (data) {\r\n          done.call($$, converter.call($$, data, keys));\r\n      })\r\n          .catch(function (error) {\r\n          throw error;\r\n      });\r\n  };\r\n  ChartInternal.prototype.convertXsvToData = function (xsv) {\r\n      var keys = xsv.columns, rows = xsv;\r\n      if (rows.length === 0) {\r\n          return {\r\n              keys: keys,\r\n              rows: [keys.reduce(function (row, key) {\r\n                      var _a;\r\n                      return Object.assign(row, (_a = {}, _a[key] = null, _a));\r\n                  }, {})]\r\n          };\r\n      }\r\n      else {\r\n          // [].concat() is to convert result into a plain array otherwise\r\n          // test is not happy because rows have properties.\r\n          return { keys: keys, rows: [].concat(xsv) };\r\n      }\r\n  };\r\n  ChartInternal.prototype.convertJsonToData = function (json, keys) {\r\n      var $$ = this, new_rows = [], targetKeys, data;\r\n      if (keys) {\r\n          // when keys specified, json would be an array that includes objects\r\n          if (keys.x) {\r\n              targetKeys = keys.value.concat(keys.x);\r\n              $$.config.data_x = keys.x;\r\n          }\r\n          else {\r\n              targetKeys = keys.value;\r\n          }\r\n          new_rows.push(targetKeys);\r\n          json.forEach(function (o) {\r\n              var new_row = [];\r\n              targetKeys.forEach(function (key) {\r\n                  // convert undefined to null because undefined data will be removed in convertDataToTargets()\r\n                  var v = $$.findValueInJson(o, key);\r\n                  if (isUndefined(v)) {\r\n                      v = null;\r\n                  }\r\n                  new_row.push(v);\r\n              });\r\n              new_rows.push(new_row);\r\n          });\r\n          data = $$.convertRowsToData(new_rows);\r\n      }\r\n      else {\r\n          Object.keys(json).forEach(function (key) {\r\n              new_rows.push([key].concat(json[key]));\r\n          });\r\n          data = $$.convertColumnsToData(new_rows);\r\n      }\r\n      return data;\r\n  };\r\n  /**\r\n   * Finds value from the given nested object by the given path.\r\n   * If it's not found, then this returns undefined.\r\n   * @param {Object} object the object\r\n   * @param {string} path the path\r\n   */\r\n  ChartInternal.prototype.findValueInJson = function (object, path) {\r\n      if (path in object) {\r\n          // If object has a key that contains . or [], return the key's value\r\n          // instead of searching for an inner object.\r\n          // See https://github.com/c3js/c3/issues/1691 for details.\r\n          return object[path];\r\n      }\r\n      path = path.replace(/\\[(\\w+)\\]/g, '.$1'); // convert indexes to properties (replace [] with .)\r\n      path = path.replace(/^\\./, ''); // strip a leading dot\r\n      var pathArray = path.split('.');\r\n      for (var i = 0; i < pathArray.length; ++i) {\r\n          var k = pathArray[i];\r\n          if (k in object) {\r\n              object = object[k];\r\n          }\r\n          else {\r\n              return;\r\n          }\r\n      }\r\n      return object;\r\n  };\r\n  /**\r\n   * Converts the rows to normalized data.\r\n   * @param {any[][]} rows The row data\r\n   * @return {Object}\r\n   */\r\n  ChartInternal.prototype.convertRowsToData = function (rows) {\r\n      var newRows = [];\r\n      var keys = rows[0];\r\n      for (var i = 1; i < rows.length; i++) {\r\n          var newRow = {};\r\n          for (var j = 0; j < rows[i].length; j++) {\r\n              if (isUndefined(rows[i][j])) {\r\n                  throw new Error('Source data is missing a component at (' + i + ',' + j + ')!');\r\n              }\r\n              newRow[keys[j]] = rows[i][j];\r\n          }\r\n          newRows.push(newRow);\r\n      }\r\n      return { keys: keys, rows: newRows };\r\n  };\r\n  /**\r\n   * Converts the columns to normalized data.\r\n   * @param {any[][]} columns The column data\r\n   * @return {Object}\r\n   */\r\n  ChartInternal.prototype.convertColumnsToData = function (columns) {\r\n      var newRows = [];\r\n      var keys = [];\r\n      for (var i = 0; i < columns.length; i++) {\r\n          var key = columns[i][0];\r\n          for (var j = 1; j < columns[i].length; j++) {\r\n              if (isUndefined(newRows[j - 1])) {\r\n                  newRows[j - 1] = {};\r\n              }\r\n              if (isUndefined(columns[i][j])) {\r\n                  throw new Error('Source data is missing a component at (' + i + ',' + j + ')!');\r\n              }\r\n              newRows[j - 1][key] = columns[i][j];\r\n          }\r\n          keys.push(key);\r\n      }\r\n      return { keys: keys, rows: newRows };\r\n  };\r\n  /**\r\n   * Converts the data format into the target format.\r\n   * @param {!Object} data\r\n   * @param {!Array} data.keys Ordered list of target IDs.\r\n   * @param {!Array} data.rows Rows of data to convert.\r\n   * @param {boolean} appendXs True to append to $$.data.xs, False to replace.\r\n   * @return {!Array}\r\n   */\r\n  ChartInternal.prototype.convertDataToTargets = function (data, appendXs) {\r\n      var $$ = this, config = $$.config, targets, ids, xs, keys, epochs;\r\n      // handles format where keys are not orderly provided\r\n      if (isArray(data)) {\r\n          keys = Object.keys(data[0]);\r\n      }\r\n      else {\r\n          keys = data.keys;\r\n          data = data.rows;\r\n      }\r\n      xs = keys.filter($$.isX, $$);\r\n      if (!$$.isStanfordGraphType()) {\r\n          ids = keys.filter($$.isNotX, $$);\r\n      }\r\n      else {\r\n          epochs = keys.filter($$.isEpochs, $$);\r\n          ids = keys.filter($$.isNotXAndNotEpochs, $$);\r\n          if (xs.length !== 1 || epochs.length !== 1 || ids.length !== 1) {\r\n              throw new Error(\"You must define the 'x' key name and the 'epochs' for Stanford Diagrams\");\r\n          }\r\n      }\r\n      // save x for update data by load when custom x and c3.x API\r\n      ids.forEach(function (id) {\r\n          var xKey = $$.getXKey(id);\r\n          if ($$.isCustomX() || $$.isTimeSeries()) {\r\n              // if included in input data\r\n              if (xs.indexOf(xKey) >= 0) {\r\n                  $$.data.xs[id] = (appendXs && $$.data.xs[id]\r\n                      ? $$.data.xs[id]\r\n                      : []).concat(data\r\n                      .map(function (d) {\r\n                      return d[xKey];\r\n                  })\r\n                      .filter(isValue)\r\n                      .map(function (rawX, i) {\r\n                      return $$.generateTargetX(rawX, id, i);\r\n                  }));\r\n              }\r\n              // if not included in input data, find from preloaded data of other id's x\r\n              else if (config.data_x) {\r\n                  $$.data.xs[id] = $$.getOtherTargetXs();\r\n              }\r\n              // if not included in input data, find from preloaded data\r\n              else if (notEmpty(config.data_xs)) {\r\n                  $$.data.xs[id] = $$.getXValuesOfXKey(xKey, $$.data.targets);\r\n              }\r\n              // MEMO: if no x included, use same x of current will be used\r\n          }\r\n          else {\r\n              $$.data.xs[id] = data.map(function (d, i) {\r\n                  return i;\r\n              });\r\n          }\r\n      });\r\n      // check x is defined\r\n      ids.forEach(function (id) {\r\n          if (!$$.data.xs[id]) {\r\n              throw new Error('x is not defined for id = \"' + id + '\".');\r\n          }\r\n      });\r\n      // convert to target\r\n      targets = ids.map(function (id, index) {\r\n          var convertedId = config.data_idConverter(id);\r\n          return {\r\n              id: convertedId,\r\n              id_org: id,\r\n              values: data\r\n                  .map(function (d, i) {\r\n                  var xKey = $$.getXKey(id), rawX = d[xKey], value = d[id] !== null && !isNaN(d[id]) ? +d[id] : null, x, returnData;\r\n                  // use x as categories if custom x and categorized\r\n                  if ($$.isCustomX() && $$.isCategorized() && !isUndefined(rawX)) {\r\n                      if (index === 0 && i === 0) {\r\n                          config.axis_x_categories = [];\r\n                      }\r\n                      x = config.axis_x_categories.indexOf(rawX);\r\n                      if (x === -1) {\r\n                          x = config.axis_x_categories.length;\r\n                          config.axis_x_categories.push(rawX);\r\n                      }\r\n                  }\r\n                  else {\r\n                      x = $$.generateTargetX(rawX, id, i);\r\n                  }\r\n                  // mark as x = undefined if value is undefined and filter to remove after mapped\r\n                  if (isUndefined(d[id]) || $$.data.xs[id].length <= i) {\r\n                      x = undefined;\r\n                  }\r\n                  returnData = { x: x, value: value, id: convertedId };\r\n                  if ($$.isStanfordGraphType()) {\r\n                      returnData.epochs = d[epochs];\r\n                  }\r\n                  return returnData;\r\n              })\r\n                  .filter(function (v) {\r\n                  return isDefined(v.x);\r\n              })\r\n          };\r\n      });\r\n      // finish targets\r\n      targets.forEach(function (t) {\r\n          var i;\r\n          // sort values by its x\r\n          if (config.data_xSort) {\r\n              t.values = t.values.sort(function (v1, v2) {\r\n                  var x1 = v1.x || v1.x === 0 ? v1.x : Infinity, x2 = v2.x || v2.x === 0 ? v2.x : Infinity;\r\n                  return x1 - x2;\r\n              });\r\n          }\r\n          // indexing each value\r\n          i = 0;\r\n          t.values.forEach(function (v) {\r\n              v.index = i++;\r\n          });\r\n          // this needs to be sorted because its index and value.index is identical\r\n          $$.data.xs[t.id].sort(function (v1, v2) {\r\n              return v1 - v2;\r\n          });\r\n      });\r\n      // cache information about values\r\n      $$.hasNegativeValue = $$.hasNegativeValueInTargets(targets);\r\n      $$.hasPositiveValue = $$.hasPositiveValueInTargets(targets);\r\n      // set target types\r\n      if (config.data_type) {\r\n          $$.setTargetType($$.mapToIds(targets).filter(function (id) {\r\n              return !(id in config.data_types);\r\n          }), config.data_type);\r\n      }\r\n      // cache as original id keyed\r\n      targets.forEach(function (d) {\r\n          $$.addCache(d.id_org, d);\r\n      });\r\n      return targets;\r\n  };\n\n  ChartInternal.prototype.isEpochs = function (key) {\r\n      var $$ = this, config = $$.config;\r\n      return config.data_epochs && key === config.data_epochs;\r\n  };\r\n  ChartInternal.prototype.isX = function (key) {\r\n      var $$ = this, config = $$.config;\r\n      return ((config.data_x && key === config.data_x) ||\r\n          (notEmpty(config.data_xs) && hasValue(config.data_xs, key)));\r\n  };\r\n  ChartInternal.prototype.isNotX = function (key) {\r\n      return !this.isX(key);\r\n  };\r\n  ChartInternal.prototype.isNotXAndNotEpochs = function (key) {\r\n      return !this.isX(key) && !this.isEpochs(key);\r\n  };\r\n  /**\r\n   * Returns whether the normalized stack option is enabled or not.\r\n   *\r\n   * To be enabled it must also have data.groups defined.\r\n   *\r\n   * @return {boolean}\r\n   */\r\n  ChartInternal.prototype.isStackNormalized = function () {\r\n      return this.config.data_stack_normalize && this.config.data_groups.length > 0;\r\n  };\r\n  /**\r\n   * Returns whether the axis is normalized or not.\r\n   *\r\n   * An axis is normalized as long as one of its associated target\r\n   * is normalized.\r\n   *\r\n   * @param axisId Axis ID (y or y2)\r\n   * @return {Boolean}\r\n   */\r\n  ChartInternal.prototype.isAxisNormalized = function (axisId) {\r\n      var $$ = this;\r\n      if (!$$.isStackNormalized()) {\r\n          // shortcut\r\n          return false;\r\n      }\r\n      return $$.data.targets\r\n          .filter(function (target) { return $$.axis.getId(target.id) === axisId; })\r\n          .some(function (target) { return $$.isTargetNormalized(target.id); });\r\n  };\r\n  /**\r\n   * Returns whether the values for this target ID is normalized or not.\r\n   *\r\n   * To be normalized the option needs to be enabled and target needs\r\n   * to be defined in `data.groups`.\r\n   *\r\n   * @param targetId ID of the target\r\n   * @return {Boolean} True if the target is normalized, false otherwise.\r\n   */\r\n  ChartInternal.prototype.isTargetNormalized = function (targetId) {\r\n      var $$ = this;\r\n      return ($$.isStackNormalized() &&\r\n          $$.config.data_groups.some(function (group) { return group.includes(targetId); }));\r\n  };\r\n  ChartInternal.prototype.getXKey = function (id) {\r\n      var $$ = this, config = $$.config;\r\n      return config.data_x\r\n          ? config.data_x\r\n          : notEmpty(config.data_xs)\r\n              ? config.data_xs[id]\r\n              : null;\r\n  };\r\n  /**\r\n   * Get sum of visible data per index for given axis.\r\n   *\r\n   * Expect axisId to be either 'y' or 'y2'.\r\n   *\r\n   * @private\r\n   * @param axisId Compute sum for data associated to given axis.\r\n   * @return {Array}\r\n   */\r\n  ChartInternal.prototype.getTotalPerIndex = function (axisId) {\r\n      var $$ = this;\r\n      if (!$$.isStackNormalized()) {\r\n          return null;\r\n      }\r\n      var cached = $$.getFromCache('getTotalPerIndex');\r\n      if (cached !== undefined) {\r\n          return cached[axisId];\r\n      }\r\n      var sum = { y: [], y2: [] };\r\n      $$.data.targets\r\n          // keep only target that are normalized\r\n          .filter(function (target) { return $$.isTargetNormalized(target.id); })\r\n          // keep only target that are visible\r\n          .filter(function (target) { return $$.isTargetToShow(target.id); })\r\n          // compute sum per axis\r\n          .forEach(function (target) {\r\n          var sumByAxis = sum[$$.axis.getId(target.id)];\r\n          target.values.forEach(function (v, i) {\r\n              if (!sumByAxis[i]) {\r\n                  sumByAxis[i] = 0;\r\n              }\r\n              sumByAxis[i] += isNumber(v.value) ? v.value : 0;\r\n          });\r\n      });\r\n      $$.addToCache('getTotalPerIndex', sum);\r\n      return sum[axisId];\r\n  };\r\n  /**\r\n   * Get sum of visible data.\r\n   *\r\n   * Should be used for normalised data only since all values\r\n   * are expected to be positive.\r\n   *\r\n   * @private\r\n   * @return {Number}\r\n   */\r\n  ChartInternal.prototype.getTotalDataSum = function () {\r\n      var $$ = this;\r\n      var cached = $$.getFromCache('getTotalDataSum');\r\n      if (cached !== undefined) {\r\n          return cached;\r\n      }\r\n      var totalDataSum = flattenArray($$.data.targets\r\n          .filter(function (target) { return $$.isTargetToShow(target.id); })\r\n          .map(function (target) { return target.values; }))\r\n          .map(function (d) { return d.value; })\r\n          .reduce(function (p, c) { return p + c; }, 0);\r\n      $$.addToCache('getTotalDataSum', totalDataSum);\r\n      return totalDataSum;\r\n  };\r\n  ChartInternal.prototype.getXValuesOfXKey = function (key, targets) {\r\n      var $$ = this, xValues, ids = targets && notEmpty(targets) ? $$.mapToIds(targets) : [];\r\n      ids.forEach(function (id) {\r\n          if ($$.getXKey(id) === key) {\r\n              xValues = $$.data.xs[id];\r\n          }\r\n      });\r\n      return xValues;\r\n  };\r\n  ChartInternal.prototype.getXValue = function (id, i) {\r\n      var $$ = this;\r\n      return id in $$.data.xs && $$.data.xs[id] && isValue($$.data.xs[id][i])\r\n          ? $$.data.xs[id][i]\r\n          : i;\r\n  };\r\n  ChartInternal.prototype.getOtherTargetXs = function () {\r\n      var $$ = this, idsForX = Object.keys($$.data.xs);\r\n      return idsForX.length ? $$.data.xs[idsForX[0]] : null;\r\n  };\r\n  ChartInternal.prototype.getOtherTargetX = function (index) {\r\n      var xs = this.getOtherTargetXs();\r\n      return xs && index < xs.length ? xs[index] : null;\r\n  };\r\n  ChartInternal.prototype.addXs = function (xs) {\r\n      var $$ = this;\r\n      Object.keys(xs).forEach(function (id) {\r\n          $$.config.data_xs[id] = xs[id];\r\n      });\r\n  };\r\n  ChartInternal.prototype.addName = function (data) {\r\n      var $$ = this, name;\r\n      if (data) {\r\n          name = $$.config.data_names[data.id];\r\n          data.name = name !== undefined ? name : data.id;\r\n      }\r\n      return data;\r\n  };\r\n  ChartInternal.prototype.getValueOnIndex = function (values, index) {\r\n      var valueOnIndex = values.filter(function (v) {\r\n          return v.index === index;\r\n      });\r\n      return valueOnIndex.length ? valueOnIndex[0] : null;\r\n  };\r\n  ChartInternal.prototype.updateTargetX = function (targets, x) {\r\n      var $$ = this;\r\n      targets.forEach(function (t) {\r\n          t.values.forEach(function (v, i) {\r\n              v.x = $$.generateTargetX(x[i], t.id, i);\r\n          });\r\n          $$.data.xs[t.id] = x;\r\n      });\r\n  };\r\n  ChartInternal.prototype.updateTargetXs = function (targets, xs) {\r\n      var $$ = this;\r\n      targets.forEach(function (t) {\r\n          if (xs[t.id]) {\r\n              $$.updateTargetX([t], xs[t.id]);\r\n          }\r\n      });\r\n  };\r\n  ChartInternal.prototype.generateTargetX = function (rawX, id, index) {\r\n      var $$ = this, x;\r\n      if ($$.isTimeSeries()) {\r\n          x = rawX ? $$.parseDate(rawX) : $$.parseDate($$.getXValue(id, index));\r\n      }\r\n      else if ($$.isCustomX() && !$$.isCategorized()) {\r\n          x = isValue(rawX) ? +rawX : $$.getXValue(id, index);\r\n      }\r\n      else {\r\n          x = index;\r\n      }\r\n      return x;\r\n  };\r\n  ChartInternal.prototype.cloneTarget = function (target) {\r\n      return {\r\n          id: target.id,\r\n          id_org: target.id_org,\r\n          values: target.values.map(function (d) {\r\n              return {\r\n                  x: d.x,\r\n                  value: d.value,\r\n                  id: d.id\r\n              };\r\n          })\r\n      };\r\n  };\r\n  ChartInternal.prototype.getMaxDataCount = function () {\r\n      var $$ = this;\r\n      return $$.d3.max($$.data.targets, function (t) {\r\n          return t.values.length;\r\n      });\r\n  };\r\n  ChartInternal.prototype.mapToIds = function (targets) {\r\n      return targets.map(function (d) {\r\n          return d.id;\r\n      });\r\n  };\r\n  ChartInternal.prototype.mapToTargetIds = function (ids) {\r\n      var $$ = this;\r\n      return ids ? [].concat(ids) : $$.mapToIds($$.data.targets);\r\n  };\r\n  ChartInternal.prototype.hasTarget = function (targets, id) {\r\n      var ids = this.mapToIds(targets), i;\r\n      for (i = 0; i < ids.length; i++) {\r\n          if (ids[i] === id) {\r\n              return true;\r\n          }\r\n      }\r\n      return false;\r\n  };\r\n  ChartInternal.prototype.isTargetToShow = function (targetId) {\r\n      return this.hiddenTargetIds.indexOf(targetId) < 0;\r\n  };\r\n  ChartInternal.prototype.isLegendToShow = function (targetId) {\r\n      return this.hiddenLegendIds.indexOf(targetId) < 0;\r\n  };\r\n  /**\r\n   * Returns only visible targets.\r\n   *\r\n   * This is the same as calling {@link filterTargetsToShow} on $$.data.targets.\r\n   *\r\n   * @return {Array}\r\n   */\r\n  ChartInternal.prototype.getTargetsToShow = function () {\r\n      var $$ = this;\r\n      return $$.filterTargetsToShow($$.data.targets);\r\n  };\r\n  ChartInternal.prototype.filterTargetsToShow = function (targets) {\r\n      var $$ = this;\r\n      return targets.filter(function (t) {\r\n          return $$.isTargetToShow(t.id);\r\n      });\r\n  };\r\n  /**\r\n   * @return {Array} Returns all the targets attached to the chart, visible or not\r\n   */\r\n  ChartInternal.prototype.getTargets = function () {\r\n      var $$ = this;\r\n      return $$.data.targets;\r\n  };\r\n  ChartInternal.prototype.mapTargetsToUniqueXs = function (targets) {\r\n      var $$ = this;\r\n      var xs = $$.d3\r\n          .set($$.d3.merge(targets.map(function (t) {\r\n          return t.values.map(function (v) {\r\n              return +v.x;\r\n          });\r\n      })))\r\n          .values();\r\n      xs = $$.isTimeSeries()\r\n          ? xs.map(function (x) {\r\n              return new Date(+x);\r\n          })\r\n          : xs.map(function (x) {\r\n              return +x;\r\n          });\r\n      return xs.sort(function (a, b) {\r\n          return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\r\n      });\r\n  };\r\n  ChartInternal.prototype.addHiddenTargetIds = function (targetIds) {\r\n      targetIds = targetIds instanceof Array ? targetIds : new Array(targetIds);\r\n      for (var i = 0; i < targetIds.length; i++) {\r\n          if (this.hiddenTargetIds.indexOf(targetIds[i]) < 0) {\r\n              this.hiddenTargetIds = this.hiddenTargetIds.concat(targetIds[i]);\r\n          }\r\n      }\r\n      this.resetCache();\r\n  };\r\n  ChartInternal.prototype.removeHiddenTargetIds = function (targetIds) {\r\n      this.hiddenTargetIds = this.hiddenTargetIds.filter(function (id) {\r\n          return targetIds.indexOf(id) < 0;\r\n      });\r\n      this.resetCache();\r\n  };\r\n  ChartInternal.prototype.addHiddenLegendIds = function (targetIds) {\r\n      targetIds = targetIds instanceof Array ? targetIds : new Array(targetIds);\r\n      for (var i = 0; i < targetIds.length; i++) {\r\n          if (this.hiddenLegendIds.indexOf(targetIds[i]) < 0) {\r\n              this.hiddenLegendIds = this.hiddenLegendIds.concat(targetIds[i]);\r\n          }\r\n      }\r\n  };\r\n  ChartInternal.prototype.removeHiddenLegendIds = function (targetIds) {\r\n      this.hiddenLegendIds = this.hiddenLegendIds.filter(function (id) {\r\n          return targetIds.indexOf(id) < 0;\r\n      });\r\n  };\r\n  ChartInternal.prototype.getValuesAsIdKeyed = function (targets) {\r\n      var ys = {};\r\n      targets.forEach(function (t) {\r\n          ys[t.id] = [];\r\n          t.values.forEach(function (v) {\r\n              ys[t.id].push(v.value);\r\n          });\r\n      });\r\n      return ys;\r\n  };\r\n  ChartInternal.prototype.checkValueInTargets = function (targets, checker) {\r\n      var ids = Object.keys(targets), i, j, values;\r\n      for (i = 0; i < ids.length; i++) {\r\n          values = targets[ids[i]].values;\r\n          for (j = 0; j < values.length; j++) {\r\n              if (checker(values[j].value)) {\r\n                  return true;\r\n              }\r\n          }\r\n      }\r\n      return false;\r\n  };\r\n  ChartInternal.prototype.hasNegativeValueInTargets = function (targets) {\r\n      return this.checkValueInTargets(targets, function (v) {\r\n          return v < 0;\r\n      });\r\n  };\r\n  ChartInternal.prototype.hasPositiveValueInTargets = function (targets) {\r\n      return this.checkValueInTargets(targets, function (v) {\r\n          return v > 0;\r\n      });\r\n  };\r\n  ChartInternal.prototype.isOrderDesc = function () {\r\n      var config = this.config;\r\n      return (typeof config.data_order === 'string' &&\r\n          config.data_order.toLowerCase() === 'desc');\r\n  };\r\n  ChartInternal.prototype.isOrderAsc = function () {\r\n      var config = this.config;\r\n      return (typeof config.data_order === 'string' &&\r\n          config.data_order.toLowerCase() === 'asc');\r\n  };\r\n  ChartInternal.prototype.getOrderFunction = function () {\r\n      var $$ = this, config = $$.config, orderAsc = $$.isOrderAsc(), orderDesc = $$.isOrderDesc();\r\n      if (orderAsc || orderDesc) {\r\n          var reducer = function (p, c) {\r\n              return p + Math.abs(c.value);\r\n          };\r\n          return function (t1, t2) {\r\n              var t1Sum = t1.values.reduce(reducer, 0), t2Sum = t2.values.reduce(reducer, 0);\r\n              return orderAsc ? t2Sum - t1Sum : t1Sum - t2Sum;\r\n          };\r\n      }\r\n      else if (isFunction(config.data_order)) {\r\n          return config.data_order;\r\n      }\r\n      else if (isArray(config.data_order)) {\r\n          var order = config.data_order;\r\n          return function (t1, t2) {\r\n              return order.indexOf(t1.id) - order.indexOf(t2.id);\r\n          };\r\n      }\r\n  };\r\n  ChartInternal.prototype.orderTargets = function (targets) {\r\n      var fct = this.getOrderFunction();\r\n      if (fct) {\r\n          targets.sort(fct);\r\n      }\r\n      return targets;\r\n  };\r\n  /**\r\n   * Returns all the values from the given targets at the given index.\r\n   *\r\n   * @param {Array} targets\r\n   * @param {Number} index\r\n   * @return {Array}\r\n   */\r\n  ChartInternal.prototype.filterByIndex = function (targets, index) {\r\n      return this.d3.merge(targets.map(function (t) { return t.values.filter(function (v) { return v.index === index; }); }));\r\n  };\r\n  ChartInternal.prototype.filterByX = function (targets, x) {\r\n      return this.d3\r\n          .merge(targets.map(function (t) {\r\n          return t.values;\r\n      }))\r\n          .filter(function (v) {\r\n          return v.x - x === 0;\r\n      });\r\n  };\r\n  ChartInternal.prototype.filterRemoveNull = function (data) {\r\n      return data.filter(function (d) {\r\n          return isValue(d.value);\r\n      });\r\n  };\r\n  ChartInternal.prototype.filterByXDomain = function (targets, xDomain) {\r\n      return targets.map(function (t) {\r\n          return {\r\n              id: t.id,\r\n              id_org: t.id_org,\r\n              values: t.values.filter(function (v) {\r\n                  return xDomain[0] <= v.x && v.x <= xDomain[1];\r\n              })\r\n          };\r\n      });\r\n  };\r\n  ChartInternal.prototype.hasDataLabel = function () {\r\n      var config = this.config;\r\n      if (typeof config.data_labels === 'boolean' && config.data_labels) {\r\n          return true;\r\n      }\r\n      else if (typeof config.data_labels === 'object' &&\r\n          notEmpty(config.data_labels)) {\r\n          return true;\r\n      }\r\n      return false;\r\n  };\r\n  ChartInternal.prototype.getDataLabelLength = function (min, max, key) {\r\n      var $$ = this, lengths = [0, 0], paddingCoef = 1.3;\r\n      $$.selectChart\r\n          .select('svg')\r\n          .selectAll('.dummy')\r\n          .data([min, max])\r\n          .enter()\r\n          .append('text')\r\n          .text(function (d) {\r\n          return $$.dataLabelFormat(d.id)(d);\r\n      })\r\n          .each(function (d, i) {\r\n          lengths[i] = getBBox(this)[key] * paddingCoef;\r\n      })\r\n          .remove();\r\n      return lengths;\r\n  };\r\n  /**\r\n   * Returns true if the given data point is not arc type, otherwise false.\r\n   * @param {Object} d The data point\r\n   * @return {boolean}\r\n   */\r\n  ChartInternal.prototype.isNoneArc = function (d) {\r\n      return this.hasTarget(this.data.targets, d.id);\r\n  };\r\n  /**\r\n   * Returns true if the given data point is arc type, otherwise false.\r\n   * @param {Object} d The data point\r\n   * @return {boolean}\r\n   */\r\n  ChartInternal.prototype.isArc = function (d) {\r\n      return 'data' in d && this.hasTarget(this.data.targets, d.data.id);\r\n  };\r\n  /**\r\n   * Find the closest point from the given pos among the given targets or\r\n   * undefined if none satisfies conditions.\r\n   *\r\n   * @param {Array} targets\r\n   * @param {Array} pos An [x,y] coordinate\r\n   * @return {Object|undefined}\r\n   */\r\n  ChartInternal.prototype.findClosestFromTargets = function (targets, pos) {\r\n      var $$ = this;\r\n      // for each target, find the closest point\r\n      var candidates = targets\r\n          .map(function (t) {\r\n          return $$.findClosest(t.values, pos, $$.config.tooltip_horizontal\r\n              ? $$.horizontalDistance.bind($$)\r\n              : $$.dist.bind($$), $$.config.point_sensitivity);\r\n      })\r\n          .filter(function (v) { return v; });\r\n      // returns the closest of candidates\r\n      if (candidates.length === 0) {\r\n          return undefined;\r\n      }\r\n      else if (candidates.length === 1) {\r\n          return candidates[0];\r\n      }\r\n      else {\r\n          return $$.findClosest(candidates, pos, $$.dist.bind($$));\r\n      }\r\n  };\r\n  /**\r\n   * Find the closest point from the x value or undefined if none satisfies conditions.\r\n   *\r\n   * @param {Array} targets\r\n   * @param {Array} x A value on X axis\r\n   * @return {Object|undefined}\r\n   */\r\n  ChartInternal.prototype.findClosestFromTargetsByX = function (targets, x) {\r\n      var closest;\r\n      var diff;\r\n      targets.forEach(function (t) {\r\n          t.values.forEach(function (d) {\r\n              var newDiff = Math.abs(x - d.x);\r\n              if (diff === undefined || newDiff < diff) {\r\n                  closest = d;\r\n                  diff = newDiff;\r\n              }\r\n          });\r\n      });\r\n      return closest;\r\n  };\r\n  /**\r\n   * Using given compute distance method, returns the closest data point from the\r\n   * given position.\r\n   *\r\n   * Giving optionally a minimum distance to satisfy.\r\n   *\r\n   * @param {Array} dataPoints List of DataPoints\r\n   * @param {Array} pos An [x,y] coordinate\r\n   * @param {Function} computeDist Function to compute distance between 2 points\r\n   * @param {Number} minDist Minimal distance to satisfy\r\n   * @return {Object|undefined} Closest data point\r\n   */\r\n  ChartInternal.prototype.findClosest = function (dataPoints, pos, computeDist, minDist) {\r\n      if (minDist === void 0) { minDist = Infinity; }\r\n      var $$ = this;\r\n      var closest;\r\n      // find closest bar\r\n      dataPoints\r\n          .filter(function (v) { return v && $$.isBarType(v.id); })\r\n          .forEach(function (v) {\r\n          if (!closest) {\r\n              var shape = $$.main\r\n                  .select('.' +\r\n                  CLASS.bars +\r\n                  $$.getTargetSelectorSuffix(v.id) +\r\n                  ' .' +\r\n                  CLASS.bar +\r\n                  '-' +\r\n                  v.index)\r\n                  .node();\r\n              if ($$.isWithinBar(pos, shape)) {\r\n                  closest = v;\r\n              }\r\n          }\r\n      });\r\n      // find closest point from non-bar\r\n      dataPoints\r\n          .filter(function (v) { return v && !$$.isBarType(v.id); })\r\n          .forEach(function (v) {\r\n          var d = computeDist(v, pos);\r\n          if (d < minDist) {\r\n              minDist = d;\r\n              closest = v;\r\n          }\r\n      });\r\n      return closest;\r\n  };\r\n  ChartInternal.prototype.dist = function (data, pos) {\r\n      var $$ = this, config = $$.config, xIndex = config.axis_rotated ? 1 : 0, yIndex = config.axis_rotated ? 0 : 1, y = $$.circleY(data, data.index), x = $$.x(data.x);\r\n      return Math.sqrt(Math.pow(x - pos[xIndex], 2) + Math.pow(y - pos[yIndex], 2));\r\n  };\r\n  ChartInternal.prototype.horizontalDistance = function (data, pos) {\r\n      var $$ = this, config = $$.config, xIndex = config.axis_rotated ? 1 : 0, x = $$.x(data.x);\r\n      return Math.abs(x - pos[xIndex]);\r\n  };\r\n  ChartInternal.prototype.convertValuesToStep = function (values) {\r\n      var converted = [].concat(values), i;\r\n      if (!this.isCategorized()) {\r\n          return values;\r\n      }\r\n      for (i = values.length + 1; 0 < i; i--) {\r\n          converted[i] = converted[i - 1];\r\n      }\r\n      converted[0] = {\r\n          x: converted[0].x - 1,\r\n          value: converted[0].value,\r\n          id: converted[0].id\r\n      };\r\n      converted[values.length + 1] = {\r\n          x: converted[values.length].x + 1,\r\n          value: converted[values.length].value,\r\n          id: converted[values.length].id\r\n      };\r\n      return converted;\r\n  };\r\n  /**\r\n   * Get ratio value\r\n   *\r\n   * @param {String} type Ratio for given type\r\n   * @param {Object} d Data value object\r\n   * @param {Boolean} asPercent Convert the return as percent or not\r\n   * @return {Number} Ratio value\r\n   * @private\r\n   */\r\n  ChartInternal.prototype.getRatio = function (type, d, asPercent) {\r\n      if (asPercent === void 0) { asPercent = false; }\r\n      var $$ = this;\r\n      var api = $$.api;\r\n      var ratio = 0;\r\n      if (d && api.data.shown.call(api).length) {\r\n          ratio = d.ratio || d.value;\r\n          if (type === 'arc') {\r\n              if ($$.hasType('gauge')) {\r\n                  ratio =\r\n                      (d.endAngle - d.startAngle) /\r\n                          (Math.PI * ($$.config.gauge_fullCircle ? 2 : 1));\r\n              }\r\n              else {\r\n                  var total = $$.getTotalDataSum();\r\n                  ratio = d.value / total;\r\n              }\r\n          }\r\n          else if (type === 'index') {\r\n              var total = $$.getTotalPerIndex($$.axis.getId(d.id));\r\n              d.ratio =\r\n                  isNumber(d.value) && total && total[d.index] > 0\r\n                      ? d.value / total[d.index]\r\n                      : 0;\r\n              ratio = d.ratio;\r\n          }\r\n      }\r\n      return asPercent && ratio ? ratio * 100 : ratio;\r\n  };\r\n  ChartInternal.prototype.updateDataAttributes = function (name, attrs) {\r\n      var $$ = this, config = $$.config, current = config['data_' + name];\r\n      if (typeof attrs === 'undefined') {\r\n          return current;\r\n      }\r\n      Object.keys(attrs).forEach(function (id) {\r\n          current[id] = attrs[id];\r\n      });\r\n      $$.redraw({\r\n          withLegend: true\r\n      });\r\n      return current;\r\n  };\n\n  ChartInternal.prototype.load = function (targets, args) {\r\n      var $$ = this;\r\n      if (targets) {\r\n          // filter loading targets if needed\r\n          if (args.filter) {\r\n              targets = targets.filter(args.filter);\r\n          }\r\n          // set type if args.types || args.type specified\r\n          if (args.type || args.types) {\r\n              targets.forEach(function (t) {\r\n                  var type = args.types && args.types[t.id] ? args.types[t.id] : args.type;\r\n                  $$.setTargetType(t.id, type);\r\n              });\r\n          }\r\n          // Update/Add data\r\n          $$.data.targets.forEach(function (d) {\r\n              for (var i = 0; i < targets.length; i++) {\r\n                  if (d.id === targets[i].id) {\r\n                      d.values = targets[i].values;\r\n                      targets.splice(i, 1);\r\n                      break;\r\n                  }\r\n              }\r\n          });\r\n          $$.data.targets = $$.data.targets.concat(targets); // add remained\r\n      }\r\n      // Set targets\r\n      $$.updateTargets($$.data.targets);\r\n      // Redraw with new targets\r\n      $$.redraw({\r\n          withUpdateOrgXDomain: true,\r\n          withUpdateXDomain: true,\r\n          withLegend: true\r\n      });\r\n      if (args.done) {\r\n          args.done();\r\n      }\r\n  };\r\n  ChartInternal.prototype.loadFromArgs = function (args) {\r\n      var $$ = this;\r\n      $$.resetCache();\r\n      if (args.data) {\r\n          $$.load($$.convertDataToTargets(args.data), args);\r\n      }\r\n      else if (args.url) {\r\n          $$.convertUrlToData(args.url, args.mimeType, args.headers, args.keys, function (data) {\r\n              $$.load($$.convertDataToTargets(data), args);\r\n          });\r\n      }\r\n      else if (args.json) {\r\n          $$.load($$.convertDataToTargets($$.convertJsonToData(args.json, args.keys)), args);\r\n      }\r\n      else if (args.rows) {\r\n          $$.load($$.convertDataToTargets($$.convertRowsToData(args.rows)), args);\r\n      }\r\n      else if (args.columns) {\r\n          $$.load($$.convertDataToTargets($$.convertColumnsToData(args.columns)), args);\r\n      }\r\n      else {\r\n          $$.load(null, args);\r\n      }\r\n  };\r\n  ChartInternal.prototype.unload = function (targetIds, done) {\r\n      var $$ = this;\r\n      $$.resetCache();\r\n      if (!done) {\r\n          done = function () { };\r\n      }\r\n      // filter existing target\r\n      targetIds = targetIds.filter(function (id) {\r\n          return $$.hasTarget($$.data.targets, id);\r\n      });\r\n      // If no target, call done and return\r\n      if (!targetIds || targetIds.length === 0) {\r\n          done();\r\n          return;\r\n      }\r\n      $$.svg\r\n          .selectAll(targetIds.map(function (id) {\r\n          return $$.selectorTarget(id);\r\n      }))\r\n          .transition()\r\n          .style('opacity', 0)\r\n          .remove()\r\n          .call($$.endall, done);\r\n      targetIds.forEach(function (id) {\r\n          // Reset fadein for future load\r\n          $$.withoutFadeIn[id] = false;\r\n          // Remove target's elements\r\n          if ($$.legend) {\r\n              $$.legend\r\n                  .selectAll('.' + CLASS.legendItem + $$.getTargetSelectorSuffix(id))\r\n                  .remove();\r\n          }\r\n          // Remove target\r\n          $$.data.targets = $$.data.targets.filter(function (t) {\r\n              return t.id !== id;\r\n          });\r\n      });\r\n  };\n\n  ChartInternal.prototype.getYDomainMin = function (targets) {\r\n      var $$ = this, config = $$.config, ids = $$.mapToIds(targets), ys = $$.getValuesAsIdKeyed(targets), j, k, baseId, idsInGroup, id, hasNegativeValue;\r\n      if (config.data_groups.length > 0) {\r\n          hasNegativeValue = $$.hasNegativeValueInTargets(targets);\r\n          for (j = 0; j < config.data_groups.length; j++) {\r\n              // Determine baseId\r\n              idsInGroup = config.data_groups[j].filter(function (id) {\r\n                  return ids.indexOf(id) >= 0;\r\n              });\r\n              if (idsInGroup.length === 0) {\r\n                  continue;\r\n              }\r\n              baseId = idsInGroup[0];\r\n              // Consider negative values\r\n              if (hasNegativeValue && ys[baseId]) {\r\n                  ys[baseId].forEach(function (v, i) {\r\n                      ys[baseId][i] = v < 0 ? v : 0;\r\n                  });\r\n              }\r\n              // Compute min\r\n              for (k = 1; k < idsInGroup.length; k++) {\r\n                  id = idsInGroup[k];\r\n                  if (!ys[id]) {\r\n                      continue;\r\n                  }\r\n                  ys[id].forEach(function (v, i) {\r\n                      if ($$.axis.getId(id) === $$.axis.getId(baseId) &&\r\n                          ys[baseId] &&\r\n                          !(hasNegativeValue && +v > 0)) {\r\n                          ys[baseId][i] += +v;\r\n                      }\r\n                  });\r\n              }\r\n          }\r\n      }\r\n      return $$.d3.min(Object.keys(ys).map(function (key) {\r\n          return $$.d3.min(ys[key]);\r\n      }));\r\n  };\r\n  ChartInternal.prototype.getYDomainMax = function (targets) {\r\n      var $$ = this, config = $$.config, ids = $$.mapToIds(targets), ys = $$.getValuesAsIdKeyed(targets), j, k, baseId, idsInGroup, id, hasPositiveValue;\r\n      if (config.data_groups.length > 0) {\r\n          hasPositiveValue = $$.hasPositiveValueInTargets(targets);\r\n          for (j = 0; j < config.data_groups.length; j++) {\r\n              // Determine baseId\r\n              idsInGroup = config.data_groups[j].filter(function (id) {\r\n                  return ids.indexOf(id) >= 0;\r\n              });\r\n              if (idsInGroup.length === 0) {\r\n                  continue;\r\n              }\r\n              baseId = idsInGroup[0];\r\n              // Consider positive values\r\n              if (hasPositiveValue && ys[baseId]) {\r\n                  ys[baseId].forEach(function (v, i) {\r\n                      ys[baseId][i] = v > 0 ? v : 0;\r\n                  });\r\n              }\r\n              // Compute max\r\n              for (k = 1; k < idsInGroup.length; k++) {\r\n                  id = idsInGroup[k];\r\n                  if (!ys[id]) {\r\n                      continue;\r\n                  }\r\n                  ys[id].forEach(function (v, i) {\r\n                      if ($$.axis.getId(id) === $$.axis.getId(baseId) &&\r\n                          ys[baseId] &&\r\n                          !(hasPositiveValue && +v < 0)) {\r\n                          ys[baseId][i] += +v;\r\n                      }\r\n                  });\r\n              }\r\n          }\r\n      }\r\n      return $$.d3.max(Object.keys(ys).map(function (key) {\r\n          return $$.d3.max(ys[key]);\r\n      }));\r\n  };\r\n  ChartInternal.prototype.getYDomain = function (targets, axisId, xDomain) {\r\n      var $$ = this, config = $$.config;\r\n      if ($$.isAxisNormalized(axisId)) {\r\n          return [0, 100];\r\n      }\r\n      var targetsByAxisId = targets.filter(function (t) {\r\n          return $$.axis.getId(t.id) === axisId;\r\n      }), yTargets = xDomain\r\n          ? $$.filterByXDomain(targetsByAxisId, xDomain)\r\n          : targetsByAxisId, yMin = axisId === 'y2' ? config.axis_y2_min : config.axis_y_min, yMax = axisId === 'y2' ? config.axis_y2_max : config.axis_y_max, yDomainMin = $$.getYDomainMin(yTargets), yDomainMax = $$.getYDomainMax(yTargets), domain, domainLength, padding_top, padding_bottom, center = axisId === 'y2' ? config.axis_y2_center : config.axis_y_center, yDomainAbs, lengths, diff, ratio, isAllPositive, isAllNegative, isZeroBased = ($$.hasType('bar', yTargets) && config.bar_zerobased) ||\r\n          ($$.hasType('area', yTargets) && config.area_zerobased), isInverted = axisId === 'y2' ? config.axis_y2_inverted : config.axis_y_inverted, showHorizontalDataLabel = $$.hasDataLabel() && config.axis_rotated, showVerticalDataLabel = $$.hasDataLabel() && !config.axis_rotated;\r\n      // MEMO: avoid inverting domain unexpectedly\r\n      yDomainMin = isValue(yMin)\r\n          ? yMin\r\n          : isValue(yMax)\r\n              ? yDomainMin < yMax\r\n                  ? yDomainMin\r\n                  : yMax - 10\r\n              : yDomainMin;\r\n      yDomainMax = isValue(yMax)\r\n          ? yMax\r\n          : isValue(yMin)\r\n              ? yMin < yDomainMax\r\n                  ? yDomainMax\r\n                  : yMin + 10\r\n              : yDomainMax;\r\n      if (yTargets.length === 0) {\r\n          // use current domain if target of axisId is none\r\n          return axisId === 'y2' ? $$.y2.domain() : $$.y.domain();\r\n      }\r\n      if (isNaN(yDomainMin)) {\r\n          // set minimum to zero when not number\r\n          yDomainMin = 0;\r\n      }\r\n      if (isNaN(yDomainMax)) {\r\n          // set maximum to have same value as yDomainMin\r\n          yDomainMax = yDomainMin;\r\n      }\r\n      if (yDomainMin === yDomainMax) {\r\n          yDomainMin < 0 ? (yDomainMax = 0) : (yDomainMin = 0);\r\n      }\r\n      isAllPositive = yDomainMin >= 0 && yDomainMax >= 0;\r\n      isAllNegative = yDomainMin <= 0 && yDomainMax <= 0;\r\n      // Cancel zerobased if axis_*_min / axis_*_max specified\r\n      if ((isValue(yMin) && isAllPositive) || (isValue(yMax) && isAllNegative)) {\r\n          isZeroBased = false;\r\n      }\r\n      // Bar/Area chart should be 0-based if all positive|negative\r\n      if (isZeroBased) {\r\n          if (isAllPositive) {\r\n              yDomainMin = 0;\r\n          }\r\n          if (isAllNegative) {\r\n              yDomainMax = 0;\r\n          }\r\n      }\r\n      domainLength = Math.abs(yDomainMax - yDomainMin);\r\n      padding_top = padding_bottom = domainLength * 0.1;\r\n      if (typeof center !== 'undefined') {\r\n          yDomainAbs = Math.max(Math.abs(yDomainMin), Math.abs(yDomainMax));\r\n          yDomainMax = center + yDomainAbs;\r\n          yDomainMin = center - yDomainAbs;\r\n      }\r\n      // add padding for data label\r\n      if (showHorizontalDataLabel) {\r\n          lengths = $$.getDataLabelLength(yDomainMin, yDomainMax, 'width');\r\n          diff = diffDomain($$.y.range());\r\n          ratio = [lengths[0] / diff, lengths[1] / diff];\r\n          padding_top += domainLength * (ratio[1] / (1 - ratio[0] - ratio[1]));\r\n          padding_bottom += domainLength * (ratio[0] / (1 - ratio[0] - ratio[1]));\r\n      }\r\n      else if (showVerticalDataLabel) {\r\n          lengths = $$.getDataLabelLength(yDomainMin, yDomainMax, 'height');\r\n          var pixelsToAxisPadding = $$.getY(config[\"axis_\" + axisId + \"_type\"], \r\n          // input domain as pixels\r\n          [0, config.axis_rotated ? $$.width : $$.height], \r\n          // output range as axis padding\r\n          [0, domainLength]);\r\n          padding_top += pixelsToAxisPadding(lengths[1]);\r\n          padding_bottom += pixelsToAxisPadding(lengths[0]);\r\n      }\r\n      if (axisId === 'y' && notEmpty(config.axis_y_padding)) {\r\n          padding_top = $$.axis.getPadding(config.axis_y_padding, 'top', padding_top, domainLength);\r\n          padding_bottom = $$.axis.getPadding(config.axis_y_padding, 'bottom', padding_bottom, domainLength);\r\n      }\r\n      if (axisId === 'y2' && notEmpty(config.axis_y2_padding)) {\r\n          padding_top = $$.axis.getPadding(config.axis_y2_padding, 'top', padding_top, domainLength);\r\n          padding_bottom = $$.axis.getPadding(config.axis_y2_padding, 'bottom', padding_bottom, domainLength);\r\n      }\r\n      // Bar/Area chart should be 0-based if all positive|negative\r\n      if (isZeroBased) {\r\n          if (isAllPositive) {\r\n              padding_bottom = yDomainMin;\r\n          }\r\n          if (isAllNegative) {\r\n              padding_top = -yDomainMax;\r\n          }\r\n      }\r\n      domain = [yDomainMin - padding_bottom, yDomainMax + padding_top];\r\n      return isInverted ? domain.reverse() : domain;\r\n  };\r\n  ChartInternal.prototype.getXDomainMin = function (targets) {\r\n      var $$ = this, config = $$.config;\r\n      return isDefined(config.axis_x_min)\r\n          ? $$.isTimeSeries()\r\n              ? this.parseDate(config.axis_x_min)\r\n              : config.axis_x_min\r\n          : $$.d3.min(targets, function (t) {\r\n              return $$.d3.min(t.values, function (v) {\r\n                  return v.x;\r\n              });\r\n          });\r\n  };\r\n  ChartInternal.prototype.getXDomainMax = function (targets) {\r\n      var $$ = this, config = $$.config;\r\n      return isDefined(config.axis_x_max)\r\n          ? $$.isTimeSeries()\r\n              ? this.parseDate(config.axis_x_max)\r\n              : config.axis_x_max\r\n          : $$.d3.max(targets, function (t) {\r\n              return $$.d3.max(t.values, function (v) {\r\n                  return v.x;\r\n              });\r\n          });\r\n  };\r\n  ChartInternal.prototype.getXDomainPadding = function (domain) {\r\n      var $$ = this, config = $$.config, diff = domain[1] - domain[0], maxDataCount, padding, paddingLeft, paddingRight;\r\n      if ($$.isCategorized()) {\r\n          padding = 0;\r\n      }\r\n      else if ($$.hasType('bar')) {\r\n          maxDataCount = $$.getMaxDataCount();\r\n          padding = maxDataCount > 1 ? diff / (maxDataCount - 1) / 2 : 0.5;\r\n      }\r\n      else {\r\n          padding = diff * 0.01;\r\n      }\r\n      if (typeof config.axis_x_padding === 'object' &&\r\n          notEmpty(config.axis_x_padding)) {\r\n          paddingLeft = isValue(config.axis_x_padding.left)\r\n              ? config.axis_x_padding.left\r\n              : padding;\r\n          paddingRight = isValue(config.axis_x_padding.right)\r\n              ? config.axis_x_padding.right\r\n              : padding;\r\n      }\r\n      else if (typeof config.axis_x_padding === 'number') {\r\n          paddingLeft = paddingRight = config.axis_x_padding;\r\n      }\r\n      else {\r\n          paddingLeft = paddingRight = padding;\r\n      }\r\n      return { left: paddingLeft, right: paddingRight };\r\n  };\r\n  ChartInternal.prototype.getXDomain = function (targets) {\r\n      var $$ = this, xDomain = [$$.getXDomainMin(targets), $$.getXDomainMax(targets)], firstX = xDomain[0], lastX = xDomain[1], padding = $$.getXDomainPadding(xDomain), min = 0, max = 0;\r\n      // show center of x domain if min and max are the same\r\n      if (firstX - lastX === 0 && !$$.isCategorized()) {\r\n          if ($$.isTimeSeries()) {\r\n              firstX = new Date(firstX.getTime() * 0.5);\r\n              lastX = new Date(lastX.getTime() * 1.5);\r\n          }\r\n          else {\r\n              firstX = firstX === 0 ? 1 : firstX * 0.5;\r\n              lastX = lastX === 0 ? -1 : lastX * 1.5;\r\n          }\r\n      }\r\n      if (firstX || firstX === 0) {\r\n          min = $$.isTimeSeries()\r\n              ? new Date(firstX.getTime() - padding.left)\r\n              : firstX - padding.left;\r\n      }\r\n      if (lastX || lastX === 0) {\r\n          max = $$.isTimeSeries()\r\n              ? new Date(lastX.getTime() + padding.right)\r\n              : lastX + padding.right;\r\n      }\r\n      return [min, max];\r\n  };\r\n  ChartInternal.prototype.updateXDomain = function (targets, withUpdateXDomain, withUpdateOrgXDomain, withTrim, domain) {\r\n      var $$ = this, config = $$.config;\r\n      if (withUpdateOrgXDomain) {\r\n          $$.x.domain(domain ? domain : $$.d3.extent($$.getXDomain(targets)));\r\n          $$.orgXDomain = $$.x.domain();\r\n          if (config.zoom_enabled) {\r\n              $$.zoom.update();\r\n          }\r\n          $$.subX.domain($$.x.domain());\r\n          if ($$.brush) {\r\n              $$.brush.updateScale($$.subX);\r\n          }\r\n      }\r\n      if (withUpdateXDomain) {\r\n          $$.x.domain(domain\r\n              ? domain\r\n              : !$$.brush || $$.brush.empty()\r\n                  ? $$.orgXDomain\r\n                  : $$.brush.selectionAsValue());\r\n      }\r\n      // Trim domain when too big by zoom mousemove event\r\n      if (withTrim) {\r\n          $$.x.domain($$.trimXDomain($$.x.orgDomain()));\r\n      }\r\n      return $$.x.domain();\r\n  };\r\n  ChartInternal.prototype.trimXDomain = function (domain) {\r\n      var zoomDomain = this.getZoomDomain(), min = zoomDomain[0], max = zoomDomain[1];\r\n      if (domain[0] <= min) {\r\n          domain[1] = +domain[1] + (min - domain[0]);\r\n          domain[0] = min;\r\n      }\r\n      if (max <= domain[1]) {\r\n          domain[0] = +domain[0] - (domain[1] - max);\r\n          domain[1] = max;\r\n      }\r\n      return domain;\r\n  };\n\n  ChartInternal.prototype.drag = function (mouse) {\r\n      var $$ = this, config = $$.config, main = $$.main, d3 = $$.d3;\r\n      var sx, sy, mx, my, minX, maxX, minY, maxY;\r\n      if ($$.hasArcType()) {\r\n          return;\r\n      }\r\n      if (!config.data_selection_enabled) {\r\n          return;\r\n      } // do nothing if not selectable\r\n      if (!config.data_selection_multiple) {\r\n          return;\r\n      } // skip when single selection because drag is used for multiple selection\r\n      sx = $$.dragStart[0];\r\n      sy = $$.dragStart[1];\r\n      mx = mouse[0];\r\n      my = mouse[1];\r\n      minX = Math.min(sx, mx);\r\n      maxX = Math.max(sx, mx);\r\n      minY = config.data_selection_grouped ? $$.margin.top : Math.min(sy, my);\r\n      maxY = config.data_selection_grouped ? $$.height : Math.max(sy, my);\r\n      main\r\n          .select('.' + CLASS.dragarea)\r\n          .attr('x', minX)\r\n          .attr('y', minY)\r\n          .attr('width', maxX - minX)\r\n          .attr('height', maxY - minY);\r\n      // TODO: binary search when multiple xs\r\n      main\r\n          .selectAll('.' + CLASS.shapes)\r\n          .selectAll('.' + CLASS.shape)\r\n          .each(function (d, i) {\r\n          if (!config.data_selection_isselectable(d)) {\r\n              return;\r\n          }\r\n          var shape = d3.select(this), isSelected = shape.classed(CLASS.SELECTED), isIncluded = shape.classed(CLASS.INCLUDED), _x, _y, _w, _h, toggle, isWithin = false, box;\r\n          if (shape.classed(CLASS.circle)) {\r\n              _x = shape.attr('cx') * 1;\r\n              _y = shape.attr('cy') * 1;\r\n              toggle = $$.togglePoint;\r\n              isWithin = minX < _x && _x < maxX && minY < _y && _y < maxY;\r\n          }\r\n          else if (shape.classed(CLASS.bar)) {\r\n              box = getPathBox(this);\r\n              _x = box.x;\r\n              _y = box.y;\r\n              _w = box.width;\r\n              _h = box.height;\r\n              toggle = $$.togglePath;\r\n              isWithin =\r\n                  !(maxX < _x || _x + _w < minX) && !(maxY < _y || _y + _h < minY);\r\n          }\r\n          else {\r\n              // line/area selection not supported yet\r\n              return;\r\n          }\r\n          if (isWithin ^ isIncluded) {\r\n              shape.classed(CLASS.INCLUDED, !isIncluded);\r\n              // TODO: included/unincluded callback here\r\n              shape.classed(CLASS.SELECTED, !isSelected);\r\n              toggle.call($$, !isSelected, shape, d, i);\r\n          }\r\n      });\r\n  };\r\n  ChartInternal.prototype.dragstart = function (mouse) {\r\n      var $$ = this, config = $$.config;\r\n      if ($$.hasArcType()) {\r\n          return;\r\n      }\r\n      if (!config.data_selection_enabled) {\r\n          return;\r\n      } // do nothing if not selectable\r\n      $$.dragStart = mouse;\r\n      $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('rect')\r\n          .attr('class', CLASS.dragarea)\r\n          .style('opacity', 0.1);\r\n      $$.dragging = true;\r\n  };\r\n  ChartInternal.prototype.dragend = function () {\r\n      var $$ = this, config = $$.config;\r\n      if ($$.hasArcType()) {\r\n          return;\r\n      }\r\n      if (!config.data_selection_enabled) {\r\n          return;\r\n      } // do nothing if not selectable\r\n      $$.main\r\n          .select('.' + CLASS.dragarea)\r\n          .transition()\r\n          .duration(100)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      $$.main.selectAll('.' + CLASS.shape).classed(CLASS.INCLUDED, false);\r\n      $$.dragging = false;\r\n  };\n\n  ChartInternal.prototype.getYFormat = function (forArc) {\r\n      var $$ = this, formatForY = forArc && !$$.hasType('gauge') ? $$.defaultArcValueFormat : $$.yFormat, formatForY2 = forArc && !$$.hasType('gauge') ? $$.defaultArcValueFormat : $$.y2Format;\r\n      return function (v, ratio, id) {\r\n          var format = $$.axis.getId(id) === 'y2' ? formatForY2 : formatForY;\r\n          return format.call($$, v, ratio);\r\n      };\r\n  };\r\n  ChartInternal.prototype.yFormat = function (v) {\r\n      var $$ = this, config = $$.config, format = config.axis_y_tick_format\r\n          ? config.axis_y_tick_format\r\n          : $$.defaultValueFormat;\r\n      return format(v);\r\n  };\r\n  ChartInternal.prototype.y2Format = function (v) {\r\n      var $$ = this, config = $$.config, format = config.axis_y2_tick_format\r\n          ? config.axis_y2_tick_format\r\n          : $$.defaultValueFormat;\r\n      return format(v);\r\n  };\r\n  ChartInternal.prototype.defaultValueFormat = function (v) {\r\n      return isValue(v) ? +v : '';\r\n  };\r\n  ChartInternal.prototype.defaultArcValueFormat = function (v, ratio) {\r\n      return (ratio * 100).toFixed(1) + '%';\r\n  };\r\n  ChartInternal.prototype.dataLabelFormat = function (targetId) {\r\n      var $$ = this, data_labels = $$.config.data_labels, format, defaultFormat = function (v) {\r\n          return isValue(v) ? +v : '';\r\n      };\r\n      // find format according to axis id\r\n      if (typeof data_labels.format === 'function') {\r\n          format = data_labels.format;\r\n      }\r\n      else if (typeof data_labels.format === 'object') {\r\n          if (data_labels.format[targetId]) {\r\n              format =\r\n                  data_labels.format[targetId] === true\r\n                      ? defaultFormat\r\n                      : data_labels.format[targetId];\r\n          }\r\n          else {\r\n              format = function () {\r\n                  return '';\r\n              };\r\n          }\r\n      }\r\n      else {\r\n          format = defaultFormat;\r\n      }\r\n      return format;\r\n  };\n\n  ChartInternal.prototype.initGrid = function () {\r\n      var $$ = this, config = $$.config, d3 = $$.d3;\r\n      $$.grid = $$.main\r\n          .append('g')\r\n          .attr('clip-path', $$.clipPathForGrid)\r\n          .attr('class', CLASS.grid);\r\n      if (config.grid_x_show) {\r\n          $$.grid.append('g').attr('class', CLASS.xgrids);\r\n      }\r\n      if (config.grid_y_show) {\r\n          $$.grid.append('g').attr('class', CLASS.ygrids);\r\n      }\r\n      if (config.grid_focus_show) {\r\n          $$.grid\r\n              .append('g')\r\n              .attr('class', CLASS.xgridFocus)\r\n              .append('line')\r\n              .attr('class', CLASS.xgridFocus);\r\n      }\r\n      $$.xgrid = d3.selectAll([]);\r\n      if (!config.grid_lines_front) {\r\n          $$.initGridLines();\r\n      }\r\n  };\r\n  ChartInternal.prototype.initGridLines = function () {\r\n      var $$ = this, d3 = $$.d3;\r\n      $$.gridLines = $$.main\r\n          .append('g')\r\n          .attr('clip-path', $$.clipPathForGrid)\r\n          .attr('class', CLASS.grid + ' ' + CLASS.gridLines);\r\n      $$.gridLines.append('g').attr('class', CLASS.xgridLines);\r\n      $$.gridLines.append('g').attr('class', CLASS.ygridLines);\r\n      $$.xgridLines = d3.selectAll([]);\r\n  };\r\n  ChartInternal.prototype.updateXGrid = function (withoutUpdate) {\r\n      var $$ = this, config = $$.config, d3 = $$.d3, xgridData = $$.generateGridData(config.grid_x_type, $$.x), tickOffset = $$.isCategorized() ? $$.xAxis.tickOffset() : 0;\r\n      $$.xgridAttr = config.axis_rotated\r\n          ? {\r\n              x1: 0,\r\n              x2: $$.width,\r\n              y1: function (d) {\r\n                  return $$.x(d) - tickOffset;\r\n              },\r\n              y2: function (d) {\r\n                  return $$.x(d) - tickOffset;\r\n              }\r\n          }\r\n          : {\r\n              x1: function (d) {\r\n                  return $$.x(d) + tickOffset;\r\n              },\r\n              x2: function (d) {\r\n                  return $$.x(d) + tickOffset;\r\n              },\r\n              y1: 0,\r\n              y2: $$.height\r\n          };\r\n      $$.xgridAttr.opacity = function () {\r\n          var pos = +d3.select(this).attr(config.axis_rotated ? 'y1' : 'x1');\r\n          return pos === (config.axis_rotated ? $$.height : 0) ? 0 : 1;\r\n      };\r\n      var xgrid = $$.main\r\n          .select('.' + CLASS.xgrids)\r\n          .selectAll('.' + CLASS.xgrid)\r\n          .data(xgridData);\r\n      var xgridEnter = xgrid\r\n          .enter()\r\n          .append('line')\r\n          .attr('class', CLASS.xgrid)\r\n          .attr('x1', $$.xgridAttr.x1)\r\n          .attr('x2', $$.xgridAttr.x2)\r\n          .attr('y1', $$.xgridAttr.y1)\r\n          .attr('y2', $$.xgridAttr.y2)\r\n          .style('opacity', 0);\r\n      $$.xgrid = xgridEnter.merge(xgrid);\r\n      if (!withoutUpdate) {\r\n          $$.xgrid\r\n              .attr('x1', $$.xgridAttr.x1)\r\n              .attr('x2', $$.xgridAttr.x2)\r\n              .attr('y1', $$.xgridAttr.y1)\r\n              .attr('y2', $$.xgridAttr.y2)\r\n              .style('opacity', $$.xgridAttr.opacity);\r\n      }\r\n      xgrid.exit().remove();\r\n  };\r\n  ChartInternal.prototype.updateYGrid = function () {\r\n      var $$ = this, config = $$.config, gridValues = $$.yAxis.tickValues() || $$.y.ticks(config.grid_y_ticks);\r\n      var ygrid = $$.main\r\n          .select('.' + CLASS.ygrids)\r\n          .selectAll('.' + CLASS.ygrid)\r\n          .data(gridValues);\r\n      var ygridEnter = ygrid\r\n          .enter()\r\n          .append('line')\r\n          // TODO: x1, x2, y1, y2, opacity need to be set here maybe\r\n          .attr('class', CLASS.ygrid);\r\n      $$.ygrid = ygridEnter.merge(ygrid);\r\n      $$.ygrid\r\n          .attr('x1', config.axis_rotated ? $$.y : 0)\r\n          .attr('x2', config.axis_rotated ? $$.y : $$.width)\r\n          .attr('y1', config.axis_rotated ? 0 : $$.y)\r\n          .attr('y2', config.axis_rotated ? $$.height : $$.y);\r\n      ygrid.exit().remove();\r\n      $$.smoothLines($$.ygrid, 'grid');\r\n  };\r\n  ChartInternal.prototype.gridTextAnchor = function (d) {\r\n      return d.position ? d.position : 'end';\r\n  };\r\n  ChartInternal.prototype.gridTextDx = function (d) {\r\n      return d.position === 'start' ? 4 : d.position === 'middle' ? 0 : -4;\r\n  };\r\n  ChartInternal.prototype.xGridTextX = function (d) {\r\n      return d.position === 'start'\r\n          ? -this.height\r\n          : d.position === 'middle'\r\n              ? -this.height / 2\r\n              : 0;\r\n  };\r\n  ChartInternal.prototype.yGridTextX = function (d) {\r\n      return d.position === 'start'\r\n          ? 0\r\n          : d.position === 'middle'\r\n              ? this.width / 2\r\n              : this.width;\r\n  };\r\n  ChartInternal.prototype.updateGrid = function (duration) {\r\n      var $$ = this, main = $$.main, config = $$.config, xgridLine, xgridLineEnter, ygridLine, ygridLineEnter, xv = $$.xv.bind($$), yv = $$.yv.bind($$), xGridTextX = $$.xGridTextX.bind($$), yGridTextX = $$.yGridTextX.bind($$);\r\n      // hide if arc type\r\n      $$.grid.style('visibility', $$.hasArcType() ? 'hidden' : 'visible');\r\n      main.select('line.' + CLASS.xgridFocus).style('visibility', 'hidden');\r\n      if (config.grid_x_show) {\r\n          $$.updateXGrid();\r\n      }\r\n      xgridLine = main\r\n          .select('.' + CLASS.xgridLines)\r\n          .selectAll('.' + CLASS.xgridLine)\r\n          .data(config.grid_x_lines);\r\n      // enter\r\n      xgridLineEnter = xgridLine\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', function (d) {\r\n          return CLASS.xgridLine + (d['class'] ? ' ' + d['class'] : '');\r\n      });\r\n      xgridLineEnter\r\n          .append('line')\r\n          .attr('x1', config.axis_rotated ? 0 : xv)\r\n          .attr('x2', config.axis_rotated ? $$.width : xv)\r\n          .attr('y1', config.axis_rotated ? xv : 0)\r\n          .attr('y2', config.axis_rotated ? xv : $$.height)\r\n          .style('opacity', 0);\r\n      xgridLineEnter\r\n          .append('text')\r\n          .attr('text-anchor', $$.gridTextAnchor)\r\n          .attr('transform', config.axis_rotated ? '' : 'rotate(-90)')\r\n          .attr('x', config.axis_rotated ? yGridTextX : xGridTextX)\r\n          .attr('y', xv)\r\n          .attr('dx', $$.gridTextDx)\r\n          .attr('dy', -5)\r\n          .style('opacity', 0);\r\n      // udpate\r\n      $$.xgridLines = xgridLineEnter.merge(xgridLine);\r\n      // done in d3.transition() of the end of this function\r\n      // exit\r\n      xgridLine\r\n          .exit()\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      // Y-Grid\r\n      if (config.grid_y_show) {\r\n          $$.updateYGrid();\r\n      }\r\n      ygridLine = main\r\n          .select('.' + CLASS.ygridLines)\r\n          .selectAll('.' + CLASS.ygridLine)\r\n          .data(config.grid_y_lines);\r\n      // enter\r\n      ygridLineEnter = ygridLine\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', function (d) {\r\n          return CLASS.ygridLine + (d['class'] ? ' ' + d['class'] : '');\r\n      });\r\n      ygridLineEnter\r\n          .append('line')\r\n          .attr('x1', config.axis_rotated ? yv : 0)\r\n          .attr('x2', config.axis_rotated ? yv : $$.width)\r\n          .attr('y1', config.axis_rotated ? 0 : yv)\r\n          .attr('y2', config.axis_rotated ? $$.height : yv)\r\n          .style('opacity', 0);\r\n      ygridLineEnter\r\n          .append('text')\r\n          .attr('text-anchor', $$.gridTextAnchor)\r\n          .attr('transform', config.axis_rotated ? 'rotate(-90)' : '')\r\n          .attr('x', config.axis_rotated ? xGridTextX : yGridTextX)\r\n          .attr('y', yv)\r\n          .attr('dx', $$.gridTextDx)\r\n          .attr('dy', -5)\r\n          .style('opacity', 0);\r\n      // update\r\n      $$.ygridLines = ygridLineEnter.merge(ygridLine);\r\n      $$.ygridLines\r\n          .select('line')\r\n          .transition()\r\n          .duration(duration)\r\n          .attr('x1', config.axis_rotated ? yv : 0)\r\n          .attr('x2', config.axis_rotated ? yv : $$.width)\r\n          .attr('y1', config.axis_rotated ? 0 : yv)\r\n          .attr('y2', config.axis_rotated ? $$.height : yv)\r\n          .style('opacity', 1);\r\n      $$.ygridLines\r\n          .select('text')\r\n          .transition()\r\n          .duration(duration)\r\n          .attr('x', config.axis_rotated ? $$.xGridTextX.bind($$) : $$.yGridTextX.bind($$))\r\n          .attr('y', yv)\r\n          .text(function (d) {\r\n          return d.text;\r\n      })\r\n          .style('opacity', 1);\r\n      // exit\r\n      ygridLine\r\n          .exit()\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n  };\r\n  ChartInternal.prototype.redrawGrid = function (withTransition, transition) {\r\n      var $$ = this, config = $$.config, xv = $$.xv.bind($$), lines = $$.xgridLines.select('line'), texts = $$.xgridLines.select('text');\r\n      return [\r\n          (withTransition ? lines.transition(transition) : lines)\r\n              .attr('x1', config.axis_rotated ? 0 : xv)\r\n              .attr('x2', config.axis_rotated ? $$.width : xv)\r\n              .attr('y1', config.axis_rotated ? xv : 0)\r\n              .attr('y2', config.axis_rotated ? xv : $$.height)\r\n              .style('opacity', 1),\r\n          (withTransition ? texts.transition(transition) : texts)\r\n              .attr('x', config.axis_rotated ? $$.yGridTextX.bind($$) : $$.xGridTextX.bind($$))\r\n              .attr('y', xv)\r\n              .text(function (d) {\r\n              return d.text;\r\n          })\r\n              .style('opacity', 1)\r\n      ];\r\n  };\r\n  ChartInternal.prototype.showXGridFocus = function (selectedData) {\r\n      var $$ = this, config = $$.config, dataToShow = selectedData.filter(function (d) {\r\n          return d && isValue(d.value);\r\n      }), focusEl = $$.main.selectAll('line.' + CLASS.xgridFocus), xx = $$.xx.bind($$);\r\n      if (!config.tooltip_show) {\r\n          return;\r\n      }\r\n      // Hide when stanford plot exists\r\n      if ($$.hasType('stanford') || $$.hasArcType()) {\r\n          return;\r\n      }\r\n      focusEl\r\n          .style('visibility', 'visible')\r\n          .data([dataToShow[0]])\r\n          .attr(config.axis_rotated ? 'y1' : 'x1', xx)\r\n          .attr(config.axis_rotated ? 'y2' : 'x2', xx);\r\n      $$.smoothLines(focusEl, 'grid');\r\n  };\r\n  ChartInternal.prototype.hideXGridFocus = function () {\r\n      this.main.select('line.' + CLASS.xgridFocus).style('visibility', 'hidden');\r\n  };\r\n  ChartInternal.prototype.updateXgridFocus = function () {\r\n      var $$ = this, config = $$.config;\r\n      $$.main\r\n          .select('line.' + CLASS.xgridFocus)\r\n          .attr('x1', config.axis_rotated ? 0 : -10)\r\n          .attr('x2', config.axis_rotated ? $$.width : -10)\r\n          .attr('y1', config.axis_rotated ? -10 : 0)\r\n          .attr('y2', config.axis_rotated ? -10 : $$.height);\r\n  };\r\n  ChartInternal.prototype.generateGridData = function (type, scale) {\r\n      var $$ = this, gridData = [], xDomain, firstYear, lastYear, i, tickNum = $$.main\r\n          .select('.' + CLASS.axisX)\r\n          .selectAll('.tick')\r\n          .size();\r\n      if (type === 'year') {\r\n          xDomain = $$.getXDomain();\r\n          firstYear = xDomain[0].getFullYear();\r\n          lastYear = xDomain[1].getFullYear();\r\n          for (i = firstYear; i <= lastYear; i++) {\r\n              gridData.push(new Date(i + '-01-01 00:00:00'));\r\n          }\r\n      }\r\n      else {\r\n          gridData = scale.ticks(10);\r\n          if (gridData.length > tickNum) {\r\n              // use only int\r\n              gridData = gridData.filter(function (d) {\r\n                  return ('' + d).indexOf('.') < 0;\r\n              });\r\n          }\r\n      }\r\n      return gridData;\r\n  };\r\n  ChartInternal.prototype.getGridFilterToRemove = function (params) {\r\n      return params\r\n          ? function (line) {\r\n              var found = false;\r\n              [].concat(params).forEach(function (param) {\r\n                  if (('value' in param && line.value === param.value) ||\r\n                      ('class' in param && line['class'] === param['class'])) {\r\n                      found = true;\r\n                  }\r\n              });\r\n              return found;\r\n          }\r\n          : function () {\r\n              return true;\r\n          };\r\n  };\r\n  ChartInternal.prototype.removeGridLines = function (params, forX) {\r\n      var $$ = this, config = $$.config, toRemove = $$.getGridFilterToRemove(params), toShow = function (line) {\r\n          return !toRemove(line);\r\n      }, classLines = forX ? CLASS.xgridLines : CLASS.ygridLines, classLine = forX ? CLASS.xgridLine : CLASS.ygridLine;\r\n      $$.main\r\n          .select('.' + classLines)\r\n          .selectAll('.' + classLine)\r\n          .filter(toRemove)\r\n          .transition()\r\n          .duration(config.transition_duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      if (forX) {\r\n          config.grid_x_lines = config.grid_x_lines.filter(toShow);\r\n      }\r\n      else {\r\n          config.grid_y_lines = config.grid_y_lines.filter(toShow);\r\n      }\r\n  };\n\n  ChartInternal.prototype.initEventRect = function () {\r\n      var $$ = this, config = $$.config;\r\n      $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.eventRects)\r\n          .style('fill-opacity', 0);\r\n      $$.eventRect = $$.main\r\n          .select('.' + CLASS.eventRects)\r\n          .append('rect')\r\n          .attr('class', CLASS.eventRect);\r\n      // event rect handle zoom event as well\r\n      if (config.zoom_enabled && $$.zoom) {\r\n          $$.eventRect.call($$.zoom).on('dblclick.zoom', null);\r\n          if (config.zoom_initialRange) {\r\n              // WORKAROUND: Add transition to apply transform immediately when no subchart\r\n              $$.eventRect\r\n                  .transition()\r\n                  .duration(0)\r\n                  .call($$.zoom.transform, $$.zoomTransform(config.zoom_initialRange));\r\n          }\r\n      }\r\n  };\r\n  ChartInternal.prototype.redrawEventRect = function () {\r\n      var $$ = this, d3 = $$.d3, config = $$.config;\r\n      function mouseout() {\r\n          $$.svg.select('.' + CLASS.eventRect).style('cursor', null);\r\n          $$.hideXGridFocus();\r\n          $$.hideTooltip();\r\n          $$.unexpandCircles();\r\n          $$.unexpandBars();\r\n      }\r\n      var isHoveringDataPoint = function (mouse, closest) {\r\n          return closest &&\r\n              ($$.isBarType(closest.id) ||\r\n                  $$.dist(closest, mouse) < config.point_sensitivity);\r\n      };\r\n      var withName = function (d) { return (d ? $$.addName(Object.assign({}, d)) : null); };\r\n      // rects for mouseover\r\n      $$.main\r\n          .select('.' + CLASS.eventRects)\r\n          .style('cursor', config.zoom_enabled\r\n          ? config.axis_rotated\r\n              ? 'ns-resize'\r\n              : 'ew-resize'\r\n          : null);\r\n      $$.eventRect\r\n          .attr('x', 0)\r\n          .attr('y', 0)\r\n          .attr('width', $$.width)\r\n          .attr('height', $$.height)\r\n          .on('mouseout', config.interaction_enabled\r\n          ? function () {\r\n              if (!config) {\r\n                  return;\r\n              } // chart is destroyed\r\n              if ($$.hasArcType()) {\r\n                  return;\r\n              }\r\n              if ($$.mouseover) {\r\n                  config.data_onmouseout.call($$.api, $$.mouseover);\r\n                  $$.mouseover = undefined;\r\n              }\r\n              mouseout();\r\n          }\r\n          : null)\r\n          .on('mousemove', config.interaction_enabled\r\n          ? function () {\r\n              // do nothing when dragging\r\n              if ($$.dragging) {\r\n                  return;\r\n              }\r\n              var targetsToShow = $$.getTargetsToShow();\r\n              // do nothing if arc type\r\n              if ($$.hasArcType(targetsToShow)) {\r\n                  return;\r\n              }\r\n              var mouse = d3.mouse(this);\r\n              var closest = withName($$.findClosestFromTargets(targetsToShow, mouse));\r\n              var isMouseCloseToDataPoint = isHoveringDataPoint(mouse, closest);\r\n              // ensure onmouseout is always called if mousemove switch between 2 targets\r\n              if ($$.mouseover &&\r\n                  (!closest ||\r\n                      closest.id !== $$.mouseover.id ||\r\n                      closest.index !== $$.mouseover.index)) {\r\n                  config.data_onmouseout.call($$.api, $$.mouseover);\r\n                  $$.mouseover = undefined;\r\n              }\r\n              if (closest && !$$.mouseover) {\r\n                  config.data_onmouseover.call($$.api, closest);\r\n                  $$.mouseover = closest;\r\n              }\r\n              // show cursor as pointer if we're hovering a data point close enough\r\n              $$.svg\r\n                  .select('.' + CLASS.eventRect)\r\n                  .style('cursor', isMouseCloseToDataPoint ? 'pointer' : null);\r\n              // if tooltip not grouped, we want to display only data from closest data point\r\n              var showSingleDataPoint = !config.tooltip_grouped || $$.hasType('stanford', targetsToShow);\r\n              // find data to highlight\r\n              var selectedData;\r\n              if (showSingleDataPoint) {\r\n                  if (closest) {\r\n                      selectedData = [closest];\r\n                  }\r\n              }\r\n              else {\r\n                  var closestByX = void 0;\r\n                  if (closest) {\r\n                      // reuse closest value\r\n                      closestByX = closest;\r\n                  }\r\n                  else {\r\n                      // try to find the closest value by X values from the mouse position\r\n                      var mouseX = config.axis_rotated ? mouse[1] : mouse[0];\r\n                      closestByX = $$.findClosestFromTargetsByX(targetsToShow, $$.x.invert(mouseX));\r\n                  }\r\n                  // highlight all data for this 'x' value\r\n                  if (closestByX) {\r\n                      selectedData = $$.filterByX(targetsToShow, closestByX.x);\r\n                  }\r\n              }\r\n              // ensure we have data to show\r\n              if (!selectedData || selectedData.length === 0) {\r\n                  return mouseout();\r\n              }\r\n              // inject names for each point\r\n              selectedData = selectedData.map(withName);\r\n              // show tooltip\r\n              $$.showTooltip(selectedData, this);\r\n              // expand points\r\n              if (config.point_focus_expand_enabled) {\r\n                  $$.unexpandCircles();\r\n                  selectedData.forEach(function (d) {\r\n                      $$.expandCircles(d.index, d.id, false);\r\n                  });\r\n              }\r\n              // expand bars\r\n              $$.unexpandBars();\r\n              selectedData.forEach(function (d) {\r\n                  $$.expandBars(d.index, d.id, false);\r\n              });\r\n              // Show xgrid focus line\r\n              $$.showXGridFocus(selectedData);\r\n          }\r\n          : null)\r\n          .on('click', config.interaction_enabled\r\n          ? function () {\r\n              var targetsToShow = $$.getTargetsToShow();\r\n              if ($$.hasArcType(targetsToShow)) {\r\n                  return;\r\n              }\r\n              var mouse = d3.mouse(this);\r\n              var closest = withName($$.findClosestFromTargets(targetsToShow, mouse));\r\n              if (!isHoveringDataPoint(mouse, closest)) {\r\n                  return;\r\n              }\r\n              // select if selection enabled\r\n              var sameXData;\r\n              if (!config.data_selection_grouped || $$.isStanfordType(closest)) {\r\n                  sameXData = [closest];\r\n              }\r\n              else {\r\n                  sameXData = $$.filterByX(targetsToShow, closest.x);\r\n              }\r\n              // toggle selected state\r\n              sameXData.forEach(function (d) {\r\n                  $$.main\r\n                      .selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(d.id))\r\n                      .selectAll('.' + CLASS.shape + '-' + d.index)\r\n                      .each(function () {\r\n                      if (config.data_selection_grouped ||\r\n                          $$.isWithinShape(this, d)) {\r\n                          $$.toggleShape(this, d, d.index);\r\n                      }\r\n                  });\r\n              });\r\n              // call data_onclick on the closest data point\r\n              if (closest) {\r\n                  var shape = $$.main\r\n                      .selectAll('.' + CLASS.shapes + $$.getTargetSelectorSuffix(closest.id))\r\n                      .select('.' + CLASS.shape + '-' + closest.index);\r\n                  config.data_onclick.call($$.api, closest, shape.node());\r\n              }\r\n          }\r\n          : null)\r\n          .call(config.interaction_enabled && config.data_selection_draggable && $$.drag\r\n          ? d3\r\n              .drag()\r\n              .on('drag', function () {\r\n              $$.drag(d3.mouse(this));\r\n          })\r\n              .on('start', function () {\r\n              $$.dragstart(d3.mouse(this));\r\n          })\r\n              .on('end', function () {\r\n              $$.dragend();\r\n          })\r\n          : function () { });\r\n  };\r\n  ChartInternal.prototype.getMousePosition = function (data) {\r\n      var $$ = this;\r\n      return [$$.x(data.x), $$.getYScale(data.id)(data.value)];\r\n  };\r\n  ChartInternal.prototype.dispatchEvent = function (type, mouse) {\r\n      var $$ = this, selector = '.' + CLASS.eventRect, eventRect = $$.main.select(selector).node(), box = eventRect.getBoundingClientRect(), x = box.left + (mouse ? mouse[0] : 0), y = box.top + (mouse ? mouse[1] : 0), event = document.createEvent('MouseEvents');\r\n      event.initMouseEvent(type, true, true, window, 0, x, y, x, y, false, false, false, false, 0, null);\r\n      eventRect.dispatchEvent(event);\r\n  };\n\n  ChartInternal.prototype.initLegend = function () {\r\n      var $$ = this;\r\n      $$.legendItemTextBox = {};\r\n      $$.legendHasRendered = false;\r\n      $$.legend = $$.svg.append('g').attr('transform', $$.getTranslate('legend'));\r\n      if (!$$.config.legend_show) {\r\n          $$.legend.style('visibility', 'hidden');\r\n          $$.hiddenLegendIds = $$.mapToIds($$.data.targets);\r\n          return;\r\n      }\r\n      // MEMO: call here to update legend box and tranlate for all\r\n      // MEMO: translate will be updated by this, so transform not needed in updateLegend()\r\n      $$.updateLegendWithDefaults();\r\n  };\r\n  ChartInternal.prototype.updateLegendWithDefaults = function () {\r\n      var $$ = this;\r\n      $$.updateLegend($$.mapToIds($$.data.targets), {\r\n          withTransform: false,\r\n          withTransitionForTransform: false,\r\n          withTransition: false\r\n      });\r\n  };\r\n  ChartInternal.prototype.updateSizeForLegend = function (legendHeight, legendWidth) {\r\n      var $$ = this, config = $$.config, insetLegendPosition = {\r\n          top: $$.isLegendTop\r\n              ? $$.getCurrentPaddingTop() + config.legend_inset_y + 5.5\r\n              : $$.currentHeight -\r\n                  legendHeight -\r\n                  $$.getCurrentPaddingBottom() -\r\n                  config.legend_inset_y,\r\n          left: $$.isLegendLeft\r\n              ? $$.getCurrentPaddingLeft() + config.legend_inset_x + 0.5\r\n              : $$.currentWidth -\r\n                  legendWidth -\r\n                  $$.getCurrentPaddingRight() -\r\n                  config.legend_inset_x +\r\n                  0.5\r\n      };\r\n      $$.margin3 = {\r\n          top: $$.isLegendRight\r\n              ? 0\r\n              : $$.isLegendInset\r\n                  ? insetLegendPosition.top\r\n                  : $$.currentHeight - legendHeight,\r\n          right: NaN,\r\n          bottom: 0,\r\n          left: $$.isLegendRight\r\n              ? $$.currentWidth - legendWidth\r\n              : $$.isLegendInset\r\n                  ? insetLegendPosition.left\r\n                  : 0\r\n      };\r\n  };\r\n  ChartInternal.prototype.transformLegend = function (withTransition) {\r\n      var $$ = this;\r\n      (withTransition ? $$.legend.transition() : $$.legend).attr('transform', $$.getTranslate('legend'));\r\n  };\r\n  ChartInternal.prototype.updateLegendStep = function (step) {\r\n      this.legendStep = step;\r\n  };\r\n  ChartInternal.prototype.updateLegendItemWidth = function (w) {\r\n      this.legendItemWidth = w;\r\n  };\r\n  ChartInternal.prototype.updateLegendItemHeight = function (h) {\r\n      this.legendItemHeight = h;\r\n  };\r\n  ChartInternal.prototype.getLegendWidth = function () {\r\n      var $$ = this;\r\n      return $$.config.legend_show\r\n          ? $$.isLegendRight || $$.isLegendInset\r\n              ? $$.legendItemWidth * ($$.legendStep + 1)\r\n              : $$.currentWidth\r\n          : 0;\r\n  };\r\n  ChartInternal.prototype.getLegendHeight = function () {\r\n      var $$ = this, h = 0;\r\n      if ($$.config.legend_show) {\r\n          if ($$.isLegendRight) {\r\n              h = $$.currentHeight;\r\n          }\r\n          else {\r\n              h = Math.max(20, $$.legendItemHeight) * ($$.legendStep + 1);\r\n          }\r\n      }\r\n      return h;\r\n  };\r\n  ChartInternal.prototype.opacityForLegend = function (legendItem) {\r\n      return legendItem.classed(CLASS.legendItemHidden) ? null : 1;\r\n  };\r\n  ChartInternal.prototype.opacityForUnfocusedLegend = function (legendItem) {\r\n      return legendItem.classed(CLASS.legendItemHidden) ? null : 0.3;\r\n  };\r\n  ChartInternal.prototype.toggleFocusLegend = function (targetIds, focus) {\r\n      var $$ = this;\r\n      targetIds = $$.mapToTargetIds(targetIds);\r\n      $$.legend\r\n          .selectAll('.' + CLASS.legendItem)\r\n          .filter(function (id) {\r\n          return targetIds.indexOf(id) >= 0;\r\n      })\r\n          .classed(CLASS.legendItemFocused, focus)\r\n          .transition()\r\n          .duration(100)\r\n          .style('opacity', function () {\r\n          var opacity = focus ? $$.opacityForLegend : $$.opacityForUnfocusedLegend;\r\n          return opacity.call($$, $$.d3.select(this));\r\n      });\r\n  };\r\n  ChartInternal.prototype.revertLegend = function () {\r\n      var $$ = this, d3 = $$.d3;\r\n      $$.legend\r\n          .selectAll('.' + CLASS.legendItem)\r\n          .classed(CLASS.legendItemFocused, false)\r\n          .transition()\r\n          .duration(100)\r\n          .style('opacity', function () {\r\n          return $$.opacityForLegend(d3.select(this));\r\n      });\r\n  };\r\n  ChartInternal.prototype.showLegend = function (targetIds) {\r\n      var $$ = this, config = $$.config;\r\n      if (!config.legend_show) {\r\n          config.legend_show = true;\r\n          $$.legend.style('visibility', 'visible');\r\n          if (!$$.legendHasRendered) {\r\n              $$.updateLegendWithDefaults();\r\n          }\r\n      }\r\n      $$.removeHiddenLegendIds(targetIds);\r\n      $$.legend\r\n          .selectAll($$.selectorLegends(targetIds))\r\n          .style('visibility', 'visible')\r\n          .transition()\r\n          .style('opacity', function () {\r\n          return $$.opacityForLegend($$.d3.select(this));\r\n      });\r\n  };\r\n  ChartInternal.prototype.hideLegend = function (targetIds) {\r\n      var $$ = this, config = $$.config;\r\n      if (config.legend_show && isEmpty(targetIds)) {\r\n          config.legend_show = false;\r\n          $$.legend.style('visibility', 'hidden');\r\n      }\r\n      $$.addHiddenLegendIds(targetIds);\r\n      $$.legend\r\n          .selectAll($$.selectorLegends(targetIds))\r\n          .style('opacity', 0)\r\n          .style('visibility', 'hidden');\r\n  };\r\n  ChartInternal.prototype.clearLegendItemTextBoxCache = function () {\r\n      this.legendItemTextBox = {};\r\n  };\r\n  ChartInternal.prototype.updateLegend = function (targetIds, options, transitions) {\r\n      var $$ = this, config = $$.config;\r\n      var xForLegend, xForLegendText, xForLegendRect, yForLegend, yForLegendText, yForLegendRect, x1ForLegendTile, x2ForLegendTile, yForLegendTile;\r\n      var paddingTop = 4, paddingRight = 10, maxWidth = 0, maxHeight = 0, posMin = 10, tileWidth = config.legend_item_tile_width + 5;\r\n      var l, totalLength = 0, offsets = {}, widths = {}, heights = {}, margins = [0], steps = {}, step = 0;\r\n      var withTransition, withTransitionForTransform;\r\n      var texts, rects, tiles, background;\r\n      // Skip elements when their name is set to null\r\n      targetIds = targetIds.filter(function (id) {\r\n          return !isDefined(config.data_names[id]) || config.data_names[id] !== null;\r\n      });\r\n      options = options || {};\r\n      withTransition = getOption(options, 'withTransition', true);\r\n      withTransitionForTransform = getOption(options, 'withTransitionForTransform', true);\r\n      function getTextBox(textElement, id) {\r\n          if (!$$.legendItemTextBox[id]) {\r\n              $$.legendItemTextBox[id] = $$.getTextRect(textElement.textContent, CLASS.legendItem, textElement);\r\n          }\r\n          return $$.legendItemTextBox[id];\r\n      }\r\n      function updatePositions(textElement, id, index) {\r\n          var reset = index === 0, isLast = index === targetIds.length - 1, box = getTextBox(textElement, id), itemWidth = box.width +\r\n              tileWidth +\r\n              (isLast && !($$.isLegendRight || $$.isLegendInset) ? 0 : paddingRight) +\r\n              config.legend_padding, itemHeight = box.height + paddingTop, itemLength = $$.isLegendRight || $$.isLegendInset ? itemHeight : itemWidth, areaLength = $$.isLegendRight || $$.isLegendInset\r\n              ? $$.getLegendHeight()\r\n              : $$.getLegendWidth(), margin, maxLength;\r\n          // MEMO: care about condifion of step, totalLength\r\n          function updateValues(id, withoutStep) {\r\n              if (!withoutStep) {\r\n                  margin = (areaLength - totalLength - itemLength) / 2;\r\n                  if (margin < posMin) {\r\n                      margin = (areaLength - itemLength) / 2;\r\n                      totalLength = 0;\r\n                      step++;\r\n                  }\r\n              }\r\n              steps[id] = step;\r\n              margins[step] = $$.isLegendInset ? 10 : margin;\r\n              offsets[id] = totalLength;\r\n              totalLength += itemLength;\r\n          }\r\n          if (reset) {\r\n              totalLength = 0;\r\n              step = 0;\r\n              maxWidth = 0;\r\n              maxHeight = 0;\r\n          }\r\n          if (config.legend_show && !$$.isLegendToShow(id)) {\r\n              widths[id] = heights[id] = steps[id] = offsets[id] = 0;\r\n              return;\r\n          }\r\n          widths[id] = itemWidth;\r\n          heights[id] = itemHeight;\r\n          if (!maxWidth || itemWidth >= maxWidth) {\r\n              maxWidth = itemWidth;\r\n          }\r\n          if (!maxHeight || itemHeight >= maxHeight) {\r\n              maxHeight = itemHeight;\r\n          }\r\n          maxLength = $$.isLegendRight || $$.isLegendInset ? maxHeight : maxWidth;\r\n          if (config.legend_equally) {\r\n              Object.keys(widths).forEach(function (id) {\r\n                  widths[id] = maxWidth;\r\n              });\r\n              Object.keys(heights).forEach(function (id) {\r\n                  heights[id] = maxHeight;\r\n              });\r\n              margin = (areaLength - maxLength * targetIds.length) / 2;\r\n              if (margin < posMin) {\r\n                  totalLength = 0;\r\n                  step = 0;\r\n                  targetIds.forEach(function (id) {\r\n                      updateValues(id);\r\n                  });\r\n              }\r\n              else {\r\n                  updateValues(id, true);\r\n              }\r\n          }\r\n          else {\r\n              updateValues(id);\r\n          }\r\n      }\r\n      if ($$.isLegendInset) {\r\n          step = config.legend_inset_step\r\n              ? config.legend_inset_step\r\n              : targetIds.length;\r\n          $$.updateLegendStep(step);\r\n      }\r\n      if ($$.isLegendRight) {\r\n          xForLegend = function (id) {\r\n              return maxWidth * steps[id];\r\n          };\r\n          yForLegend = function (id) {\r\n              return margins[steps[id]] + offsets[id];\r\n          };\r\n      }\r\n      else if ($$.isLegendInset) {\r\n          xForLegend = function (id) {\r\n              return maxWidth * steps[id] + 10;\r\n          };\r\n          yForLegend = function (id) {\r\n              return margins[steps[id]] + offsets[id];\r\n          };\r\n      }\r\n      else {\r\n          xForLegend = function (id) {\r\n              return margins[steps[id]] + offsets[id];\r\n          };\r\n          yForLegend = function (id) {\r\n              return maxHeight * steps[id];\r\n          };\r\n      }\r\n      xForLegendText = function (id, i) {\r\n          return xForLegend(id, i) + 4 + config.legend_item_tile_width;\r\n      };\r\n      yForLegendText = function (id, i) {\r\n          return yForLegend(id, i) + 9;\r\n      };\r\n      xForLegendRect = function (id, i) {\r\n          return xForLegend(id, i);\r\n      };\r\n      yForLegendRect = function (id, i) {\r\n          return yForLegend(id, i) - 5;\r\n      };\r\n      x1ForLegendTile = function (id, i) {\r\n          return xForLegend(id, i) - 2;\r\n      };\r\n      x2ForLegendTile = function (id, i) {\r\n          return xForLegend(id, i) - 2 + config.legend_item_tile_width;\r\n      };\r\n      yForLegendTile = function (id, i) {\r\n          return yForLegend(id, i) + 4;\r\n      };\r\n      // Define g for legend area\r\n      l = $$.legend\r\n          .selectAll('.' + CLASS.legendItem)\r\n          .data(targetIds)\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', function (id) {\r\n          return $$.generateClass(CLASS.legendItem, id);\r\n      })\r\n          .style('visibility', function (id) {\r\n          return $$.isLegendToShow(id) ? 'visible' : 'hidden';\r\n      })\r\n          .style('cursor', function () {\r\n          return config.interaction_enabled ? 'pointer' : 'auto';\r\n      })\r\n          .on('click', config.interaction_enabled\r\n          ? function (id) {\r\n              if (config.legend_item_onclick) {\r\n                  config.legend_item_onclick.call($$, id);\r\n              }\r\n              else {\r\n                  if ($$.d3.event.altKey) {\r\n                      $$.api.hide();\r\n                      $$.api.show(id);\r\n                  }\r\n                  else {\r\n                      $$.api.toggle(id);\r\n                      $$.isTargetToShow(id) ? $$.api.focus(id) : $$.api.revert();\r\n                  }\r\n              }\r\n          }\r\n          : null)\r\n          .on('mouseover', config.interaction_enabled\r\n          ? function (id) {\r\n              if (config.legend_item_onmouseover) {\r\n                  config.legend_item_onmouseover.call($$, id);\r\n              }\r\n              else {\r\n                  $$.d3.select(this).classed(CLASS.legendItemFocused, true);\r\n                  if (!$$.transiting && $$.isTargetToShow(id)) {\r\n                      $$.api.focus(id);\r\n                  }\r\n              }\r\n          }\r\n          : null)\r\n          .on('mouseout', config.interaction_enabled\r\n          ? function (id) {\r\n              if (config.legend_item_onmouseout) {\r\n                  config.legend_item_onmouseout.call($$, id);\r\n              }\r\n              else {\r\n                  $$.d3.select(this).classed(CLASS.legendItemFocused, false);\r\n                  $$.api.revert();\r\n              }\r\n          }\r\n          : null);\r\n      l.append('text')\r\n          .text(function (id) {\r\n          return isDefined(config.data_names[id]) ? config.data_names[id] : id;\r\n      })\r\n          .each(function (id, i) {\r\n          updatePositions(this, id, i);\r\n      })\r\n          .style('pointer-events', 'none')\r\n          .attr('x', $$.isLegendRight || $$.isLegendInset ? xForLegendText : -200)\r\n          .attr('y', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendText);\r\n      l.append('rect')\r\n          .attr('class', CLASS.legendItemEvent)\r\n          .style('fill-opacity', 0)\r\n          .attr('x', $$.isLegendRight || $$.isLegendInset ? xForLegendRect : -200)\r\n          .attr('y', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendRect);\r\n      l.append('line')\r\n          .attr('class', CLASS.legendItemTile)\r\n          .style('stroke', $$.color)\r\n          .style('pointer-events', 'none')\r\n          .attr('x1', $$.isLegendRight || $$.isLegendInset ? x1ForLegendTile : -200)\r\n          .attr('y1', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendTile)\r\n          .attr('x2', $$.isLegendRight || $$.isLegendInset ? x2ForLegendTile : -200)\r\n          .attr('y2', $$.isLegendRight || $$.isLegendInset ? -200 : yForLegendTile)\r\n          .attr('stroke-width', config.legend_item_tile_height);\r\n      // Set background for inset legend\r\n      background = $$.legend.select('.' + CLASS.legendBackground + ' rect');\r\n      if ($$.isLegendInset && maxWidth > 0 && background.size() === 0) {\r\n          background = $$.legend\r\n              .insert('g', '.' + CLASS.legendItem)\r\n              .attr('class', CLASS.legendBackground)\r\n              .append('rect');\r\n      }\r\n      texts = $$.legend\r\n          .selectAll('text')\r\n          .data(targetIds)\r\n          .text(function (id) {\r\n          return isDefined(config.data_names[id]) ? config.data_names[id] : id;\r\n      }) // MEMO: needed for update\r\n          .each(function (id, i) {\r\n          updatePositions(this, id, i);\r\n      });\r\n      (withTransition ? texts.transition() : texts)\r\n          .attr('x', xForLegendText)\r\n          .attr('y', yForLegendText);\r\n      rects = $$.legend.selectAll('rect.' + CLASS.legendItemEvent).data(targetIds);\r\n      (withTransition ? rects.transition() : rects)\r\n          .attr('width', function (id) {\r\n          return widths[id];\r\n      })\r\n          .attr('height', function (id) {\r\n          return heights[id];\r\n      })\r\n          .attr('x', xForLegendRect)\r\n          .attr('y', yForLegendRect);\r\n      tiles = $$.legend.selectAll('line.' + CLASS.legendItemTile).data(targetIds);\r\n      (withTransition ? tiles.transition() : tiles)\r\n          .style('stroke', $$.levelColor\r\n          ? function (id) {\r\n              return $$.levelColor($$.cache[id].values.reduce(function (total, item) {\r\n                  return total + item.value;\r\n              }, 0));\r\n          }\r\n          : $$.color)\r\n          .attr('x1', x1ForLegendTile)\r\n          .attr('y1', yForLegendTile)\r\n          .attr('x2', x2ForLegendTile)\r\n          .attr('y2', yForLegendTile);\r\n      if (background) {\r\n          (withTransition ? background.transition() : background)\r\n              .attr('height', $$.getLegendHeight() - 12)\r\n              .attr('width', maxWidth * (step + 1) + 10);\r\n      }\r\n      // toggle legend state\r\n      $$.legend\r\n          .selectAll('.' + CLASS.legendItem)\r\n          .classed(CLASS.legendItemHidden, function (id) {\r\n          return !$$.isTargetToShow(id);\r\n      });\r\n      // Update all to reflect change of legend\r\n      $$.updateLegendItemWidth(maxWidth);\r\n      $$.updateLegendItemHeight(maxHeight);\r\n      $$.updateLegendStep(step);\r\n      // Update size and scale\r\n      $$.updateSizes();\r\n      $$.updateScales();\r\n      $$.updateSvgSize();\r\n      // Update g positions\r\n      $$.transformAll(withTransitionForTransform, transitions);\r\n      $$.legendHasRendered = true;\r\n  };\n\n  ChartInternal.prototype.initRegion = function () {\r\n      var $$ = this;\r\n      $$.region = $$.main\r\n          .append('g')\r\n          .attr('clip-path', $$.clipPath)\r\n          .attr('class', CLASS.regions);\r\n  };\r\n  ChartInternal.prototype.updateRegion = function (duration) {\r\n      var $$ = this, config = $$.config;\r\n      // hide if arc type\r\n      $$.region.style('visibility', $$.hasArcType() ? 'hidden' : 'visible');\r\n      var mainRegion = $$.main\r\n          .select('.' + CLASS.regions)\r\n          .selectAll('.' + CLASS.region)\r\n          .data(config.regions);\r\n      var g = mainRegion.enter().append('g');\r\n      g.append('rect')\r\n          .attr('x', $$.regionX.bind($$))\r\n          .attr('y', $$.regionY.bind($$))\r\n          .attr('width', $$.regionWidth.bind($$))\r\n          .attr('height', $$.regionHeight.bind($$))\r\n          .style('fill-opacity', function (d) {\r\n          return isValue(d.opacity) ? d.opacity : 0.1;\r\n      });\r\n      g.append('text').text($$.labelRegion.bind($$));\r\n      $$.mainRegion = g.merge(mainRegion).attr('class', $$.classRegion.bind($$));\r\n      mainRegion\r\n          .exit()\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n  };\r\n  ChartInternal.prototype.redrawRegion = function (withTransition, transition) {\r\n      var $$ = this, regions = $$.mainRegion, regionLabels = $$.mainRegion.selectAll('text');\r\n      return [\r\n          (withTransition ? regions.transition(transition) : regions)\r\n              .attr('x', $$.regionX.bind($$))\r\n              .attr('y', $$.regionY.bind($$))\r\n              .attr('width', $$.regionWidth.bind($$))\r\n              .attr('height', $$.regionHeight.bind($$))\r\n              .style('fill-opacity', function (d) {\r\n              return isValue(d.opacity) ? d.opacity : 0.1;\r\n          }),\r\n          (withTransition ? regionLabels.transition(transition) : regionLabels)\r\n              .attr('x', $$.labelOffsetX.bind($$))\r\n              .attr('y', $$.labelOffsetY.bind($$))\r\n              .attr('transform', $$.labelTransform.bind($$))\r\n              .attr('style', 'text-anchor: left;')\r\n      ];\r\n  };\r\n  ChartInternal.prototype.regionX = function (d) {\r\n      var $$ = this, config = $$.config, xPos, yScale = d.axis === 'y' ? $$.y : $$.y2;\r\n      if (d.axis === 'y' || d.axis === 'y2') {\r\n          xPos = config.axis_rotated ? ('start' in d ? yScale(d.start) : 0) : 0;\r\n      }\r\n      else {\r\n          xPos = config.axis_rotated\r\n              ? 0\r\n              : 'start' in d\r\n                  ? $$.x($$.isTimeSeries() ? $$.parseDate(d.start) : d.start)\r\n                  : 0;\r\n      }\r\n      return xPos;\r\n  };\r\n  ChartInternal.prototype.regionY = function (d) {\r\n      var $$ = this, config = $$.config, yPos, yScale = d.axis === 'y' ? $$.y : $$.y2;\r\n      if (d.axis === 'y' || d.axis === 'y2') {\r\n          yPos = config.axis_rotated ? 0 : 'end' in d ? yScale(d.end) : 0;\r\n      }\r\n      else {\r\n          yPos = config.axis_rotated\r\n              ? 'start' in d\r\n                  ? $$.x($$.isTimeSeries() ? $$.parseDate(d.start) : d.start)\r\n                  : 0\r\n              : 0;\r\n      }\r\n      return yPos;\r\n  };\r\n  ChartInternal.prototype.regionWidth = function (d) {\r\n      var $$ = this, config = $$.config, start = $$.regionX(d), end, yScale = d.axis === 'y' ? $$.y : $$.y2;\r\n      if (d.axis === 'y' || d.axis === 'y2') {\r\n          end = config.axis_rotated\r\n              ? 'end' in d\r\n                  ? yScale(d.end)\r\n                  : $$.width\r\n              : $$.width;\r\n      }\r\n      else {\r\n          end = config.axis_rotated\r\n              ? $$.width\r\n              : 'end' in d\r\n                  ? $$.x($$.isTimeSeries() ? $$.parseDate(d.end) : d.end)\r\n                  : $$.width;\r\n      }\r\n      return end < start ? 0 : end - start;\r\n  };\r\n  ChartInternal.prototype.regionHeight = function (d) {\r\n      var $$ = this, config = $$.config, start = this.regionY(d), end, yScale = d.axis === 'y' ? $$.y : $$.y2;\r\n      if (d.axis === 'y' || d.axis === 'y2') {\r\n          end = config.axis_rotated\r\n              ? $$.height\r\n              : 'start' in d\r\n                  ? yScale(d.start)\r\n                  : $$.height;\r\n      }\r\n      else {\r\n          end = config.axis_rotated\r\n              ? 'end' in d\r\n                  ? $$.x($$.isTimeSeries() ? $$.parseDate(d.end) : d.end)\r\n                  : $$.height\r\n              : $$.height;\r\n      }\r\n      return end < start ? 0 : end - start;\r\n  };\r\n  ChartInternal.prototype.isRegionOnX = function (d) {\r\n      return !d.axis || d.axis === 'x';\r\n  };\r\n  ChartInternal.prototype.labelRegion = function (d) {\r\n      return 'label' in d ? d.label : '';\r\n  };\r\n  ChartInternal.prototype.labelTransform = function (d) {\r\n      return 'vertical' in d && d.vertical ? 'rotate(90)' : '';\r\n  };\r\n  ChartInternal.prototype.labelOffsetX = function (d) {\r\n      var paddingX = 'paddingX' in d ? d.paddingX : 3;\r\n      var paddingY = 'paddingY' in d ? d.paddingY : 3;\r\n      return 'vertical' in d && d.vertical\r\n          ? this.regionY(d) + paddingY\r\n          : this.regionX(d) + paddingX;\r\n  };\r\n  ChartInternal.prototype.labelOffsetY = function (d) {\r\n      var paddingX = 'paddingX' in d ? d.paddingX : 3;\r\n      var paddingY = 'paddingY' in d ? d.paddingY : 3;\r\n      return 'vertical' in d && d.vertical\r\n          ? -(this.regionX(d) + paddingX)\r\n          : this.regionY(d) + 10 + paddingY;\r\n  };\n\n  function c3LogScale(d3, linearScale, logScale) {\r\n      var PROJECTION = [0.01, 10];\r\n      if (!linearScale) {\r\n          linearScale = d3.scaleLinear();\r\n          linearScale.range(PROJECTION);\r\n      }\r\n      if (!logScale) {\r\n          logScale = d3.scaleLog();\r\n          logScale.domain(PROJECTION);\r\n          logScale.nice();\r\n      }\r\n      // copied from https://github.com/compute-io/logspace\r\n      function logspace(a, b, len) {\r\n          var arr, end, tmp, d;\r\n          if (arguments.length < 3) {\r\n              len = 10;\r\n          }\r\n          else {\r\n              if (len === 0) {\r\n                  return [];\r\n              }\r\n          }\r\n          // Calculate the increment:\r\n          end = len - 1;\r\n          d = (b - a) / end;\r\n          // Build the output array...\r\n          arr = new Array(len);\r\n          tmp = a;\r\n          arr[0] = Math.pow(10, tmp);\r\n          for (var i = 1; i < end; i++) {\r\n              tmp += d;\r\n              arr[i] = Math.pow(10, tmp);\r\n          }\r\n          arr[end] = Math.pow(10, b);\r\n          return arr;\r\n      }\r\n      function scale(x) {\r\n          return logScale(linearScale(x));\r\n      }\r\n      scale.domain = function (x) {\r\n          if (!arguments.length) {\r\n              return linearScale.domain();\r\n          }\r\n          linearScale.domain(x);\r\n          return scale;\r\n      };\r\n      scale.range = function (x) {\r\n          if (!arguments.length) {\r\n              return logScale.range();\r\n          }\r\n          logScale.range(x);\r\n          return scale;\r\n      };\r\n      scale.ticks = function (m) {\r\n          return logspace(-2, 1, m || 10).map(function (v) {\r\n              return linearScale.invert(v);\r\n          });\r\n      };\r\n      scale.copy = function () {\r\n          return c3LogScale(d3, linearScale.copy(), logScale.copy());\r\n      };\r\n      return scale;\r\n  }\r\n  ChartInternal.prototype.getScale = function (min, max, forTimeseries) {\r\n      return (forTimeseries ? this.d3.scaleTime() : this.d3.scaleLinear()).range([\r\n          min,\r\n          max\r\n      ]);\r\n  };\r\n  ChartInternal.prototype.getX = function (min, max, domain, offset) {\r\n      var $$ = this, scale = $$.getScale(min, max, $$.isTimeSeries()), _scale = domain ? scale.domain(domain) : scale, key;\r\n      // Define customized scale if categorized axis\r\n      if ($$.isCategorized()) {\r\n          offset =\r\n              offset ||\r\n                  function () {\r\n                      return 0;\r\n                  };\r\n          scale = function (d, raw) {\r\n              var v = _scale(d) + offset(d);\r\n              return raw ? v : Math.ceil(v);\r\n          };\r\n      }\r\n      else {\r\n          scale = function (d, raw) {\r\n              var v = _scale(d);\r\n              return raw ? v : Math.ceil(v);\r\n          };\r\n      }\r\n      // define functions\r\n      for (key in _scale) {\r\n          scale[key] = _scale[key];\r\n      }\r\n      scale.orgDomain = function () {\r\n          return _scale.domain();\r\n      };\r\n      // define custom domain() for categorized axis\r\n      if ($$.isCategorized()) {\r\n          scale.domain = function (domain) {\r\n              if (!arguments.length) {\r\n                  domain = this.orgDomain();\r\n                  return [domain[0], domain[1] + 1];\r\n              }\r\n              _scale.domain(domain);\r\n              return scale;\r\n          };\r\n      }\r\n      return scale;\r\n  };\r\n  /**\r\n   * Creates and configures a D3 scale instance for the given type.\r\n   *\r\n   * By defaults it returns a Linear scale.\r\n   *\r\n   * @param {String} type Type of d3-scale to create. Type can be 'linear', 'time', 'timeseries' or 'log'.\r\n   * @param {Array} domain The scale domain such as [from, to]\r\n   * @param {Array} range The scale's range such as [from, to]\r\n   *\r\n   * @return A d3-scale instance\r\n   */\r\n  ChartInternal.prototype.getY = function (type, domain, range) {\r\n      var scale;\r\n      if (type === 'timeseries' || type === 'time') {\r\n          scale = this.d3.scaleTime();\r\n      }\r\n      else if (type === 'log') {\r\n          scale = c3LogScale(this.d3);\r\n      }\r\n      else if (type === 'linear' || type === undefined) {\r\n          scale = this.d3.scaleLinear();\r\n      }\r\n      else {\r\n          throw new Error(\"Invalid Y axis type: \\\"\" + type + \"\\\"\");\r\n      }\r\n      if (domain) {\r\n          scale.domain(domain);\r\n      }\r\n      if (range) {\r\n          scale.range(range);\r\n      }\r\n      return scale;\r\n  };\r\n  ChartInternal.prototype.getYScale = function (id) {\r\n      return this.axis.getId(id) === 'y2' ? this.y2 : this.y;\r\n  };\r\n  ChartInternal.prototype.getSubYScale = function (id) {\r\n      return this.axis.getId(id) === 'y2' ? this.subY2 : this.subY;\r\n  };\r\n  ChartInternal.prototype.updateScales = function () {\r\n      var $$ = this, config = $$.config, forInit = !$$.x;\r\n      // update edges\r\n      $$.xMin = config.axis_rotated ? 1 : 0;\r\n      $$.xMax = config.axis_rotated ? $$.height : $$.width;\r\n      $$.yMin = config.axis_rotated ? 0 : $$.height;\r\n      $$.yMax = config.axis_rotated ? $$.width : 1;\r\n      $$.subXMin = $$.xMin;\r\n      $$.subXMax = $$.xMax;\r\n      $$.subYMin = config.axis_rotated ? 0 : $$.height2;\r\n      $$.subYMax = config.axis_rotated ? $$.width2 : 1;\r\n      // update scales\r\n      $$.x = $$.getX($$.xMin, $$.xMax, forInit ? undefined : $$.x.orgDomain(), function () {\r\n          return $$.xAxis.tickOffset();\r\n      });\r\n      $$.y = $$.getY(config.axis_y_type, forInit ? config.axis_y_default : $$.y.domain(), [$$.yMin, $$.yMax]);\r\n      $$.y2 = $$.getY(config.axis_y2_type, forInit ? config.axis_y2_default : $$.y2.domain(), [$$.yMin, $$.yMax]);\r\n      $$.subX = $$.getX($$.xMin, $$.xMax, $$.orgXDomain, function (d) {\r\n          return d % 1 ? 0 : $$.subXAxis.tickOffset();\r\n      });\r\n      $$.subY = $$.getY(config.axis_y_type, forInit ? config.axis_y_default : $$.subY.domain(), [$$.subYMin, $$.subYMax]);\r\n      $$.subY2 = $$.getY(config.axis_y2_type, forInit ? config.axis_y2_default : $$.subY2.domain(), [$$.subYMin, $$.subYMax]);\r\n      // update axes\r\n      $$.xAxisTickFormat = $$.axis.getXAxisTickFormat();\r\n      $$.xAxisTickValues = $$.axis.getXAxisTickValues();\r\n      $$.yAxisTickValues = $$.axis.getYAxisTickValues();\r\n      $$.y2AxisTickValues = $$.axis.getY2AxisTickValues();\r\n      $$.xAxis = $$.axis.getXAxis($$.x, $$.xOrient, $$.xAxisTickFormat, $$.xAxisTickValues, config.axis_x_tick_outer);\r\n      $$.subXAxis = $$.axis.getXAxis($$.subX, $$.subXOrient, $$.xAxisTickFormat, $$.xAxisTickValues, config.axis_x_tick_outer);\r\n      $$.yAxis = $$.axis.getYAxis('y', $$.y, $$.yOrient, $$.yAxisTickValues, config.axis_y_tick_outer);\r\n      $$.y2Axis = $$.axis.getYAxis('y2', $$.y2, $$.y2Orient, $$.y2AxisTickValues, config.axis_y2_tick_outer);\r\n      // Set initialized scales to brush and zoom\r\n      if (!forInit) {\r\n          if ($$.brush) {\r\n              $$.brush.updateScale($$.subX);\r\n          }\r\n      }\r\n      // update for arc\r\n      if ($$.updateArc) {\r\n          $$.updateArc();\r\n      }\r\n  };\n\n  ChartInternal.prototype.selectPoint = function (target, d, i) {\r\n      var $$ = this, config = $$.config, cx = (config.axis_rotated ? $$.circleY : $$.circleX).bind($$), cy = (config.axis_rotated ? $$.circleX : $$.circleY).bind($$), r = $$.pointSelectR.bind($$);\r\n      config.data_onselected.call($$.api, d, target.node());\r\n      // add selected-circle on low layer g\r\n      $$.main\r\n          .select('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(d.id))\r\n          .selectAll('.' + CLASS.selectedCircle + '-' + i)\r\n          .data([d])\r\n          .enter()\r\n          .append('circle')\r\n          .attr('class', function () {\r\n          return $$.generateClass(CLASS.selectedCircle, i);\r\n      })\r\n          .attr('cx', cx)\r\n          .attr('cy', cy)\r\n          .attr('stroke', function () {\r\n          return $$.color(d);\r\n      })\r\n          .attr('r', function (d) {\r\n          return $$.pointSelectR(d) * 1.4;\r\n      })\r\n          .transition()\r\n          .duration(100)\r\n          .attr('r', r);\r\n  };\r\n  ChartInternal.prototype.unselectPoint = function (target, d, i) {\r\n      var $$ = this;\r\n      $$.config.data_onunselected.call($$.api, d, target.node());\r\n      // remove selected-circle from low layer g\r\n      $$.main\r\n          .select('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(d.id))\r\n          .selectAll('.' + CLASS.selectedCircle + '-' + i)\r\n          .transition()\r\n          .duration(100)\r\n          .attr('r', 0)\r\n          .remove();\r\n  };\r\n  ChartInternal.prototype.togglePoint = function (selected, target, d, i) {\r\n      selected ? this.selectPoint(target, d, i) : this.unselectPoint(target, d, i);\r\n  };\r\n  ChartInternal.prototype.selectPath = function (target, d) {\r\n      var $$ = this;\r\n      $$.config.data_onselected.call($$, d, target.node());\r\n      if ($$.config.interaction_brighten) {\r\n          target\r\n              .transition()\r\n              .duration(100)\r\n              .style('fill', function () {\r\n              return $$.d3.rgb($$.color(d)).brighter(0.75);\r\n          });\r\n      }\r\n  };\r\n  ChartInternal.prototype.unselectPath = function (target, d) {\r\n      var $$ = this;\r\n      $$.config.data_onunselected.call($$, d, target.node());\r\n      if ($$.config.interaction_brighten) {\r\n          target\r\n              .transition()\r\n              .duration(100)\r\n              .style('fill', function () {\r\n              return $$.color(d);\r\n          });\r\n      }\r\n  };\r\n  ChartInternal.prototype.togglePath = function (selected, target, d, i) {\r\n      selected ? this.selectPath(target, d, i) : this.unselectPath(target, d, i);\r\n  };\r\n  ChartInternal.prototype.getToggle = function (that, d) {\r\n      var $$ = this, toggle;\r\n      if (that.nodeName === 'circle') {\r\n          if ($$.isStepType(d)) {\r\n              // circle is hidden in step chart, so treat as within the click area\r\n              toggle = function () { }; // TODO: how to select step chart?\r\n          }\r\n          else {\r\n              toggle = $$.togglePoint;\r\n          }\r\n      }\r\n      else if (that.nodeName === 'path') {\r\n          toggle = $$.togglePath;\r\n      }\r\n      return toggle;\r\n  };\r\n  ChartInternal.prototype.toggleShape = function (that, d, i) {\r\n      var $$ = this, d3 = $$.d3, config = $$.config, shape = d3.select(that), isSelected = shape.classed(CLASS.SELECTED), toggle = $$.getToggle(that, d).bind($$);\r\n      if (config.data_selection_enabled && config.data_selection_isselectable(d)) {\r\n          if (!config.data_selection_multiple) {\r\n              $$.main\r\n                  .selectAll('.' +\r\n                  CLASS.shapes +\r\n                  (config.data_selection_grouped\r\n                      ? $$.getTargetSelectorSuffix(d.id)\r\n                      : ''))\r\n                  .selectAll('.' + CLASS.shape)\r\n                  .each(function (d, i) {\r\n                  var shape = d3.select(this);\r\n                  if (shape.classed(CLASS.SELECTED)) {\r\n                      toggle(false, shape.classed(CLASS.SELECTED, false), d, i);\r\n                  }\r\n              });\r\n          }\r\n          shape.classed(CLASS.SELECTED, !isSelected);\r\n          toggle(!isSelected, shape, d, i);\r\n      }\r\n  };\n\n  ChartInternal.prototype.initBar = function () {\r\n      var $$ = this;\r\n      $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.chartBars);\r\n  };\r\n  ChartInternal.prototype.updateTargetsForBar = function (targets) {\r\n      var $$ = this, config = $$.config, mainBars, mainBarEnter, classChartBar = $$.classChartBar.bind($$), classBars = $$.classBars.bind($$), classFocus = $$.classFocus.bind($$);\r\n      mainBars = $$.main\r\n          .select('.' + CLASS.chartBars)\r\n          .selectAll('.' + CLASS.chartBar)\r\n          .data(targets)\r\n          .attr('class', function (d) {\r\n          return classChartBar(d) + classFocus(d);\r\n      });\r\n      mainBarEnter = mainBars\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', classChartBar)\r\n          .style('pointer-events', 'none');\r\n      // Bars for each data\r\n      mainBarEnter\r\n          .append('g')\r\n          .attr('class', classBars)\r\n          .style('cursor', function (d) {\r\n          return config.data_selection_isselectable(d) ? 'pointer' : null;\r\n      });\r\n  };\r\n  ChartInternal.prototype.updateBar = function (durationForExit) {\r\n      var $$ = this, barData = $$.barData.bind($$), classBar = $$.classBar.bind($$), initialOpacity = $$.initialOpacity.bind($$), color = function (d) {\r\n          return $$.color(d.id);\r\n      };\r\n      var mainBar = $$.main\r\n          .selectAll('.' + CLASS.bars)\r\n          .selectAll('.' + CLASS.bar)\r\n          .data(barData);\r\n      var mainBarEnter = mainBar\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', classBar)\r\n          .style('stroke', color)\r\n          .style('fill', color);\r\n      $$.mainBar = mainBarEnter.merge(mainBar).style('opacity', initialOpacity);\r\n      mainBar\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0);\r\n  };\r\n  ChartInternal.prototype.redrawBar = function (drawBar, withTransition, transition) {\r\n      var $$ = this;\r\n      return [\r\n          (withTransition ? this.mainBar.transition(transition) : this.mainBar)\r\n              .attr('d', drawBar)\r\n              .style('stroke', this.color)\r\n              .style('fill', this.color)\r\n              .style('opacity', function (d) { return ($$.isTargetToShow(d.id) ? 1 : 0); })\r\n      ];\r\n  };\r\n  ChartInternal.prototype.getBarW = function (axis, barTargetsNum) {\r\n      var $$ = this, config = $$.config, w = typeof config.bar_width === 'number'\r\n          ? config.bar_width\r\n          : barTargetsNum\r\n              ? (axis.tickInterval() * config.bar_width_ratio) / barTargetsNum\r\n              : 0;\r\n      return config.bar_width_max && w > config.bar_width_max\r\n          ? config.bar_width_max\r\n          : w;\r\n  };\r\n  ChartInternal.prototype.getBars = function (i, id) {\r\n      var $$ = this;\r\n      return (id\r\n          ? $$.main.selectAll('.' + CLASS.bars + $$.getTargetSelectorSuffix(id))\r\n          : $$.main).selectAll('.' + CLASS.bar + (isValue(i) ? '-' + i : ''));\r\n  };\r\n  ChartInternal.prototype.expandBars = function (i, id, reset) {\r\n      var $$ = this;\r\n      if (reset) {\r\n          $$.unexpandBars();\r\n      }\r\n      $$.getBars(i, id).classed(CLASS.EXPANDED, true);\r\n  };\r\n  ChartInternal.prototype.unexpandBars = function (i) {\r\n      var $$ = this;\r\n      $$.getBars(i).classed(CLASS.EXPANDED, false);\r\n  };\r\n  ChartInternal.prototype.generateDrawBar = function (barIndices, isSub) {\r\n      var $$ = this, config = $$.config, getPoints = $$.generateGetBarPoints(barIndices, isSub);\r\n      return function (d, i) {\r\n          // 4 points that make a bar\r\n          var points = getPoints(d, i);\r\n          // switch points if axis is rotated, not applicable for sub chart\r\n          var indexX = config.axis_rotated ? 1 : 0;\r\n          var indexY = config.axis_rotated ? 0 : 1;\r\n          var path = 'M ' +\r\n              points[0][indexX] +\r\n              ',' +\r\n              points[0][indexY] +\r\n              ' ' +\r\n              'L' +\r\n              points[1][indexX] +\r\n              ',' +\r\n              points[1][indexY] +\r\n              ' ' +\r\n              'L' +\r\n              points[2][indexX] +\r\n              ',' +\r\n              points[2][indexY] +\r\n              ' ' +\r\n              'L' +\r\n              points[3][indexX] +\r\n              ',' +\r\n              points[3][indexY] +\r\n              ' ' +\r\n              'z';\r\n          return path;\r\n      };\r\n  };\r\n  ChartInternal.prototype.generateGetBarPoints = function (barIndices, isSub) {\r\n      var $$ = this, axis = isSub ? $$.subXAxis : $$.xAxis, barTargetsNum = barIndices.__max__ + 1, barW = $$.getBarW(axis, barTargetsNum), barX = $$.getShapeX(barW, barTargetsNum, barIndices, !!isSub), barY = $$.getShapeY(!!isSub), barOffset = $$.getShapeOffset($$.isBarType, barIndices, !!isSub), barSpaceOffset = barW * ($$.config.bar_space / 2), yScale = isSub ? $$.getSubYScale : $$.getYScale;\r\n      return function (d, i) {\r\n          var y0 = yScale.call($$, d.id)(0), offset = barOffset(d, i) || y0, // offset is for stacked bar chart\r\n          posX = barX(d), posY = barY(d);\r\n          // fix posY not to overflow opposite quadrant\r\n          if ($$.config.axis_rotated) {\r\n              if ((0 < d.value && posY < y0) || (d.value < 0 && y0 < posY)) {\r\n                  posY = y0;\r\n              }\r\n          }\r\n          posY -= y0 - offset;\r\n          // 4 points that make a bar\r\n          return [\r\n              [posX + barSpaceOffset, offset],\r\n              [posX + barSpaceOffset, posY],\r\n              [posX + barW - barSpaceOffset, posY],\r\n              [posX + barW - barSpaceOffset, offset]\r\n          ];\r\n      };\r\n  };\r\n  /**\r\n   * Returns whether the data point is within the given bar shape.\r\n   *\r\n   * @param mouse\r\n   * @param barShape\r\n   * @return {boolean}\r\n   */\r\n  ChartInternal.prototype.isWithinBar = function (mouse, barShape) {\r\n      return isWithinBox(mouse, getBBox(barShape), 2);\r\n  };\n\n  ChartInternal.prototype.getShapeIndices = function (typeFilter) {\r\n      var $$ = this, config = $$.config, indices = {}, i = 0, j, k;\r\n      $$.filterTargetsToShow($$.data.targets.filter(typeFilter, $$)).forEach(function (d) {\r\n          for (j = 0; j < config.data_groups.length; j++) {\r\n              if (config.data_groups[j].indexOf(d.id) < 0) {\r\n                  continue;\r\n              }\r\n              for (k = 0; k < config.data_groups[j].length; k++) {\r\n                  if (config.data_groups[j][k] in indices) {\r\n                      indices[d.id] = indices[config.data_groups[j][k]];\r\n                      break;\r\n                  }\r\n              }\r\n          }\r\n          if (isUndefined(indices[d.id])) {\r\n              indices[d.id] = i++;\r\n          }\r\n      });\r\n      indices.__max__ = i - 1;\r\n      return indices;\r\n  };\r\n  ChartInternal.prototype.getShapeX = function (offset, targetsNum, indices, isSub) {\r\n      var $$ = this, scale = isSub ? $$.subX : $$.x;\r\n      return function (d) {\r\n          var index = d.id in indices ? indices[d.id] : 0;\r\n          return d.x || d.x === 0 ? scale(d.x) - offset * (targetsNum / 2 - index) : 0;\r\n      };\r\n  };\r\n  ChartInternal.prototype.getShapeY = function (isSub) {\r\n      var $$ = this;\r\n      return function (d) {\r\n          var scale = isSub ? $$.getSubYScale(d.id) : $$.getYScale(d.id);\r\n          return scale($$.isTargetNormalized(d.id) ? $$.getRatio('index', d, true) : d.value);\r\n      };\r\n  };\r\n  ChartInternal.prototype.getShapeOffset = function (typeFilter, indices, isSub) {\r\n      var $$ = this, targets = $$.orderTargets($$.filterTargetsToShow($$.data.targets.filter(typeFilter, $$))), targetIds = targets.map(function (t) {\r\n          return t.id;\r\n      });\r\n      return function (d, i) {\r\n          var scale = isSub ? $$.getSubYScale(d.id) : $$.getYScale(d.id), y0 = scale(0), offset = y0;\r\n          targets.forEach(function (t) {\r\n              var rowValues = $$.isStepType(d)\r\n                  ? $$.convertValuesToStep(t.values)\r\n                  : t.values;\r\n              var isTargetNormalized = $$.isTargetNormalized(d.id);\r\n              var values = rowValues.map(function (v) {\r\n                  return isTargetNormalized ? $$.getRatio('index', v, true) : v.value;\r\n              });\r\n              if (t.id === d.id || indices[t.id] !== indices[d.id]) {\r\n                  return;\r\n              }\r\n              if (targetIds.indexOf(t.id) < targetIds.indexOf(d.id)) {\r\n                  // check if the x values line up\r\n                  if (isUndefined(rowValues[i]) || +rowValues[i].x !== +d.x) {\r\n                      // \"+\" for timeseries\r\n                      // if not, try to find the value that does line up\r\n                      i = -1;\r\n                      rowValues.forEach(function (v, j) {\r\n                          var x1 = v.x.constructor === Date ? +v.x : v.x;\r\n                          var x2 = d.x.constructor === Date ? +d.x : d.x;\r\n                          if (x1 === x2) {\r\n                              i = j;\r\n                          }\r\n                      });\r\n                  }\r\n                  if (i in rowValues && rowValues[i].value * d.value >= 0) {\r\n                      offset += scale(values[i]) - y0;\r\n                  }\r\n              }\r\n          });\r\n          return offset;\r\n      };\r\n  };\r\n  ChartInternal.prototype.isWithinShape = function (that, d) {\r\n      var $$ = this, shape = $$.d3.select(that), isWithin;\r\n      if (!$$.isTargetToShow(d.id)) {\r\n          isWithin = false;\r\n      }\r\n      else if (that.nodeName === 'circle') {\r\n          isWithin = $$.isStepType(d)\r\n              ? $$.isWithinStep(that, $$.getYScale(d.id)(d.value))\r\n              : $$.isWithinCircle(that, $$.pointSelectR(d) * 1.5);\r\n      }\r\n      else if (that.nodeName === 'path') {\r\n          isWithin = shape.classed(CLASS.bar)\r\n              ? $$.isWithinBar($$.d3.mouse(that), that)\r\n              : true;\r\n      }\r\n      return isWithin;\r\n  };\r\n  ChartInternal.prototype.getInterpolate = function (d) {\r\n      var $$ = this, d3 = $$.d3, types = {\r\n          linear: d3.curveLinear,\r\n          'linear-closed': d3.curveLinearClosed,\r\n          basis: d3.curveBasis,\r\n          'basis-open': d3.curveBasisOpen,\r\n          'basis-closed': d3.curveBasisClosed,\r\n          bundle: d3.curveBundle,\r\n          cardinal: d3.curveCardinal,\r\n          'cardinal-open': d3.curveCardinalOpen,\r\n          'cardinal-closed': d3.curveCardinalClosed,\r\n          monotone: d3.curveMonotoneX,\r\n          step: d3.curveStep,\r\n          'step-before': d3.curveStepBefore,\r\n          'step-after': d3.curveStepAfter\r\n      }, type;\r\n      if ($$.isSplineType(d)) {\r\n          type = types[$$.config.spline_interpolation_type] || types.cardinal;\r\n      }\r\n      else if ($$.isStepType(d)) {\r\n          type = types[$$.config.line_step_type];\r\n      }\r\n      else {\r\n          type = types.linear;\r\n      }\r\n      return type;\r\n  };\n\n  ChartInternal.prototype.initLine = function () {\r\n      var $$ = this;\r\n      $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.chartLines);\r\n  };\r\n  ChartInternal.prototype.updateTargetsForLine = function (targets) {\r\n      var $$ = this, config = $$.config, mainLines, mainLineEnter, classChartLine = $$.classChartLine.bind($$), classLines = $$.classLines.bind($$), classAreas = $$.classAreas.bind($$), classCircles = $$.classCircles.bind($$), classFocus = $$.classFocus.bind($$);\r\n      mainLines = $$.main\r\n          .select('.' + CLASS.chartLines)\r\n          .selectAll('.' + CLASS.chartLine)\r\n          .data(targets)\r\n          .attr('class', function (d) {\r\n          return classChartLine(d) + classFocus(d);\r\n      });\r\n      mainLineEnter = mainLines\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', classChartLine)\r\n          .style('opacity', 0)\r\n          .style('pointer-events', 'none');\r\n      // Lines for each data\r\n      mainLineEnter.append('g').attr('class', classLines);\r\n      // Areas\r\n      mainLineEnter.append('g').attr('class', classAreas);\r\n      // Circles for each data point on lines\r\n      mainLineEnter.append('g').attr('class', function (d) {\r\n          return $$.generateClass(CLASS.selectedCircles, d.id);\r\n      });\r\n      mainLineEnter\r\n          .append('g')\r\n          .attr('class', classCircles)\r\n          .style('cursor', function (d) {\r\n          return config.data_selection_isselectable(d) ? 'pointer' : null;\r\n      });\r\n      // Update date for selected circles\r\n      targets.forEach(function (t) {\r\n          $$.main\r\n              .selectAll('.' + CLASS.selectedCircles + $$.getTargetSelectorSuffix(t.id))\r\n              .selectAll('.' + CLASS.selectedCircle)\r\n              .each(function (d) {\r\n              d.value = t.values[d.index].value;\r\n          });\r\n      });\r\n      // MEMO: can not keep same color...\r\n      //mainLineUpdate.exit().remove();\r\n  };\r\n  ChartInternal.prototype.updateLine = function (durationForExit) {\r\n      var $$ = this;\r\n      var mainLine = $$.main\r\n          .selectAll('.' + CLASS.lines)\r\n          .selectAll('.' + CLASS.line)\r\n          .data($$.lineData.bind($$));\r\n      var mainLineEnter = mainLine\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', $$.classLine.bind($$))\r\n          .style('stroke', $$.color);\r\n      $$.mainLine = mainLineEnter\r\n          .merge(mainLine)\r\n          .style('opacity', $$.initialOpacity.bind($$))\r\n          .style('shape-rendering', function (d) {\r\n          return $$.isStepType(d) ? 'crispEdges' : '';\r\n      })\r\n          .attr('transform', null);\r\n      mainLine\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0);\r\n  };\r\n  ChartInternal.prototype.redrawLine = function (drawLine, withTransition, transition) {\r\n      return [\r\n          (withTransition ? this.mainLine.transition(transition) : this.mainLine)\r\n              .attr('d', drawLine)\r\n              .style('stroke', this.color)\r\n              .style('opacity', 1)\r\n      ];\r\n  };\r\n  ChartInternal.prototype.generateDrawLine = function (lineIndices, isSub) {\r\n      var $$ = this, config = $$.config, line = $$.d3.line(), getPoints = $$.generateGetLinePoints(lineIndices, isSub), yScaleGetter = isSub ? $$.getSubYScale : $$.getYScale, xValue = function (d) {\r\n          return (isSub ? $$.subxx : $$.xx).call($$, d);\r\n      }, yValue = function (d, i) {\r\n          return config.data_groups.length > 0\r\n              ? getPoints(d, i)[0][1]\r\n              : yScaleGetter.call($$, d.id)(d.value);\r\n      };\r\n      line = config.axis_rotated\r\n          ? line.x(yValue).y(xValue)\r\n          : line.x(xValue).y(yValue);\r\n      if (!config.line_connectNull) {\r\n          line = line.defined(function (d) {\r\n              return d.value != null;\r\n          });\r\n      }\r\n      return function (d) {\r\n          var values = config.line_connectNull\r\n              ? $$.filterRemoveNull(d.values)\r\n              : d.values, x = isSub ? $$.subX : $$.x, y = yScaleGetter.call($$, d.id), x0 = 0, y0 = 0, path;\r\n          if ($$.isLineType(d)) {\r\n              if (config.data_regions[d.id]) {\r\n                  path = $$.lineWithRegions(values, x, y, config.data_regions[d.id]);\r\n              }\r\n              else {\r\n                  if ($$.isStepType(d)) {\r\n                      values = $$.convertValuesToStep(values);\r\n                  }\r\n                  path = line.curve($$.getInterpolate(d))(values);\r\n              }\r\n          }\r\n          else {\r\n              if (values[0]) {\r\n                  x0 = x(values[0].x);\r\n                  y0 = y(values[0].value);\r\n              }\r\n              path = config.axis_rotated ? 'M ' + y0 + ' ' + x0 : 'M ' + x0 + ' ' + y0;\r\n          }\r\n          return path ? path : 'M 0 0';\r\n      };\r\n  };\r\n  ChartInternal.prototype.generateGetLinePoints = function (lineIndices, isSub) {\r\n      // partial duplication of generateGetBarPoints\r\n      var $$ = this, config = $$.config, lineTargetsNum = lineIndices.__max__ + 1, x = $$.getShapeX(0, lineTargetsNum, lineIndices, !!isSub), y = $$.getShapeY(!!isSub), lineOffset = $$.getShapeOffset($$.isLineType, lineIndices, !!isSub), yScale = isSub ? $$.getSubYScale : $$.getYScale;\r\n      return function (d, i) {\r\n          var y0 = yScale.call($$, d.id)(0), offset = lineOffset(d, i) || y0, // offset is for stacked area chart\r\n          posX = x(d), posY = y(d);\r\n          // fix posY not to overflow opposite quadrant\r\n          if (config.axis_rotated) {\r\n              if ((0 < d.value && posY < y0) || (d.value < 0 && y0 < posY)) {\r\n                  posY = y0;\r\n              }\r\n          }\r\n          // 1 point that marks the line position\r\n          return [\r\n              [posX, posY - (y0 - offset)],\r\n              [posX, posY - (y0 - offset)],\r\n              [posX, posY - (y0 - offset)],\r\n              [posX, posY - (y0 - offset)] // needed for compatibility\r\n          ];\r\n      };\r\n  };\r\n  ChartInternal.prototype.lineWithRegions = function (d, x, y, _regions) {\r\n      var $$ = this, config = $$.config, prev = -1, i, j, s = 'M', sWithRegion, xp, yp, dx, dy, dd, diff, diffx2, xOffset = $$.isCategorized() ? 0.5 : 0, xValue, yValue, regions = [];\r\n      function isWithinRegions(x, regions) {\r\n          var i;\r\n          for (i = 0; i < regions.length; i++) {\r\n              if (regions[i].start < x && x <= regions[i].end) {\r\n                  return true;\r\n              }\r\n          }\r\n          return false;\r\n      }\r\n      // Check start/end of regions\r\n      if (isDefined(_regions)) {\r\n          for (i = 0; i < _regions.length; i++) {\r\n              regions[i] = {};\r\n              if (isUndefined(_regions[i].start)) {\r\n                  regions[i].start = d[0].x;\r\n              }\r\n              else {\r\n                  regions[i].start = $$.isTimeSeries()\r\n                      ? $$.parseDate(_regions[i].start)\r\n                      : _regions[i].start;\r\n              }\r\n              if (isUndefined(_regions[i].end)) {\r\n                  regions[i].end = d[d.length - 1].x;\r\n              }\r\n              else {\r\n                  regions[i].end = $$.isTimeSeries()\r\n                      ? $$.parseDate(_regions[i].end)\r\n                      : _regions[i].end;\r\n              }\r\n          }\r\n      }\r\n      // Set scales\r\n      xValue = config.axis_rotated\r\n          ? function (d) {\r\n              return y(d.value);\r\n          }\r\n          : function (d) {\r\n              return x(d.x);\r\n          };\r\n      yValue = config.axis_rotated\r\n          ? function (d) {\r\n              return x(d.x);\r\n          }\r\n          : function (d) {\r\n              return y(d.value);\r\n          };\r\n      // Define svg generator function for region\r\n      function generateM(points) {\r\n          return ('M' +\r\n              points[0][0] +\r\n              ' ' +\r\n              points[0][1] +\r\n              ' ' +\r\n              points[1][0] +\r\n              ' ' +\r\n              points[1][1]);\r\n      }\r\n      if ($$.isTimeSeries()) {\r\n          sWithRegion = function (d0, d1, j, diff) {\r\n              var x0 = d0.x.getTime(), x_diff = d1.x - d0.x, xv0 = new Date(x0 + x_diff * j), xv1 = new Date(x0 + x_diff * (j + diff)), points;\r\n              if (config.axis_rotated) {\r\n                  points = [\r\n                      [y(yp(j)), x(xv0)],\r\n                      [y(yp(j + diff)), x(xv1)]\r\n                  ];\r\n              }\r\n              else {\r\n                  points = [\r\n                      [x(xv0), y(yp(j))],\r\n                      [x(xv1), y(yp(j + diff))]\r\n                  ];\r\n              }\r\n              return generateM(points);\r\n          };\r\n      }\r\n      else {\r\n          sWithRegion = function (d0, d1, j, diff) {\r\n              var points;\r\n              if (config.axis_rotated) {\r\n                  points = [\r\n                      [y(yp(j), true), x(xp(j))],\r\n                      [y(yp(j + diff), true), x(xp(j + diff))]\r\n                  ];\r\n              }\r\n              else {\r\n                  points = [\r\n                      [x(xp(j), true), y(yp(j))],\r\n                      [x(xp(j + diff), true), y(yp(j + diff))]\r\n                  ];\r\n              }\r\n              return generateM(points);\r\n          };\r\n      }\r\n      // Generate\r\n      for (i = 0; i < d.length; i++) {\r\n          // Draw as normal\r\n          if (isUndefined(regions) || !isWithinRegions(d[i].x, regions)) {\r\n              s += ' ' + xValue(d[i]) + ' ' + yValue(d[i]);\r\n          }\r\n          // Draw with region // TODO: Fix for horizotal charts\r\n          else {\r\n              xp = $$.getScale(d[i - 1].x + xOffset, d[i].x + xOffset, $$.isTimeSeries());\r\n              yp = $$.getScale(d[i - 1].value, d[i].value);\r\n              dx = x(d[i].x) - x(d[i - 1].x);\r\n              dy = y(d[i].value) - y(d[i - 1].value);\r\n              dd = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2));\r\n              diff = 2 / dd;\r\n              diffx2 = diff * 2;\r\n              for (j = diff; j <= 1; j += diffx2) {\r\n                  s += sWithRegion(d[i - 1], d[i], j, diff);\r\n              }\r\n          }\r\n          prev = d[i].x;\r\n      }\r\n      return s;\r\n  };\r\n  ChartInternal.prototype.updateArea = function (durationForExit) {\r\n      var $$ = this, d3 = $$.d3;\r\n      var mainArea = $$.main\r\n          .selectAll('.' + CLASS.areas)\r\n          .selectAll('.' + CLASS.area)\r\n          .data($$.lineData.bind($$));\r\n      var mainAreaEnter = mainArea\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', $$.classArea.bind($$))\r\n          .style('fill', $$.color)\r\n          .style('opacity', function () {\r\n          $$.orgAreaOpacity = +d3.select(this).style('opacity');\r\n          return 0;\r\n      });\r\n      $$.mainArea = mainAreaEnter\r\n          .merge(mainArea)\r\n          .style('opacity', $$.orgAreaOpacity);\r\n      mainArea\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0);\r\n  };\r\n  ChartInternal.prototype.redrawArea = function (drawArea, withTransition, transition) {\r\n      return [\r\n          (withTransition ? this.mainArea.transition(transition) : this.mainArea)\r\n              .attr('d', drawArea)\r\n              .style('fill', this.color)\r\n              .style('opacity', this.orgAreaOpacity)\r\n      ];\r\n  };\r\n  ChartInternal.prototype.generateDrawArea = function (areaIndices, isSub) {\r\n      var $$ = this, config = $$.config, area = $$.d3.area(), getPoints = $$.generateGetAreaPoints(areaIndices, isSub), yScaleGetter = isSub ? $$.getSubYScale : $$.getYScale, xValue = function (d) {\r\n          return (isSub ? $$.subxx : $$.xx).call($$, d);\r\n      }, value0 = function (d, i) {\r\n          return config.data_groups.length > 0\r\n              ? getPoints(d, i)[0][1]\r\n              : yScaleGetter.call($$, d.id)($$.getAreaBaseValue(d.id));\r\n      }, value1 = function (d, i) {\r\n          return config.data_groups.length > 0\r\n              ? getPoints(d, i)[1][1]\r\n              : yScaleGetter.call($$, d.id)(d.value);\r\n      };\r\n      area = config.axis_rotated\r\n          ? area\r\n              .x0(value0)\r\n              .x1(value1)\r\n              .y(xValue)\r\n          : area\r\n              .x(xValue)\r\n              .y0(config.area_above ? 0 : value0)\r\n              .y1(value1);\r\n      if (!config.line_connectNull) {\r\n          area = area.defined(function (d) {\r\n              return d.value !== null;\r\n          });\r\n      }\r\n      return function (d) {\r\n          var values = config.line_connectNull\r\n              ? $$.filterRemoveNull(d.values)\r\n              : d.values, x0 = 0, y0 = 0, path;\r\n          if ($$.isAreaType(d)) {\r\n              if ($$.isStepType(d)) {\r\n                  values = $$.convertValuesToStep(values);\r\n              }\r\n              path = area.curve($$.getInterpolate(d))(values);\r\n          }\r\n          else {\r\n              if (values[0]) {\r\n                  x0 = $$.x(values[0].x);\r\n                  y0 = $$.getYScale(d.id)(values[0].value);\r\n              }\r\n              path = config.axis_rotated ? 'M ' + y0 + ' ' + x0 : 'M ' + x0 + ' ' + y0;\r\n          }\r\n          return path ? path : 'M 0 0';\r\n      };\r\n  };\r\n  ChartInternal.prototype.getAreaBaseValue = function () {\r\n      return 0;\r\n  };\r\n  ChartInternal.prototype.generateGetAreaPoints = function (areaIndices, isSub) {\r\n      // partial duplication of generateGetBarPoints\r\n      var $$ = this, config = $$.config, areaTargetsNum = areaIndices.__max__ + 1, x = $$.getShapeX(0, areaTargetsNum, areaIndices, !!isSub), y = $$.getShapeY(!!isSub), areaOffset = $$.getShapeOffset($$.isAreaType, areaIndices, !!isSub), yScale = isSub ? $$.getSubYScale : $$.getYScale;\r\n      return function (d, i) {\r\n          var y0 = yScale.call($$, d.id)(0), offset = areaOffset(d, i) || y0, // offset is for stacked area chart\r\n          posX = x(d), posY = y(d);\r\n          // fix posY not to overflow opposite quadrant\r\n          if (config.axis_rotated) {\r\n              if ((0 < d.value && posY < y0) || (d.value < 0 && y0 < posY)) {\r\n                  posY = y0;\r\n              }\r\n          }\r\n          // 1 point that marks the area position\r\n          return [\r\n              [posX, offset],\r\n              [posX, posY - (y0 - offset)],\r\n              [posX, posY - (y0 - offset)],\r\n              [posX, offset] // needed for compatibility\r\n          ];\r\n      };\r\n  };\r\n  ChartInternal.prototype.updateCircle = function (cx, cy) {\r\n      var $$ = this;\r\n      var mainCircle = $$.main\r\n          .selectAll('.' + CLASS.circles)\r\n          .selectAll('.' + CLASS.circle)\r\n          .data($$.lineOrScatterOrStanfordData.bind($$));\r\n      var mainCircleEnter = mainCircle\r\n          .enter()\r\n          .append('circle')\r\n          .attr('shape-rendering', $$.isStanfordGraphType() ? 'crispEdges' : '')\r\n          .attr('class', $$.classCircle.bind($$))\r\n          .attr('cx', cx)\r\n          .attr('cy', cy)\r\n          .attr('r', $$.pointR.bind($$))\r\n          .style('color', $$.isStanfordGraphType() ? $$.getStanfordPointColor.bind($$) : $$.color);\r\n      $$.mainCircle = mainCircleEnter\r\n          .merge(mainCircle)\r\n          .style('opacity', $$.isStanfordGraphType() ? 1 : $$.initialOpacityForCircle.bind($$));\r\n      mainCircle.exit().style('opacity', 0);\r\n  };\r\n  ChartInternal.prototype.redrawCircle = function (cx, cy, withTransition, transition) {\r\n      var $$ = this, selectedCircles = $$.main.selectAll('.' + CLASS.selectedCircle);\r\n      return [\r\n          (withTransition ? $$.mainCircle.transition(transition) : $$.mainCircle)\r\n              .style('opacity', this.opacityForCircle.bind($$))\r\n              .style('color', $$.isStanfordGraphType() ? $$.getStanfordPointColor.bind($$) : $$.color)\r\n              .attr('cx', cx)\r\n              .attr('cy', cy),\r\n          (withTransition ? selectedCircles.transition(transition) : selectedCircles)\r\n              .attr('cx', cx)\r\n              .attr('cy', cy)\r\n      ];\r\n  };\r\n  ChartInternal.prototype.circleX = function (d) {\r\n      return d.x || d.x === 0 ? this.x(d.x) : null;\r\n  };\r\n  ChartInternal.prototype.updateCircleY = function () {\r\n      var $$ = this, lineIndices, getPoints;\r\n      if ($$.config.data_groups.length > 0) {\r\n          (lineIndices = $$.getShapeIndices($$.isLineType)),\r\n              (getPoints = $$.generateGetLinePoints(lineIndices));\r\n          $$.circleY = function (d, i) {\r\n              return getPoints(d, i)[0][1];\r\n          };\r\n      }\r\n      else {\r\n          $$.circleY = function (d) {\r\n              return $$.getYScale(d.id)(d.value);\r\n          };\r\n      }\r\n  };\r\n  ChartInternal.prototype.getCircles = function (i, id) {\r\n      var $$ = this;\r\n      return (id\r\n          ? $$.main.selectAll('.' + CLASS.circles + $$.getTargetSelectorSuffix(id))\r\n          : $$.main).selectAll('.' + CLASS.circle + (isValue(i) ? '-' + i : ''));\r\n  };\r\n  ChartInternal.prototype.expandCircles = function (i, id, reset) {\r\n      var $$ = this, r = $$.pointExpandedR.bind($$);\r\n      if (reset) {\r\n          $$.unexpandCircles();\r\n      }\r\n      $$.getCircles(i, id)\r\n          .classed(CLASS.EXPANDED, true)\r\n          .attr('r', r);\r\n  };\r\n  ChartInternal.prototype.unexpandCircles = function (i) {\r\n      var $$ = this, r = $$.pointR.bind($$);\r\n      $$.getCircles(i)\r\n          .filter(function () {\r\n          return $$.d3.select(this).classed(CLASS.EXPANDED);\r\n      })\r\n          .classed(CLASS.EXPANDED, false)\r\n          .attr('r', r);\r\n  };\r\n  ChartInternal.prototype.pointR = function (d) {\r\n      var $$ = this, config = $$.config;\r\n      return $$.isStepType(d)\r\n          ? 0\r\n          : isFunction(config.point_r)\r\n              ? config.point_r(d)\r\n              : config.point_r;\r\n  };\r\n  ChartInternal.prototype.pointExpandedR = function (d) {\r\n      var $$ = this, config = $$.config;\r\n      if (config.point_focus_expand_enabled) {\r\n          return isFunction(config.point_focus_expand_r)\r\n              ? config.point_focus_expand_r(d)\r\n              : config.point_focus_expand_r\r\n                  ? config.point_focus_expand_r\r\n                  : $$.pointR(d) * 1.75;\r\n      }\r\n      else {\r\n          return $$.pointR(d);\r\n      }\r\n  };\r\n  ChartInternal.prototype.pointSelectR = function (d) {\r\n      var $$ = this, config = $$.config;\r\n      return isFunction(config.point_select_r)\r\n          ? config.point_select_r(d)\r\n          : config.point_select_r\r\n              ? config.point_select_r\r\n              : $$.pointR(d) * 4;\r\n  };\r\n  ChartInternal.prototype.isWithinCircle = function (that, r) {\r\n      var d3 = this.d3, mouse = d3.mouse(that), d3_this = d3.select(that), cx = +d3_this.attr('cx'), cy = +d3_this.attr('cy');\r\n      return Math.sqrt(Math.pow(cx - mouse[0], 2) + Math.pow(cy - mouse[1], 2)) < r;\r\n  };\r\n  ChartInternal.prototype.isWithinStep = function (that, y) {\r\n      return Math.abs(y - this.d3.mouse(that)[1]) < 30;\r\n  };\n\n  ChartInternal.prototype.getCurrentWidth = function () {\r\n      var $$ = this, config = $$.config;\r\n      return config.size_width ? config.size_width : $$.getParentWidth();\r\n  };\r\n  ChartInternal.prototype.getCurrentHeight = function () {\r\n      var $$ = this, config = $$.config, h = config.size_height ? config.size_height : $$.getParentHeight();\r\n      return h > 0\r\n          ? h\r\n          : 320 / ($$.hasType('gauge') && !config.gauge_fullCircle ? 2 : 1);\r\n  };\r\n  ChartInternal.prototype.getCurrentPaddingTop = function () {\r\n      var $$ = this, config = $$.config, padding = isValue(config.padding_top) ? config.padding_top : 0;\r\n      if ($$.title && $$.title.node()) {\r\n          padding += $$.getTitlePadding();\r\n      }\r\n      return padding;\r\n  };\r\n  ChartInternal.prototype.getCurrentPaddingBottom = function () {\r\n      var config = this.config;\r\n      return isValue(config.padding_bottom) ? config.padding_bottom : 0;\r\n  };\r\n  ChartInternal.prototype.getCurrentPaddingLeft = function (withoutRecompute) {\r\n      var $$ = this, config = $$.config;\r\n      if (isValue(config.padding_left)) {\r\n          return config.padding_left;\r\n      }\r\n      else if (config.axis_rotated) {\r\n          return !config.axis_x_show || config.axis_x_inner\r\n              ? 1\r\n              : Math.max(ceil10($$.getAxisWidthByAxisId('x', withoutRecompute)), 40);\r\n      }\r\n      else if (!config.axis_y_show || config.axis_y_inner) {\r\n          // && !config.axis_rotated\r\n          return $$.axis.getYAxisLabelPosition().isOuter ? 30 : 1;\r\n      }\r\n      else {\r\n          return ceil10($$.getAxisWidthByAxisId('y', withoutRecompute));\r\n      }\r\n  };\r\n  ChartInternal.prototype.getCurrentPaddingRight = function () {\r\n      var $$ = this, config = $$.config, padding = 0, defaultPadding = 10, legendWidthOnRight = $$.isLegendRight ? $$.getLegendWidth() + 20 : 0;\r\n      if (isValue(config.padding_right)) {\r\n          padding = config.padding_right + 1; // 1 is needed not to hide tick line\r\n      }\r\n      else if (config.axis_rotated) {\r\n          padding = defaultPadding + legendWidthOnRight;\r\n      }\r\n      else if (!config.axis_y2_show || config.axis_y2_inner) {\r\n          // && !config.axis_rotated\r\n          padding =\r\n              2 +\r\n                  legendWidthOnRight +\r\n                  ($$.axis.getY2AxisLabelPosition().isOuter ? 20 : 0);\r\n      }\r\n      else {\r\n          padding = ceil10($$.getAxisWidthByAxisId('y2')) + legendWidthOnRight;\r\n      }\r\n      if ($$.colorScale && $$.colorScale.node()) {\r\n          padding += $$.getColorScalePadding();\r\n      }\r\n      return padding;\r\n  };\r\n  ChartInternal.prototype.getParentRectValue = function (key) {\r\n      var parent = this.selectChart.node(), v;\r\n      while (parent && parent.tagName !== 'BODY') {\r\n          try {\r\n              v = parent.getBoundingClientRect()[key];\r\n          }\r\n          catch (e) {\r\n              if (key === 'width') {\r\n                  // In IE in certain cases getBoundingClientRect\r\n                  // will cause an \"unspecified error\"\r\n                  v = parent.offsetWidth;\r\n              }\r\n          }\r\n          if (v) {\r\n              break;\r\n          }\r\n          parent = parent.parentNode;\r\n      }\r\n      return v;\r\n  };\r\n  ChartInternal.prototype.getParentWidth = function () {\r\n      return this.getParentRectValue('width');\r\n  };\r\n  ChartInternal.prototype.getParentHeight = function () {\r\n      var h = this.selectChart.style('height');\r\n      return h.indexOf('px') > 0 ? +h.replace('px', '') : 0;\r\n  };\r\n  ChartInternal.prototype.getSvgLeft = function (withoutRecompute) {\r\n      var $$ = this, config = $$.config, hasLeftAxisRect = config.axis_rotated || (!config.axis_rotated && !config.axis_y_inner), leftAxisClass = config.axis_rotated ? CLASS.axisX : CLASS.axisY, leftAxis = $$.main.select('.' + leftAxisClass).node(), svgRect = leftAxis && hasLeftAxisRect\r\n          ? leftAxis.getBoundingClientRect()\r\n          : { right: 0 }, chartRect = $$.selectChart.node().getBoundingClientRect(), hasArc = $$.hasArcType(), svgLeft = svgRect.right -\r\n          chartRect.left -\r\n          (hasArc ? 0 : $$.getCurrentPaddingLeft(withoutRecompute));\r\n      return svgLeft > 0 ? svgLeft : 0;\r\n  };\r\n  ChartInternal.prototype.getAxisWidthByAxisId = function (id, withoutRecompute) {\r\n      var $$ = this, position = $$.axis.getLabelPositionById(id);\r\n      return ($$.axis.getMaxTickWidth(id, withoutRecompute) + (position.isInner ? 20 : 40));\r\n  };\r\n  ChartInternal.prototype.getHorizontalAxisHeight = function (axisId, isSubchart) {\r\n      var $$ = this, config = $$.config, h = 30;\r\n      if (axisId === 'x' && !(isDefined(isSubchart) && isSubchart ? config.subchart_axis_x_show : config.axis_x_show)) {\r\n          return 8;\r\n      }\r\n      if (axisId === 'x' && config.axis_x_height) {\r\n          return config.axis_x_height;\r\n      }\r\n      if (axisId === 'y' && !config.axis_y_show) {\r\n          return config.legend_show && !$$.isLegendRight && !$$.isLegendInset ? 10 : 1;\r\n      }\r\n      if (axisId === 'y2' && !config.axis_y2_show) {\r\n          return $$.rotated_padding_top;\r\n      }\r\n      // Calculate x axis height when tick rotated\r\n      if (axisId === 'x' && !config.axis_rotated && config.axis_x_tick_rotate) {\r\n          h =\r\n              30 +\r\n                  $$.axis.getMaxTickWidth(axisId) *\r\n                      Math.cos((Math.PI * (90 - Math.abs(config.axis_x_tick_rotate))) / 180);\r\n      }\r\n      // Calculate y axis height when tick rotated\r\n      if (axisId === 'y' && config.axis_rotated && config.axis_y_tick_rotate) {\r\n          h =\r\n              30 +\r\n                  $$.axis.getMaxTickWidth(axisId) *\r\n                      Math.cos((Math.PI * (90 - Math.abs(config.axis_y_tick_rotate))) / 180);\r\n      }\r\n      return (h +\r\n          ($$.axis.getLabelPositionById(axisId).isInner ? 0 : 10) +\r\n          (axisId === 'y2' ? -10 : 0));\r\n  };\n\n  ChartInternal.prototype.initBrush = function (scale) {\r\n      var $$ = this, d3 = $$.d3;\r\n      // TODO: dynamically change brushY/brushX according to axis_rotated.\r\n      $$.brush = ($$.config.axis_rotated ? d3.brushY() : d3.brushX())\r\n          .on('brush', function () {\r\n          var event = d3.event.sourceEvent;\r\n          if (event && event.type === 'zoom') {\r\n              return;\r\n          }\r\n          $$.redrawForBrush();\r\n      })\r\n          .on('end', function () {\r\n          var event = d3.event.sourceEvent;\r\n          if (event && event.type === 'zoom') {\r\n              return;\r\n          }\r\n          if ($$.brush.empty() && event && event.type !== 'end') {\r\n              $$.brush.clear();\r\n          }\r\n      });\r\n      $$.brush.updateExtent = function () {\r\n          var range = this.scale.range(), extent;\r\n          if ($$.config.axis_rotated) {\r\n              extent = [\r\n                  [0, range[0]],\r\n                  [$$.width2, range[1]]\r\n              ];\r\n          }\r\n          else {\r\n              extent = [\r\n                  [range[0], 0],\r\n                  [range[1], $$.height2]\r\n              ];\r\n          }\r\n          this.extent(extent);\r\n          return this;\r\n      };\r\n      $$.brush.updateScale = function (scale) {\r\n          this.scale = scale;\r\n          return this;\r\n      };\r\n      $$.brush.update = function (scale) {\r\n          this.updateScale(scale || $$.subX).updateExtent();\r\n          $$.context.select('.' + CLASS.brush).call(this);\r\n      };\r\n      $$.brush.clear = function () {\r\n          $$.context.select('.' + CLASS.brush).call($$.brush.move, null);\r\n      };\r\n      $$.brush.selection = function () {\r\n          return d3.brushSelection($$.context.select('.' + CLASS.brush).node());\r\n      };\r\n      $$.brush.selectionAsValue = function (selectionAsValue, withTransition) {\r\n          var selection, brush;\r\n          if (selectionAsValue) {\r\n              if ($$.context) {\r\n                  selection = [\r\n                      this.scale(selectionAsValue[0]),\r\n                      this.scale(selectionAsValue[1])\r\n                  ];\r\n                  brush = $$.context.select('.' + CLASS.brush);\r\n                  if (withTransition) {\r\n                      brush = brush.transition();\r\n                  }\r\n                  $$.brush.move(brush, selection);\r\n              }\r\n              return [];\r\n          }\r\n          selection = $$.brush.selection() || [0, 0];\r\n          return [this.scale.invert(selection[0]), this.scale.invert(selection[1])];\r\n      };\r\n      $$.brush.empty = function () {\r\n          var selection = $$.brush.selection();\r\n          return !selection || selection[0] === selection[1];\r\n      };\r\n      return $$.brush.updateScale(scale);\r\n  };\r\n  ChartInternal.prototype.initSubchart = function () {\r\n      var $$ = this, config = $$.config, context = ($$.context = $$.svg\r\n          .append('g')\r\n          .attr('transform', $$.getTranslate('context')));\r\n      // set style\r\n      context.style('visibility', 'visible');\r\n      // Define g for chart area\r\n      context\r\n          .append('g')\r\n          .attr('clip-path', $$.clipPathForSubchart)\r\n          .attr('class', CLASS.chart);\r\n      // Define g for bar chart area\r\n      context\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.chartBars);\r\n      // Define g for line chart area\r\n      context\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.chartLines);\r\n      // Add extent rect for Brush\r\n      context\r\n          .append('g')\r\n          .attr('clip-path', $$.clipPath)\r\n          .attr('class', CLASS.brush);\r\n      // ATTENTION: This must be called AFTER chart added\r\n      // Add Axis\r\n      $$.axes.subx = context\r\n          .append('g')\r\n          .attr('class', CLASS.axisX)\r\n          .attr('transform', $$.getTranslate('subx'))\r\n          .attr('clip-path', config.axis_rotated ? '' : $$.clipPathForXAxis)\r\n          .style('visibility', config.subchart_axis_x_show ? 'visible' : 'hidden');\r\n  };\r\n  ChartInternal.prototype.initSubchartBrush = function () {\r\n      var $$ = this;\r\n      // Add extent rect for Brush\r\n      $$.initBrush($$.subX).updateExtent();\r\n      $$.context.select('.' + CLASS.brush).call($$.brush);\r\n  };\r\n  ChartInternal.prototype.updateTargetsForSubchart = function (targets) {\r\n      var $$ = this, context = $$.context, config = $$.config, contextLineEnter, contextLine, contextBarEnter, contextBar, classChartBar = $$.classChartBar.bind($$), classBars = $$.classBars.bind($$), classChartLine = $$.classChartLine.bind($$), classLines = $$.classLines.bind($$), classAreas = $$.classAreas.bind($$);\r\n      //-- Bar --//\r\n      contextBar = context\r\n          .select('.' + CLASS.chartBars)\r\n          .selectAll('.' + CLASS.chartBar)\r\n          .data(targets);\r\n      contextBarEnter = contextBar\r\n          .enter()\r\n          .append('g')\r\n          .style('opacity', 0);\r\n      contextBarEnter.merge(contextBar).attr('class', classChartBar);\r\n      // Bars for each data\r\n      contextBarEnter.append('g').attr('class', classBars);\r\n      //-- Line --//\r\n      contextLine = context\r\n          .select('.' + CLASS.chartLines)\r\n          .selectAll('.' + CLASS.chartLine)\r\n          .data(targets);\r\n      contextLineEnter = contextLine\r\n          .enter()\r\n          .append('g')\r\n          .style('opacity', 0);\r\n      contextLineEnter.merge(contextLine).attr('class', classChartLine);\r\n      // Lines for each data\r\n      contextLineEnter.append('g').attr('class', classLines);\r\n      // Area\r\n      contextLineEnter.append('g').attr('class', classAreas);\r\n      //-- Brush --//\r\n      context\r\n          .selectAll('.' + CLASS.brush + ' rect')\r\n          .attr(config.axis_rotated ? 'width' : 'height', config.axis_rotated ? $$.width2 : $$.height2);\r\n  };\r\n  ChartInternal.prototype.updateBarForSubchart = function (durationForExit) {\r\n      var $$ = this;\r\n      var contextBar = $$.context\r\n          .selectAll('.' + CLASS.bars)\r\n          .selectAll('.' + CLASS.bar)\r\n          .data($$.barData.bind($$));\r\n      var contextBarEnter = contextBar\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', $$.classBar.bind($$))\r\n          .style('stroke', 'none')\r\n          .style('fill', $$.color);\r\n      contextBar\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      $$.contextBar = contextBarEnter\r\n          .merge(contextBar)\r\n          .style('opacity', $$.initialOpacity.bind($$));\r\n  };\r\n  ChartInternal.prototype.redrawBarForSubchart = function (drawBarOnSub, withTransition, duration) {\r\n      (withTransition\r\n          ? this.contextBar.transition(Math.random().toString()).duration(duration)\r\n          : this.contextBar)\r\n          .attr('d', drawBarOnSub)\r\n          .style('opacity', 1);\r\n  };\r\n  ChartInternal.prototype.updateLineForSubchart = function (durationForExit) {\r\n      var $$ = this;\r\n      var contextLine = $$.context\r\n          .selectAll('.' + CLASS.lines)\r\n          .selectAll('.' + CLASS.line)\r\n          .data($$.lineData.bind($$));\r\n      var contextLineEnter = contextLine\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', $$.classLine.bind($$))\r\n          .style('stroke', $$.color);\r\n      contextLine\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      $$.contextLine = contextLineEnter\r\n          .merge(contextLine)\r\n          .style('opacity', $$.initialOpacity.bind($$));\r\n  };\r\n  ChartInternal.prototype.redrawLineForSubchart = function (drawLineOnSub, withTransition, duration) {\r\n      (withTransition\r\n          ? this.contextLine.transition(Math.random().toString()).duration(duration)\r\n          : this.contextLine)\r\n          .attr('d', drawLineOnSub)\r\n          .style('opacity', 1);\r\n  };\r\n  ChartInternal.prototype.updateAreaForSubchart = function (durationForExit) {\r\n      var $$ = this, d3 = $$.d3;\r\n      var contextArea = $$.context\r\n          .selectAll('.' + CLASS.areas)\r\n          .selectAll('.' + CLASS.area)\r\n          .data($$.lineData.bind($$));\r\n      var contextAreaEnter = contextArea\r\n          .enter()\r\n          .append('path')\r\n          .attr('class', $$.classArea.bind($$))\r\n          .style('fill', $$.color)\r\n          .style('opacity', function () {\r\n          $$.orgAreaOpacity = +d3.select(this).style('opacity');\r\n          return 0;\r\n      });\r\n      contextArea\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      $$.contextArea = contextAreaEnter.merge(contextArea).style('opacity', 0);\r\n  };\r\n  ChartInternal.prototype.redrawAreaForSubchart = function (drawAreaOnSub, withTransition, duration) {\r\n      (withTransition\r\n          ? this.contextArea.transition(Math.random().toString()).duration(duration)\r\n          : this.contextArea)\r\n          .attr('d', drawAreaOnSub)\r\n          .style('fill', this.color)\r\n          .style('opacity', this.orgAreaOpacity);\r\n  };\r\n  ChartInternal.prototype.redrawSubchart = function (withSubchart, transitions, duration, durationForExit, areaIndices, barIndices, lineIndices) {\r\n      var $$ = this, d3 = $$.d3, drawAreaOnSub, drawBarOnSub, drawLineOnSub;\r\n      // reflect main chart to extent on subchart if zoomed\r\n      if (d3.event && d3.event.type === 'zoom') {\r\n          $$.brush.selectionAsValue($$.x.orgDomain());\r\n      }\r\n      // update subchart elements if needed\r\n      if (withSubchart) {\r\n          // extent rect\r\n          if (!$$.brush.empty()) {\r\n              $$.brush.selectionAsValue($$.x.orgDomain());\r\n          }\r\n          // setup drawer - MEMO: this must be called after axis updated\r\n          drawAreaOnSub = $$.generateDrawArea(areaIndices, true);\r\n          drawBarOnSub = $$.generateDrawBar(barIndices, true);\r\n          drawLineOnSub = $$.generateDrawLine(lineIndices, true);\r\n          $$.updateBarForSubchart(duration);\r\n          $$.updateLineForSubchart(duration);\r\n          $$.updateAreaForSubchart(duration);\r\n          $$.redrawBarForSubchart(drawBarOnSub, duration, duration);\r\n          $$.redrawLineForSubchart(drawLineOnSub, duration, duration);\r\n          $$.redrawAreaForSubchart(drawAreaOnSub, duration, duration);\r\n      }\r\n  };\r\n  ChartInternal.prototype.redrawForBrush = function () {\r\n      var $$ = this, x = $$.x, d3 = $$.d3, s;\r\n      $$.redraw({\r\n          withTransition: false,\r\n          withY: $$.config.zoom_rescale,\r\n          withSubchart: false,\r\n          withUpdateXDomain: true,\r\n          withEventRect: false,\r\n          withDimension: false\r\n      });\r\n      // update zoom transation binded to event rect\r\n      s = d3.event.selection || $$.brush.scale.range();\r\n      $$.main\r\n          .select('.' + CLASS.eventRect)\r\n          .call($$.zoom.transform, d3.zoomIdentity.scale($$.width / (s[1] - s[0])).translate(-s[0], 0));\r\n      $$.config.subchart_onbrush.call($$.api, x.orgDomain());\r\n  };\r\n  ChartInternal.prototype.transformContext = function (withTransition, transitions) {\r\n      var $$ = this, subXAxis;\r\n      if (transitions && transitions.axisSubX) {\r\n          subXAxis = transitions.axisSubX;\r\n      }\r\n      else {\r\n          subXAxis = $$.context.select('.' + CLASS.axisX);\r\n          if (withTransition) {\r\n              subXAxis = subXAxis.transition();\r\n          }\r\n      }\r\n      $$.context.attr('transform', $$.getTranslate('context'));\r\n      subXAxis.attr('transform', $$.getTranslate('subx'));\r\n  };\r\n  ChartInternal.prototype.getDefaultSelection = function () {\r\n      var $$ = this, config = $$.config, selection = isFunction(config.axis_x_selection)\r\n          ? config.axis_x_selection($$.getXDomain($$.data.targets))\r\n          : config.axis_x_selection;\r\n      if ($$.isTimeSeries()) {\r\n          selection = [$$.parseDate(selection[0]), $$.parseDate(selection[1])];\r\n      }\r\n      return selection;\r\n  };\r\n  ChartInternal.prototype.removeSubchart = function () {\r\n      var $$ = this;\r\n      $$.brush = null;\r\n      $$.context.remove();\r\n      $$.context = null;\r\n  };\n\n  ChartInternal.prototype.initText = function () {\r\n      var $$ = this;\r\n      $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.chartTexts);\r\n      $$.mainText = $$.d3.selectAll([]);\r\n  };\r\n  ChartInternal.prototype.updateTargetsForText = function (targets) {\r\n      var $$ = this, classChartText = $$.classChartText.bind($$), classTexts = $$.classTexts.bind($$), classFocus = $$.classFocus.bind($$);\r\n      var mainText = $$.main\r\n          .select('.' + CLASS.chartTexts)\r\n          .selectAll('.' + CLASS.chartText)\r\n          .data(targets);\r\n      var mainTextEnter = mainText\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', classChartText)\r\n          .style('opacity', 0)\r\n          .style('pointer-events', 'none');\r\n      mainTextEnter.append('g').attr('class', classTexts);\r\n      mainTextEnter.merge(mainText).attr('class', function (d) {\r\n          return classChartText(d) + classFocus(d);\r\n      });\r\n  };\r\n  ChartInternal.prototype.updateText = function (xForText, yForText, durationForExit) {\r\n      var $$ = this, config = $$.config, barOrLineData = $$.barOrLineData.bind($$), classText = $$.classText.bind($$);\r\n      var mainText = $$.main\r\n          .selectAll('.' + CLASS.texts)\r\n          .selectAll('.' + CLASS.text)\r\n          .data(barOrLineData);\r\n      var mainTextEnter = mainText\r\n          .enter()\r\n          .append('text')\r\n          .attr('class', classText)\r\n          .attr('text-anchor', function (d) {\r\n          return config.axis_rotated ? (d.value < 0 ? 'end' : 'start') : 'middle';\r\n      })\r\n          .style('stroke', 'none')\r\n          .attr('x', xForText)\r\n          .attr('y', yForText)\r\n          .style('fill', function (d) {\r\n          return $$.color(d);\r\n      })\r\n          .style('fill-opacity', 0);\r\n      $$.mainText = mainTextEnter.merge(mainText).text(function (d, i, j) {\r\n          return $$.dataLabelFormat(d.id)(d.value, d.id, i, j);\r\n      });\r\n      mainText\r\n          .exit()\r\n          .transition()\r\n          .duration(durationForExit)\r\n          .style('fill-opacity', 0)\r\n          .remove();\r\n  };\r\n  ChartInternal.prototype.redrawText = function (xForText, yForText, forFlow, withTransition, transition) {\r\n      return [\r\n          (withTransition ? this.mainText.transition(transition) : this.mainText)\r\n              .attr('x', xForText)\r\n              .attr('y', yForText)\r\n              .style('fill', this.color)\r\n              .style('fill-opacity', forFlow ? 0 : this.opacityForText.bind(this))\r\n      ];\r\n  };\r\n  ChartInternal.prototype.getTextRect = function (text, cls, element) {\r\n      var dummy = this.d3\r\n          .select('body')\r\n          .append('div')\r\n          .classed('c3', true), svg = dummy\r\n          .append('svg')\r\n          .style('visibility', 'hidden')\r\n          .style('position', 'fixed')\r\n          .style('top', 0)\r\n          .style('left', 0), font = this.d3.select(element).style('font'), rect;\r\n      svg\r\n          .selectAll('.dummy')\r\n          .data([text])\r\n          .enter()\r\n          .append('text')\r\n          .classed(cls ? cls : '', true)\r\n          .style('font', font)\r\n          .text(text)\r\n          .each(function () {\r\n          rect = getBBox(this);\r\n      });\r\n      dummy.remove();\r\n      return rect;\r\n  };\r\n  ChartInternal.prototype.generateXYForText = function (areaIndices, barIndices, lineIndices, forX) {\r\n      var $$ = this, getAreaPoints = $$.generateGetAreaPoints(areaIndices, false), getBarPoints = $$.generateGetBarPoints(barIndices, false), getLinePoints = $$.generateGetLinePoints(lineIndices, false), getter = forX ? $$.getXForText : $$.getYForText;\r\n      return function (d, i) {\r\n          var getPoints = $$.isAreaType(d)\r\n              ? getAreaPoints\r\n              : $$.isBarType(d)\r\n                  ? getBarPoints\r\n                  : getLinePoints;\r\n          return getter.call($$, getPoints(d, i), d, this);\r\n      };\r\n  };\r\n  ChartInternal.prototype.getXForText = function (points, d, textElement) {\r\n      var $$ = this, box = getBBox(textElement), xPos, padding;\r\n      if ($$.config.axis_rotated) {\r\n          padding = $$.isBarType(d) ? 4 : 6;\r\n          xPos = points[2][1] + padding * (d.value < 0 ? -1 : 1);\r\n      }\r\n      else {\r\n          xPos = $$.hasType('bar') ? (points[2][0] + points[0][0]) / 2 : points[0][0];\r\n      }\r\n      // show labels regardless of the domain if value is null\r\n      if (d.value === null) {\r\n          if (xPos > $$.width) {\r\n              xPos = $$.width - box.width;\r\n          }\r\n          else if (xPos < 0) {\r\n              xPos = 4;\r\n          }\r\n      }\r\n      return xPos;\r\n  };\r\n  ChartInternal.prototype.getYForText = function (points, d, textElement) {\r\n      var $$ = this, box = getBBox(textElement), yPos;\r\n      if ($$.config.axis_rotated) {\r\n          yPos = (points[0][0] + points[2][0] + box.height * 0.6) / 2;\r\n      }\r\n      else {\r\n          yPos = points[2][1];\r\n          if (d.value < 0 || (d.value === 0 && !$$.hasPositiveValue)) {\r\n              yPos += box.height;\r\n              if ($$.isBarType(d) && $$.isSafari()) {\r\n                  yPos -= 3;\r\n              }\r\n              else if (!$$.isBarType(d) && $$.isChrome()) {\r\n                  yPos += 3;\r\n              }\r\n          }\r\n          else {\r\n              yPos += $$.isBarType(d) ? -3 : -6;\r\n          }\r\n      }\r\n      // show labels regardless of the domain if value is null\r\n      if (d.value === null && !$$.config.axis_rotated) {\r\n          if (yPos < box.height) {\r\n              yPos = box.height;\r\n          }\r\n          else if (yPos > this.height) {\r\n              yPos = this.height - 4;\r\n          }\r\n      }\r\n      return yPos;\r\n  };\n\n  ChartInternal.prototype.initTitle = function () {\r\n      var $$ = this;\r\n      $$.title = $$.svg\r\n          .append('text')\r\n          .text($$.config.title_text)\r\n          .attr('class', $$.CLASS.title);\r\n  };\r\n  ChartInternal.prototype.redrawTitle = function () {\r\n      var $$ = this;\r\n      $$.title.attr('x', $$.xForTitle.bind($$)).attr('y', $$.yForTitle.bind($$));\r\n  };\r\n  ChartInternal.prototype.xForTitle = function () {\r\n      var $$ = this, config = $$.config, position = config.title_position || 'left', x;\r\n      if (position.indexOf('right') >= 0) {\r\n          x =\r\n              $$.currentWidth -\r\n                  $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).width -\r\n                  config.title_padding.right;\r\n      }\r\n      else if (position.indexOf('center') >= 0) {\r\n          x = Math.max(($$.currentWidth -\r\n              $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node()).width) /\r\n              2, 0);\r\n      }\r\n      else {\r\n          // left\r\n          x = config.title_padding.left;\r\n      }\r\n      return x;\r\n  };\r\n  ChartInternal.prototype.yForTitle = function () {\r\n      var $$ = this;\r\n      return ($$.config.title_padding.top +\r\n          $$.getTextRect($$.title.node().textContent, $$.CLASS.title, $$.title.node())\r\n              .height);\r\n  };\r\n  ChartInternal.prototype.getTitlePadding = function () {\r\n      var $$ = this;\r\n      return $$.yForTitle() + $$.config.title_padding.bottom;\r\n  };\n\n  function powerOfTen(d) {\r\n      return d / Math.pow(10, Math.ceil(Math.log(d) / Math.LN10 - 1e-12)) === 1;\r\n  }\r\n  ChartInternal.prototype.drawColorScale = function () {\r\n      var $$ = this, d3 = $$.d3, config = $$.config, target = $$.data.targets[0], barWidth, barHeight, axis, points, legendAxis, axisScale, inverseScale, height;\r\n      barWidth = !isNaN(config.stanford_scaleWidth)\r\n          ? config.stanford_scaleWidth\r\n          : 20;\r\n      barHeight = 5;\r\n      if (barHeight < 0 || barWidth < 0) {\r\n          throw Error(\"Colorscale's barheight and barwidth must be greater than 0.\");\r\n      }\r\n      height =\r\n          $$.height - config.stanford_padding.bottom - config.stanford_padding.top;\r\n      points = d3.range(config.stanford_padding.bottom, height, barHeight);\r\n      inverseScale = d3\r\n          .scaleSequential(target.colors)\r\n          .domain([points[points.length - 1], points[0]]);\r\n      if ($$.colorScale) {\r\n          $$.colorScale.remove();\r\n      }\r\n      $$.colorScale = $$.svg\r\n          .append('g')\r\n          .attr('width', 50)\r\n          .attr('height', height)\r\n          .attr('class', CLASS.colorScale);\r\n      $$.colorScale\r\n          .append('g')\r\n          .attr('transform', \"translate(0, \" + config.stanford_padding.top + \")\")\r\n          .selectAll('bars')\r\n          .data(points)\r\n          .enter()\r\n          .append('rect')\r\n          .attr('y', function (d, i) { return i * barHeight; })\r\n          .attr('x', 0)\r\n          .attr('width', barWidth)\r\n          .attr('height', barHeight)\r\n          .attr('fill', function (d) {\r\n          return inverseScale(d);\r\n      });\r\n      // Legend Axis\r\n      axisScale = d3\r\n          .scaleLog()\r\n          .domain([target.minEpochs, target.maxEpochs])\r\n          .range([\r\n          points[0] +\r\n              config.stanford_padding.top +\r\n              points[points.length - 1] +\r\n              barHeight -\r\n              1,\r\n          points[0] + config.stanford_padding.top\r\n      ]);\r\n      legendAxis = d3.axisRight(axisScale);\r\n      if (config.stanford_scaleFormat === 'pow10') {\r\n          legendAxis.tickValues([1, 10, 100, 1000, 10000, 100000, 1000000, 10000000]);\r\n      }\r\n      else if (isFunction(config.stanford_scaleFormat)) {\r\n          legendAxis.tickFormat(config.stanford_scaleFormat);\r\n      }\r\n      else {\r\n          legendAxis.tickFormat(d3.format('d'));\r\n      }\r\n      if (isFunction(config.stanford_scaleValues)) {\r\n          legendAxis.tickValues(config.stanford_scaleValues(target.minEpochs, target.maxEpochs));\r\n      }\r\n      // Draw Axis\r\n      axis = $$.colorScale\r\n          .append('g')\r\n          .attr('class', 'legend axis')\r\n          .attr('transform', \"translate(\" + barWidth + \",0)\")\r\n          .call(legendAxis);\r\n      if (config.stanford_scaleFormat === 'pow10') {\r\n          axis\r\n              .selectAll('.tick text')\r\n              .text(null)\r\n              .filter(powerOfTen)\r\n              .text(10)\r\n              .append('tspan')\r\n              .attr('dy', '-.7em') // https://bl.ocks.org/mbostock/6738229\r\n              .text(function (d) {\r\n              return Math.round(Math.log(d) / Math.LN10);\r\n          });\r\n      }\r\n      $$.colorScale.attr('transform', \"translate(\" + ($$.currentWidth - $$.xForColorScale()) + \", 0)\");\r\n  };\r\n  ChartInternal.prototype.xForColorScale = function () {\r\n      var $$ = this;\r\n      return $$.config.stanford_padding.right + getBBox($$.colorScale.node()).width;\r\n  };\r\n  ChartInternal.prototype.getColorScalePadding = function () {\r\n      var $$ = this;\r\n      return $$.xForColorScale() + $$.config.stanford_padding.left + 20;\r\n  };\n\n  ChartInternal.prototype.isStanfordGraphType = function () {\r\n      var $$ = this;\r\n      return $$.config.data_type === 'stanford';\r\n  };\r\n  ChartInternal.prototype.initStanfordData = function () {\r\n      var $$ = this, d3 = $$.d3, config = $$.config, target = $$.data.targets[0], epochs, maxEpochs, minEpochs;\r\n      // Make larger values appear on top\r\n      target.values.sort(compareEpochs);\r\n      // Get array of epochs\r\n      epochs = target.values.map(function (a) { return a.epochs; });\r\n      minEpochs = !isNaN(config.stanford_scaleMin)\r\n          ? config.stanford_scaleMin\r\n          : d3.min(epochs);\r\n      maxEpochs = !isNaN(config.stanford_scaleMax)\r\n          ? config.stanford_scaleMax\r\n          : d3.max(epochs);\r\n      if (minEpochs > maxEpochs) {\r\n          throw Error('Number of minEpochs has to be smaller than maxEpochs');\r\n      }\r\n      target.colors = isFunction(config.stanford_colors)\r\n          ? config.stanford_colors\r\n          : d3.interpolateHslLong(d3.hsl(250, 1, 0.5), d3.hsl(0, 1, 0.5));\r\n      target.colorscale = d3\r\n          .scaleSequentialLog(target.colors)\r\n          .domain([minEpochs, maxEpochs]);\r\n      target.minEpochs = minEpochs;\r\n      target.maxEpochs = maxEpochs;\r\n  };\r\n  ChartInternal.prototype.getStanfordPointColor = function (d) {\r\n      var $$ = this, target = $$.data.targets[0];\r\n      return target.colorscale(d.epochs);\r\n  };\r\n  // http://jsfiddle.net/Xotic750/KtzLq/\r\n  ChartInternal.prototype.getCentroid = function (points) {\r\n      var area = getRegionArea(points);\r\n      var x = 0, y = 0, i, j, f, point1, point2;\r\n      for (i = 0, j = points.length - 1; i < points.length; j = i, i += 1) {\r\n          point1 = points[i];\r\n          point2 = points[j];\r\n          f = point1.x * point2.y - point2.x * point1.y;\r\n          x += (point1.x + point2.x) * f;\r\n          y += (point1.y + point2.y) * f;\r\n      }\r\n      f = area * 6;\r\n      return {\r\n          x: x / f,\r\n          y: y / f\r\n      };\r\n  };\r\n  ChartInternal.prototype.getStanfordTooltipTitle = function (d) {\r\n      var $$ = this, labelX = $$.axis.getLabelText('x'), labelY = $$.axis.getLabelText('y');\r\n      return \"\\n      <tr><th>\" + (labelX ? sanitise(labelX) : 'x') + \"</th><th class='value'>\" + d.x + \"</th></tr>\\n      <tr><th>\" + (labelY ? sanitise(labelY) : 'y') + \"</th><th class='value'>\" + d.value + \"</th></tr>\\n    \";\r\n  };\r\n  ChartInternal.prototype.countEpochsInRegion = function (region) {\r\n      var $$ = this, target = $$.data.targets[0], total, count;\r\n      total = target.values.reduce(function (accumulator, currentValue) { return accumulator + Number(currentValue.epochs); }, 0);\r\n      count = target.values.reduce(function (accumulator, currentValue) {\r\n          if (pointInRegion(currentValue, region)) {\r\n              return accumulator + Number(currentValue.epochs);\r\n          }\r\n          return accumulator;\r\n      }, 0);\r\n      return {\r\n          value: count,\r\n          percentage: count !== 0 ? ((count / total) * 100).toFixed(1) : 0\r\n      };\r\n  };\r\n  var getRegionArea = function (points) {\r\n      // thanks to: https://stackoverflow.com/questions/16282330/find-centerpoint-of-polygon-in-javascript\r\n      var area = 0, i, j, point1, point2;\r\n      for (i = 0, j = points.length - 1; i < points.length; j = i, i += 1) {\r\n          point1 = points[i];\r\n          point2 = points[j];\r\n          area += point1.x * point2.y;\r\n          area -= point1.y * point2.x;\r\n      }\r\n      area /= 2;\r\n      return area;\r\n  };\r\n  var pointInRegion = function (point, region) {\r\n      // thanks to: http://bl.ocks.org/bycoffe/5575904\r\n      // ray-casting algorithm based on\r\n      // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\r\n      var xi, yi, yj, xj, intersect, x = point.x, y = point.value, inside = false;\r\n      for (var i = 0, j = region.length - 1; i < region.length; j = i++) {\r\n          xi = region[i].x;\r\n          yi = region[i].y;\r\n          xj = region[j].x;\r\n          yj = region[j].y;\r\n          intersect = yi > y !== yj > y && x < ((xj - xi) * (y - yi)) / (yj - yi) + xi;\r\n          if (intersect) {\r\n              inside = !inside;\r\n          }\r\n      }\r\n      return inside;\r\n  };\r\n  var compareEpochs = function (a, b) {\r\n      if (a.epochs < b.epochs) {\r\n          return -1;\r\n      }\r\n      if (a.epochs > b.epochs) {\r\n          return 1;\r\n      }\r\n      return 0;\r\n  };\n\n  ChartInternal.prototype.initStanfordElements = function () {\r\n      var $$ = this;\r\n      // Avoid blocking eventRect\r\n      $$.stanfordElements = $$.main\r\n          .select('.' + CLASS.chart)\r\n          .append('g')\r\n          .attr('class', CLASS.stanfordElements);\r\n      $$.stanfordElements.append('g').attr('class', CLASS.stanfordLines);\r\n      $$.stanfordElements.append('g').attr('class', CLASS.stanfordTexts);\r\n      $$.stanfordElements.append('g').attr('class', CLASS.stanfordRegions);\r\n  };\r\n  ChartInternal.prototype.updateStanfordElements = function (duration) {\r\n      var $$ = this, main = $$.main, config = $$.config, stanfordLine, stanfordLineEnter, stanfordRegion, stanfordRegionEnter, stanfordText, stanfordTextEnter, xvCustom = $$.xvCustom.bind($$), yvCustom = $$.yvCustom.bind($$), countPointsInRegion = $$.countEpochsInRegion.bind($$);\r\n      // Stanford-Lines\r\n      stanfordLine = main\r\n          .select('.' + CLASS.stanfordLines)\r\n          .style('shape-rendering', 'geometricprecision')\r\n          .selectAll('.' + CLASS.stanfordLine)\r\n          .data(config.stanford_lines);\r\n      // enter\r\n      stanfordLineEnter = stanfordLine\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', function (d) {\r\n          return CLASS.stanfordLine + (d['class'] ? ' ' + d['class'] : '');\r\n      });\r\n      stanfordLineEnter\r\n          .append('line')\r\n          .attr('x1', function (d) {\r\n          return config.axis_rotated ? yvCustom(d, 'value_y1') : xvCustom(d, 'value_x1');\r\n      })\r\n          .attr('x2', function (d) {\r\n          return config.axis_rotated ? yvCustom(d, 'value_y2') : xvCustom(d, 'value_x2');\r\n      })\r\n          .attr('y1', function (d) {\r\n          return config.axis_rotated ? xvCustom(d, 'value_x1') : yvCustom(d, 'value_y1');\r\n      })\r\n          .attr('y2', function (d) {\r\n          return config.axis_rotated ? xvCustom(d, 'value_x2') : yvCustom(d, 'value_y2');\r\n      })\r\n          .style('opacity', 0);\r\n      // update\r\n      $$.stanfordLines = stanfordLineEnter.merge(stanfordLine);\r\n      $$.stanfordLines\r\n          .select('line')\r\n          .transition()\r\n          .duration(duration)\r\n          .attr('x1', function (d) {\r\n          return config.axis_rotated ? yvCustom(d, 'value_y1') : xvCustom(d, 'value_x1');\r\n      })\r\n          .attr('x2', function (d) {\r\n          return config.axis_rotated ? yvCustom(d, 'value_y2') : xvCustom(d, 'value_x2');\r\n      })\r\n          .attr('y1', function (d) {\r\n          return config.axis_rotated ? xvCustom(d, 'value_x1') : yvCustom(d, 'value_y1');\r\n      })\r\n          .attr('y2', function (d) {\r\n          return config.axis_rotated ? xvCustom(d, 'value_x2') : yvCustom(d, 'value_y2');\r\n      })\r\n          .style('opacity', 1);\r\n      // exit\r\n      stanfordLine\r\n          .exit()\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      // Stanford-Text\r\n      stanfordText = main\r\n          .select('.' + CLASS.stanfordTexts)\r\n          .selectAll('.' + CLASS.stanfordText)\r\n          .data(config.stanford_texts);\r\n      // enter\r\n      stanfordTextEnter = stanfordText\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', function (d) {\r\n          return CLASS.stanfordText + (d['class'] ? ' ' + d['class'] : '');\r\n      });\r\n      stanfordTextEnter\r\n          .append('text')\r\n          .attr('x', function (d) { return (config.axis_rotated ? yvCustom(d, 'y') : xvCustom(d, 'x')); })\r\n          .attr('y', function (d) { return (config.axis_rotated ? xvCustom(d, 'x') : yvCustom(d, 'y')); })\r\n          .style('opacity', 0);\r\n      // update\r\n      $$.stanfordTexts = stanfordTextEnter.merge(stanfordText);\r\n      $$.stanfordTexts\r\n          .select('text')\r\n          .transition()\r\n          .duration(duration)\r\n          .attr('x', function (d) { return (config.axis_rotated ? yvCustom(d, 'y') : xvCustom(d, 'x')); })\r\n          .attr('y', function (d) { return (config.axis_rotated ? xvCustom(d, 'x') : yvCustom(d, 'y')); })\r\n          .text(function (d) {\r\n          return d.content;\r\n      })\r\n          .style('opacity', 1);\r\n      // exit\r\n      stanfordText\r\n          .exit()\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n      // Stanford-Regions\r\n      stanfordRegion = main\r\n          .select('.' + CLASS.stanfordRegions)\r\n          .selectAll('.' + CLASS.stanfordRegion)\r\n          .data(config.stanford_regions);\r\n      // enter\r\n      stanfordRegionEnter = stanfordRegion\r\n          .enter()\r\n          .append('g')\r\n          .attr('class', function (d) {\r\n          return CLASS.stanfordRegion + (d['class'] ? ' ' + d['class'] : '');\r\n      });\r\n      stanfordRegionEnter\r\n          .append('polygon')\r\n          .attr('points', function (d) {\r\n          return d.points\r\n              .map(function (value) {\r\n              return [\r\n                  config.axis_rotated ? yvCustom(value, 'y') : xvCustom(value, 'x'),\r\n                  config.axis_rotated ? xvCustom(value, 'x') : yvCustom(value, 'y')\r\n              ].join(',');\r\n          })\r\n              .join(' ');\r\n      })\r\n          .style('opacity', 0);\r\n      stanfordRegionEnter\r\n          .append('text')\r\n          .attr('x', function (d) { return $$.getCentroid(d.points).x; })\r\n          .attr('y', function (d) { return $$.getCentroid(d.points).y; })\r\n          .style('opacity', 0);\r\n      // update\r\n      $$.stanfordRegions = stanfordRegionEnter.merge(stanfordRegion);\r\n      $$.stanfordRegions\r\n          .select('polygon')\r\n          .transition()\r\n          .duration(duration)\r\n          .attr('points', function (d) {\r\n          return d.points\r\n              .map(function (value) {\r\n              return [\r\n                  config.axis_rotated ? yvCustom(value, 'y') : xvCustom(value, 'x'),\r\n                  config.axis_rotated ? xvCustom(value, 'x') : yvCustom(value, 'y')\r\n              ].join(',');\r\n          })\r\n              .join(' ');\r\n      })\r\n          .style('opacity', function (d) {\r\n          return d.opacity ? d.opacity : 0.2;\r\n      });\r\n      $$.stanfordRegions\r\n          .select('text')\r\n          .transition()\r\n          .duration(duration)\r\n          .attr('x', function (d) {\r\n          return config.axis_rotated\r\n              ? yvCustom($$.getCentroid(d.points), 'y')\r\n              : xvCustom($$.getCentroid(d.points), 'x');\r\n      })\r\n          .attr('y', function (d) {\r\n          return config.axis_rotated\r\n              ? xvCustom($$.getCentroid(d.points), 'x')\r\n              : yvCustom($$.getCentroid(d.points), 'y');\r\n      })\r\n          .text(function (d) {\r\n          if (d.text) {\r\n              var value, percentage, temp;\r\n              if ($$.isStanfordGraphType()) {\r\n                  temp = countPointsInRegion(d.points);\r\n                  value = temp.value;\r\n                  percentage = temp.percentage;\r\n              }\r\n              return d.text(value, percentage);\r\n          }\r\n          return '';\r\n      })\r\n          .attr('text-anchor', 'middle')\r\n          .attr('dominant-baseline', 'middle')\r\n          .style('opacity', 1);\r\n      // exit\r\n      stanfordRegion\r\n          .exit()\r\n          .transition()\r\n          .duration(duration)\r\n          .style('opacity', 0)\r\n          .remove();\r\n  };\n\n  ChartInternal.prototype.initTooltip = function () {\r\n      var $$ = this, config = $$.config, i;\r\n      $$.tooltip = $$.selectChart\r\n          .style('position', 'relative')\r\n          .append('div')\r\n          .attr('class', CLASS.tooltipContainer)\r\n          .style('position', 'absolute')\r\n          .style('pointer-events', 'none')\r\n          .style('display', 'none');\r\n      // Show tooltip if needed\r\n      if (config.tooltip_init_show) {\r\n          if ($$.isTimeSeries() && isString(config.tooltip_init_x)) {\r\n              config.tooltip_init_x = $$.parseDate(config.tooltip_init_x);\r\n              for (i = 0; i < $$.data.targets[0].values.length; i++) {\r\n                  if ($$.data.targets[0].values[i].x - config.tooltip_init_x === 0) {\r\n                      break;\r\n                  }\r\n              }\r\n              config.tooltip_init_x = i;\r\n          }\r\n          $$.tooltip.html(config.tooltip_contents.call($$, $$.data.targets.map(function (d) {\r\n              return $$.addName(d.values[config.tooltip_init_x]);\r\n          }), $$.axis.getXAxisTickFormat(), $$.getYFormat($$.hasArcType()), $$.color));\r\n          $$.tooltip\r\n              .style('top', config.tooltip_init_position.top)\r\n              .style('left', config.tooltip_init_position.left)\r\n              .style('display', 'block');\r\n      }\r\n  };\r\n  ChartInternal.prototype.getTooltipSortFunction = function () {\r\n      var $$ = this, config = $$.config;\r\n      if (config.data_groups.length === 0 || config.tooltip_order !== undefined) {\r\n          // if data are not grouped or if an order is specified\r\n          // for the tooltip values we sort them by their values\r\n          var order = config.tooltip_order;\r\n          if (order === undefined) {\r\n              order = config.data_order;\r\n          }\r\n          var valueOf = function (obj) {\r\n              return obj ? obj.value : null;\r\n          };\r\n          // if data are not grouped, we sort them by their value\r\n          if (isString(order) && order.toLowerCase() === 'asc') {\r\n              return function (a, b) {\r\n                  return valueOf(a) - valueOf(b);\r\n              };\r\n          }\r\n          else if (isString(order) && order.toLowerCase() === 'desc') {\r\n              return function (a, b) {\r\n                  return valueOf(b) - valueOf(a);\r\n              };\r\n          }\r\n          else if (isFunction(order)) {\r\n              // if the function is from data_order we need\r\n              // to wrap the returned function in order to format\r\n              // the sorted value to the expected format\r\n              var sortFunction = order;\r\n              if (config.tooltip_order === undefined) {\r\n                  sortFunction = function (a, b) {\r\n                      return order(a\r\n                          ? {\r\n                              id: a.id,\r\n                              values: [a]\r\n                          }\r\n                          : null, b\r\n                          ? {\r\n                              id: b.id,\r\n                              values: [b]\r\n                          }\r\n                          : null);\r\n                  };\r\n              }\r\n              return sortFunction;\r\n          }\r\n          else if (isArray(order)) {\r\n              return function (a, b) {\r\n                  return order.indexOf(a.id) - order.indexOf(b.id);\r\n              };\r\n          }\r\n      }\r\n      else {\r\n          // if data are grouped, we follow the order of grouped targets\r\n          var ids = $$.orderTargets($$.data.targets).map(function (i) {\r\n              return i.id;\r\n          });\r\n          // if it was either asc or desc we need to invert the order\r\n          // returned by orderTargets\r\n          if ($$.isOrderAsc() || $$.isOrderDesc()) {\r\n              ids = ids.reverse();\r\n          }\r\n          return function (a, b) {\r\n              return ids.indexOf(a.id) - ids.indexOf(b.id);\r\n          };\r\n      }\r\n  };\r\n  ChartInternal.prototype.getTooltipContent = function (d, defaultTitleFormat, defaultValueFormat, color) {\r\n      var $$ = this, config = $$.config, titleFormat = config.tooltip_format_title || defaultTitleFormat, nameFormat = config.tooltip_format_name ||\r\n          function (name) {\r\n              return name;\r\n          }, text, i, title, value, name, bgcolor;\r\n      var valueFormat = config.tooltip_format_value;\r\n      if (!valueFormat) {\r\n          valueFormat = $$.isTargetNormalized(d.id)\r\n              ? function (v, ratio) { return (ratio * 100).toFixed(2) + \"%\"; }\r\n              : defaultValueFormat;\r\n      }\r\n      var tooltipSortFunction = this.getTooltipSortFunction();\r\n      if (tooltipSortFunction) {\r\n          d.sort(tooltipSortFunction);\r\n      }\r\n      for (i = 0; i < d.length; i++) {\r\n          if (!(d[i] && (d[i].value || d[i].value === 0))) {\r\n              continue;\r\n          }\r\n          if ($$.isStanfordGraphType()) {\r\n              // Custom tooltip for stanford plots\r\n              if (!text) {\r\n                  title = $$.getStanfordTooltipTitle(d[i]);\r\n                  text = \"<table class='\" + $$.CLASS.tooltip + \"'>\" + title;\r\n              }\r\n              bgcolor = $$.getStanfordPointColor(d[i]);\r\n              name = sanitise(config.data_epochs); // Epochs key name\r\n              value = d[i].epochs;\r\n          }\r\n          else {\r\n              // Regular tooltip\r\n              if (!text) {\r\n                  title = sanitise(titleFormat ? titleFormat(d[i].x, d[i].index) : d[i].x);\r\n                  text =\r\n                      \"<table class='\" +\r\n                          $$.CLASS.tooltip +\r\n                          \"'>\" +\r\n                          (title || title === 0\r\n                              ? \"<tr><th colspan='2'>\" + title + '</th></tr>'\r\n                              : '');\r\n              }\r\n              value = sanitise(valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index, d));\r\n              if (value !== undefined) {\r\n                  // Skip elements when their name is set to null\r\n                  if (d[i].name === null) {\r\n                      continue;\r\n                  }\r\n                  name = sanitise(nameFormat(d[i].name, d[i].ratio, d[i].id, d[i].index));\r\n                  bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);\r\n              }\r\n          }\r\n          if (value !== undefined) {\r\n              text +=\r\n                  \"<tr class='\" +\r\n                      $$.CLASS.tooltipName +\r\n                      '-' +\r\n                      $$.getTargetSelectorSuffix(d[i].id) +\r\n                      \"'>\";\r\n              text +=\r\n                  \"<td class='name'><span style='background-color:\" +\r\n                      bgcolor +\r\n                      \"'></span>\" +\r\n                      name +\r\n                      '</td>';\r\n              text += \"<td class='value'>\" + value + '</td>';\r\n              text += '</tr>';\r\n          }\r\n      }\r\n      return text + '</table>';\r\n  };\r\n  ChartInternal.prototype.tooltipPosition = function (dataToShow, tWidth, tHeight, element) {\r\n      var $$ = this, config = $$.config, d3 = $$.d3;\r\n      var svgLeft, tooltipLeft, tooltipRight, tooltipTop, chartRight;\r\n      var forArc = $$.hasArcType(), mouse = d3.mouse(element);\r\n      // Determin tooltip position\r\n      if (forArc) {\r\n          tooltipLeft =\r\n              ($$.width - ($$.isLegendRight ? $$.getLegendWidth() : 0)) / 2 + mouse[0];\r\n          tooltipTop =\r\n              ($$.hasType('gauge') ? $$.height : $$.height / 2) + mouse[1] + 20;\r\n      }\r\n      else {\r\n          svgLeft = $$.getSvgLeft(true);\r\n          if (config.axis_rotated) {\r\n              tooltipLeft = svgLeft + mouse[0] + 100;\r\n              tooltipRight = tooltipLeft + tWidth;\r\n              chartRight = $$.currentWidth - $$.getCurrentPaddingRight();\r\n              tooltipTop = $$.x(dataToShow[0].x) + 20;\r\n          }\r\n          else {\r\n              tooltipLeft =\r\n                  svgLeft + $$.getCurrentPaddingLeft(true) + $$.x(dataToShow[0].x) + 20;\r\n              tooltipRight = tooltipLeft + tWidth;\r\n              chartRight = svgLeft + $$.currentWidth - $$.getCurrentPaddingRight();\r\n              tooltipTop = mouse[1] + 15;\r\n          }\r\n          if (tooltipRight > chartRight) {\r\n              // 20 is needed for Firefox to keep tooltip width\r\n              tooltipLeft -= tooltipRight - chartRight + 20;\r\n          }\r\n          if (tooltipTop + tHeight > $$.currentHeight) {\r\n              tooltipTop -= tHeight + 30;\r\n          }\r\n      }\r\n      if (tooltipTop < 0) {\r\n          tooltipTop = 0;\r\n      }\r\n      return {\r\n          top: tooltipTop,\r\n          left: tooltipLeft\r\n      };\r\n  };\r\n  ChartInternal.prototype.showTooltip = function (selectedData, element) {\r\n      var $$ = this, config = $$.config;\r\n      var tWidth, tHeight, position;\r\n      var forArc = $$.hasArcType(), dataToShow = selectedData.filter(function (d) {\r\n          return d && isValue(d.value);\r\n      }), positionFunction = config.tooltip_position || ChartInternal.prototype.tooltipPosition;\r\n      if (dataToShow.length === 0 || !config.tooltip_show) {\r\n          $$.hideTooltip();\r\n          return;\r\n      }\r\n      $$.tooltip\r\n          .html(config.tooltip_contents.call($$, selectedData, $$.axis.getXAxisTickFormat(), $$.getYFormat(forArc), $$.color))\r\n          .style('display', 'block');\r\n      // Get tooltip dimensions\r\n      tWidth = $$.tooltip.property('offsetWidth');\r\n      tHeight = $$.tooltip.property('offsetHeight');\r\n      position = positionFunction.call(this, dataToShow, tWidth, tHeight, element);\r\n      // Set tooltip\r\n      $$.tooltip\r\n          .style('top', position.top + 'px')\r\n          .style('left', position.left + 'px');\r\n  };\r\n  ChartInternal.prototype.hideTooltip = function () {\r\n      this.tooltip.style('display', 'none');\r\n  };\n\n  ChartInternal.prototype.setTargetType = function (targetIds, type) {\r\n      var $$ = this, config = $$.config;\r\n      $$.mapToTargetIds(targetIds).forEach(function (id) {\r\n          $$.withoutFadeIn[id] = type === config.data_types[id];\r\n          config.data_types[id] = type;\r\n      });\r\n      if (!targetIds) {\r\n          config.data_type = type;\r\n      }\r\n  };\r\n  ChartInternal.prototype.hasType = function (type, targets) {\r\n      var $$ = this, types = $$.config.data_types, has = false;\r\n      targets = targets || $$.data.targets;\r\n      if (targets && targets.length) {\r\n          targets.forEach(function (target) {\r\n              var t = types[target.id];\r\n              if ((t && t.indexOf(type) >= 0) || (!t && type === 'line')) {\r\n                  has = true;\r\n              }\r\n          });\r\n      }\r\n      else if (Object.keys(types).length) {\r\n          Object.keys(types).forEach(function (id) {\r\n              if (types[id] === type) {\r\n                  has = true;\r\n              }\r\n          });\r\n      }\r\n      else {\r\n          has = $$.config.data_type === type;\r\n      }\r\n      return has;\r\n  };\r\n  ChartInternal.prototype.hasArcType = function (targets) {\r\n      return (this.hasType('pie', targets) ||\r\n          this.hasType('donut', targets) ||\r\n          this.hasType('gauge', targets));\r\n  };\r\n  ChartInternal.prototype.isLineType = function (d) {\r\n      var config = this.config, id = isString(d) ? d : d.id;\r\n      return (!config.data_types[id] ||\r\n          ['line', 'spline', 'area', 'area-spline', 'step', 'area-step'].indexOf(config.data_types[id]) >= 0);\r\n  };\r\n  ChartInternal.prototype.isStepType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return ['step', 'area-step'].indexOf(this.config.data_types[id]) >= 0;\r\n  };\r\n  ChartInternal.prototype.isSplineType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return ['spline', 'area-spline'].indexOf(this.config.data_types[id]) >= 0;\r\n  };\r\n  ChartInternal.prototype.isAreaType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return (['area', 'area-spline', 'area-step'].indexOf(this.config.data_types[id]) >=\r\n          0);\r\n  };\r\n  ChartInternal.prototype.isBarType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return this.config.data_types[id] === 'bar';\r\n  };\r\n  ChartInternal.prototype.isScatterType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return this.config.data_types[id] === 'scatter';\r\n  };\r\n  ChartInternal.prototype.isStanfordType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return this.config.data_types[id] === 'stanford';\r\n  };\r\n  ChartInternal.prototype.isPieType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return this.config.data_types[id] === 'pie';\r\n  };\r\n  ChartInternal.prototype.isGaugeType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return this.config.data_types[id] === 'gauge';\r\n  };\r\n  ChartInternal.prototype.isDonutType = function (d) {\r\n      var id = isString(d) ? d : d.id;\r\n      return this.config.data_types[id] === 'donut';\r\n  };\r\n  ChartInternal.prototype.isArcType = function (d) {\r\n      return this.isPieType(d) || this.isDonutType(d) || this.isGaugeType(d);\r\n  };\r\n  ChartInternal.prototype.lineData = function (d) {\r\n      return this.isLineType(d) ? [d] : [];\r\n  };\r\n  ChartInternal.prototype.arcData = function (d) {\r\n      return this.isArcType(d.data) ? [d] : [];\r\n  };\r\n  /* not used\r\n   function scatterData(d) {\r\n   return isScatterType(d) ? d.values : [];\r\n   }\r\n   */\r\n  ChartInternal.prototype.barData = function (d) {\r\n      return this.isBarType(d) ? d.values : [];\r\n  };\r\n  ChartInternal.prototype.lineOrScatterOrStanfordData = function (d) {\r\n      return this.isLineType(d) || this.isScatterType(d) || this.isStanfordType(d)\r\n          ? d.values\r\n          : [];\r\n  };\r\n  ChartInternal.prototype.barOrLineData = function (d) {\r\n      return this.isBarType(d) || this.isLineType(d) ? d.values : [];\r\n  };\n\n  ChartInternal.prototype.isSafari = function () {\r\n      var ua = window.navigator.userAgent;\r\n      return ua.indexOf('Safari') >= 0 && ua.indexOf('Chrome') < 0;\r\n  };\r\n  ChartInternal.prototype.isChrome = function () {\r\n      var ua = window.navigator.userAgent;\r\n      return ua.indexOf('Chrome') >= 0;\r\n  };\n\n  ChartInternal.prototype.initZoom = function () {\r\n      var $$ = this, d3 = $$.d3, config = $$.config, startEvent;\r\n      $$.zoom = d3\r\n          .zoom()\r\n          .on('start', function () {\r\n          if (config.zoom_type !== 'scroll') {\r\n              return;\r\n          }\r\n          var e = d3.event.sourceEvent;\r\n          if (e && e.type === 'brush') {\r\n              return;\r\n          }\r\n          startEvent = e;\r\n          config.zoom_onzoomstart.call($$.api, e);\r\n      })\r\n          .on('zoom', function () {\r\n          if (config.zoom_type !== 'scroll') {\r\n              return;\r\n          }\r\n          var e = d3.event.sourceEvent;\r\n          if (e && e.type === 'brush') {\r\n              return;\r\n          }\r\n          $$.redrawForZoom();\r\n          config.zoom_onzoom.call($$.api, $$.x.orgDomain());\r\n      })\r\n          .on('end', function () {\r\n          if (config.zoom_type !== 'scroll') {\r\n              return;\r\n          }\r\n          var e = d3.event.sourceEvent;\r\n          if (e && e.type === 'brush') {\r\n              return;\r\n          }\r\n          // if click, do nothing. otherwise, click interaction will be canceled.\r\n          if (e &&\r\n              startEvent.clientX === e.clientX &&\r\n              startEvent.clientY === e.clientY) {\r\n              return;\r\n          }\r\n          config.zoom_onzoomend.call($$.api, $$.x.orgDomain());\r\n      });\r\n      $$.zoom.updateDomain = function () {\r\n          if (d3.event && d3.event.transform) {\r\n              if (config.axis_rotated && config.zoom_type === 'scroll' && d3.event.sourceEvent.type === 'mousemove') {\r\n                  // we're moving the mouse in a rotated chart with zoom = \"scroll\", so we need rescaleY (i.e. vertical)\r\n                  $$.x.domain(d3.event.transform.rescaleY($$.subX).domain());\r\n              }\r\n              else {\r\n                  $$.x.domain(d3.event.transform.rescaleX($$.subX).domain());\r\n              }\r\n          }\r\n          return this;\r\n      };\r\n      $$.zoom.updateExtent = function () {\r\n          this.scaleExtent([1, Infinity])\r\n              .translateExtent([\r\n              [0, 0],\r\n              [$$.width, $$.height]\r\n          ])\r\n              .extent([\r\n              [0, 0],\r\n              [$$.width, $$.height]\r\n          ]);\r\n          return this;\r\n      };\r\n      $$.zoom.update = function () {\r\n          return this.updateExtent().updateDomain();\r\n      };\r\n      return $$.zoom.updateExtent();\r\n  };\r\n  ChartInternal.prototype.zoomTransform = function (range) {\r\n      var $$ = this, s = [$$.x(range[0]), $$.x(range[1])];\r\n      return $$.d3.zoomIdentity.scale($$.width / (s[1] - s[0])).translate(-s[0], 0);\r\n  };\r\n  ChartInternal.prototype.initDragZoom = function () {\r\n      var $$ = this;\r\n      var d3 = $$.d3;\r\n      var config = $$.config;\r\n      var context = ($$.context = $$.svg);\r\n      var brushXPos = $$.margin.left + 20.5;\r\n      var brushYPos = $$.margin.top + 0.5;\r\n      if (!(config.zoom_type === 'drag' && config.zoom_enabled)) {\r\n          return;\r\n      }\r\n      var getZoomedDomain = function (selection) {\r\n          return selection && selection.map(function (x) { return $$.x.invert(x); });\r\n      };\r\n      var brush = ($$.dragZoomBrush = d3\r\n          .brushX()\r\n          .on('start', function () {\r\n          $$.api.unzoom();\r\n          $$.svg.select('.' + CLASS.dragZoom).classed('disabled', false);\r\n          config.zoom_onzoomstart.call($$.api, d3.event.sourceEvent);\r\n      })\r\n          .on('brush', function () {\r\n          config.zoom_onzoom.call($$.api, getZoomedDomain(d3.event.selection));\r\n      })\r\n          .on('end', function () {\r\n          if (d3.event.selection == null) {\r\n              return;\r\n          }\r\n          var zoomedDomain = getZoomedDomain(d3.event.selection);\r\n          if (!config.zoom_disableDefaultBehavior) {\r\n              $$.api.zoom(zoomedDomain);\r\n          }\r\n          $$.svg.select('.' + CLASS.dragZoom).classed('disabled', true);\r\n          config.zoom_onzoomend.call($$.api, zoomedDomain);\r\n      }));\r\n      context\r\n          .append('g')\r\n          .classed(CLASS.dragZoom, true)\r\n          .attr('clip-path', $$.clipPath)\r\n          .attr('transform', 'translate(' + brushXPos + ',' + brushYPos + ')')\r\n          .call(brush);\r\n  };\r\n  ChartInternal.prototype.getZoomDomain = function () {\r\n      var $$ = this, config = $$.config, d3 = $$.d3, min = d3.min([$$.orgXDomain[0], config.zoom_x_min]), max = d3.max([$$.orgXDomain[1], config.zoom_x_max]);\r\n      return [min, max];\r\n  };\r\n  ChartInternal.prototype.redrawForZoom = function () {\r\n      var $$ = this, d3 = $$.d3, config = $$.config, zoom = $$.zoom, x = $$.x;\r\n      if (!config.zoom_enabled) {\r\n          return;\r\n      }\r\n      if ($$.filterTargetsToShow($$.data.targets).length === 0) {\r\n          return;\r\n      }\r\n      zoom.update();\r\n      if (config.zoom_disableDefaultBehavior) {\r\n          return;\r\n      }\r\n      if ($$.isCategorized() && x.orgDomain()[0] === $$.orgXDomain[0]) {\r\n          x.domain([$$.orgXDomain[0] - 1e-10, x.orgDomain()[1]]);\r\n      }\r\n      $$.redraw({\r\n          withTransition: false,\r\n          withY: config.zoom_rescale,\r\n          withSubchart: false,\r\n          withEventRect: false,\r\n          withDimension: false\r\n      });\r\n      if (d3.event.sourceEvent && d3.event.sourceEvent.type === 'mousemove') {\r\n          $$.cancelClick = true;\r\n      }\r\n  };\n\n  return c3;\n\n})));\n"],"sourceRoot":""}